{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/PROJECT%202025%20-%20October/math4code-website/app/admin/exams/components/ExamRow.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport Link from \"next/link\";\r\nimport { Edit2, Trash2, Eye, Clock, Award, Calendar, ArrowRight, Trophy } from \"lucide-react\";\r\nimport { formatDistanceToNow } from \"date-fns\";\r\n\r\nexport default function ExamRow({\r\n  exam,\r\n  onDelete,\r\n  deleting,\r\n}: {\r\n  exam: any;\r\n  onDelete?: () => void;\r\n  deleting?: boolean;\r\n}) {\r\n  const getStatusColor = (status: string) => {\r\n    const colors: Record<string, string> = {\r\n      draft: \"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-300\",\r\n      published: \"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400\",\r\n      archived: \"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400\",\r\n    };\r\n    return colors[status] || colors.draft;\r\n  };\r\n\r\n  return (\r\n    <div className=\"group relative overflow-hidden rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 p-5 hover:shadow-lg transition-all duration-300\">\r\n      {/* Decorative gradient on hover */}\r\n      <div className=\"absolute inset-0 bg-linear-to-r from-indigo-500/5 to-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300\" />\r\n\r\n      <div className=\"relative flex items-start justify-between gap-4\">\r\n        <div className=\"flex-1 min-w-0\">\r\n          {/* Title and Status */}\r\n          <div className=\"flex items-start gap-3 mb-3\">\r\n            <div className=\"flex-1\">\r\n              <h3 className=\"text-lg font-bold text-slate-900 dark:text-white mb-1 line-clamp-1\">\r\n                {exam.title}\r\n              </h3>\r\n              {exam.description && (\r\n                <p className=\"text-sm text-slate-500 dark:text-slate-400 line-clamp-2\">\r\n                  {exam.description}\r\n                </p>\r\n              )}\r\n            </div>\r\n            <Badge className={getStatusColor(exam.status || \"draft\")}>\r\n              {(exam.status || \"draft\").charAt(0).toUpperCase() + (exam.status || \"draft\").slice(1)}\r\n            </Badge>\r\n          </div>\r\n\r\n          {/* Metadata */}\r\n          <div className=\"flex flex-wrap items-center gap-4\">\r\n            <div className=\"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800\">\r\n              <Clock className=\"w-4 h-4 text-blue-600 dark:text-blue-400\" />\r\n              <span className=\"text-sm font-medium text-blue-700 dark:text-blue-300\">\r\n                {exam.duration_minutes} min\r\n              </span>\r\n            </div>\r\n            <div className=\"flex items-center gap-2 px-3 py-1.5 rounded-lg bg-green-50 dark:bg-green-900/20 border border-green-100 dark:border-green-800\">\r\n              <Award className=\"w-4 h-4 text-green-600 dark:text-green-400\" />\r\n              <span className=\"text-sm font-medium text-green-700 dark:text-green-300\">\r\n                {exam.total_marks} marks\r\n              </span>\r\n            </div>\r\n            {exam.created_at && (\r\n              <div className=\"flex items-center gap-2 text-sm text-slate-500 dark:text-slate-400\">\r\n                <Calendar className=\"w-4 h-4\" />\r\n                <span>Created {formatDistanceToNow(new Date(exam.created_at), { addSuffix: true })}</span>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Actions */}\r\n        <div className=\"flex items-center gap-2\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={onDelete}\r\n            disabled={deleting}\r\n            className=\"border-red-200 dark:border-red-800 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20\"\r\n          >\r\n            <Trash2 className=\"w-4 h-4\" />\r\n          </Button>\r\n          <Link href={`/admin/exams/${exam.id}/results`}>\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              className=\"border-blue-200 dark:border-blue-800 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20\"\r\n            >\r\n              <Trophy className=\"w-4 h-4 mr-2\" />\r\n              Results\r\n            </Button>\r\n          </Link>\r\n          <Link href={`/admin/exams/${exam.id}`}>\r\n            <Button\r\n              size=\"sm\"\r\n              className=\"bg-indigo-600 hover:bg-indigo-700 text-white\"\r\n            >\r\n              Manage\r\n              <ArrowRight className=\"w-4 h-4 ml-2\" />\r\n            </Button>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AANA;;;;;;;AAQe,SAAS,QAAQ,EAC9B,IAAI,EACJ,QAAQ,EACR,QAAQ,EAKT;IACC,MAAM,iBAAiB,CAAC;QACtB,MAAM,SAAiC;YACrC,OAAO;YACP,WAAW;YACX,UAAU;QACZ;QACA,OAAO,MAAM,CAAC,OAAO,IAAI,OAAO,KAAK;IACvC;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC;gBAAI,WAAU;;;;;;0BAEf,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CAEb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAG,WAAU;0DACX,KAAK,KAAK;;;;;;4CAEZ,KAAK,WAAW,kBACf,6LAAC;gDAAE,WAAU;0DACV,KAAK,WAAW;;;;;;;;;;;;kDAIvB,6LAAC,sIAAK;wCAAC,WAAW,eAAe,KAAK,MAAM,IAAI;kDAC7C,CAAC,KAAK,MAAM,IAAI,OAAO,EAAE,MAAM,CAAC,GAAG,WAAW,KAAK,CAAC,KAAK,MAAM,IAAI,OAAO,EAAE,KAAK,CAAC;;;;;;;;;;;;0CAKvF,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAI,WAAU;;0DACb,6LAAC,gNAAK;gDAAC,WAAU;;;;;;0DACjB,6LAAC;gDAAK,WAAU;;oDACb,KAAK,gBAAgB;oDAAC;;;;;;;;;;;;;kDAG3B,6LAAC;wCAAI,WAAU;;0DACb,6LAAC,gNAAK;gDAAC,WAAU;;;;;;0DACjB,6LAAC;gDAAK,WAAU;;oDACb,KAAK,WAAW;oDAAC;;;;;;;;;;;;;oCAGrB,KAAK,UAAU,kBACd,6LAAC;wCAAI,WAAU;;0DACb,6LAAC,yNAAQ;gDAAC,WAAU;;;;;;0DACpB,6LAAC;;oDAAK;oDAAS,IAAA,4KAAmB,EAAC,IAAI,KAAK,KAAK,UAAU,GAAG;wDAAE,WAAW;oDAAK;;;;;;;;;;;;;;;;;;;;;;;;;kCAOxF,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,wIAAM;gCACL,SAAQ;gCACR,MAAK;gCACL,SAAS;gCACT,UAAU;gCACV,WAAU;0CAEV,cAAA,6LAAC,uNAAM;oCAAC,WAAU;;;;;;;;;;;0CAEpB,6LAAC,0KAAI;gCAAC,MAAM,CAAC,aAAa,EAAE,KAAK,EAAE,CAAC,QAAQ,CAAC;0CAC3C,cAAA,6LAAC,wIAAM;oCACL,SAAQ;oCACR,MAAK;oCACL,WAAU;;sDAEV,6LAAC,mNAAM;4CAAC,WAAU;;;;;;wCAAiB;;;;;;;;;;;;0CAIvC,6LAAC,0KAAI;gCAAC,MAAM,CAAC,aAAa,EAAE,KAAK,EAAE,EAAE;0CACnC,cAAA,6LAAC,wIAAM;oCACL,MAAK;oCACL,WAAU;;wCACX;sDAEC,6LAAC,mOAAU;4CAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOpC;KAnGwB"}},
    {"offset": {"line": 291, "column": 0}, "map": {"version":3,"sources":["file:///E:/PROJECT%202025%20-%20October/math4code-website/app/admin/exams/components/EmptyExams.tsx"],"sourcesContent":["import { Button } from \"@/components/ui/button\"\r\nimport Link from \"next/link\"\r\n\r\nexport default function EmptyExams() {\r\n  return (\r\n    <div className=\"text-center py-12\">\r\n      <p className=\"text-gray-500 mb-4\">No exams created yet</p>\r\n      <Link href=\"/admin/exams/create\">\r\n        <Button>Create Your First Exam</Button>\r\n      </Link>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAEe,SAAS;IACtB,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAE,WAAU;0BAAqB;;;;;;0BAClC,6LAAC,0KAAI;gBAAC,MAAK;0BACT,cAAA,6LAAC,wIAAM;8BAAC;;;;;;;;;;;;;;;;;AAIhB;KATwB"}},
    {"offset": {"line": 344, "column": 0}, "map": {"version":3,"sources":["file:///E:/PROJECT%202025%20-%20October/math4code-website/hooks/admin/exams/useExams.ts"],"sourcesContent":["// hooks/admin/exams/useExams.ts\r\n\"use client\";\r\n\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { createClient } from \"@/lib/supabase/client\";\r\n\r\nexport default function useExams() {\r\n  const supabase = createClient();\r\n\r\n  return useQuery({\r\n    queryKey: [\"admin\", \"exams\"],\r\n    queryFn: async () => {\r\n      // get user\r\n      const { data: userData, error: userErr } = await supabase.auth.getUser();\r\n      if (userErr) throw userErr;\r\n      const userId = userData?.user?.id;\r\n      if (!userId) return [];\r\n\r\n      const { data, error } = await supabase\r\n        .from(\"exams\")\r\n        .select(\"*\")\r\n        .eq(\"admin_id\", userId)\r\n        .order(\"created_at\", { ascending: false });\r\n\r\n      if (error) throw error;\r\n      return (data || []) as any[];\r\n    },\r\n    staleTime: 1000 * 60 * 2,\r\n    refetchOnWindowFocus: false,\r\n  });\r\n}\r\n"],"names":[],"mappings":"AAAA,gCAAgC;;;;;AAGhC;AACA;;AAHA;;;AAKe,SAAS;;IACtB,MAAM,WAAW,IAAA,4IAAY;IAE7B,OAAO,IAAA,0LAAQ,EAAC;QACd,UAAU;YAAC;YAAS;SAAQ;QAC5B,OAAO;iCAAE;gBACP,WAAW;gBACX,MAAM,EAAE,MAAM,QAAQ,EAAE,OAAO,OAAO,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;gBACtE,IAAI,SAAS,MAAM;gBACnB,MAAM,SAAS,UAAU,MAAM;gBAC/B,IAAI,CAAC,QAAQ,OAAO,EAAE;gBAEtB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,SACL,MAAM,CAAC,KACP,EAAE,CAAC,YAAY,QACf,KAAK,CAAC,cAAc;oBAAE,WAAW;gBAAM;gBAE1C,IAAI,OAAO,MAAM;gBACjB,OAAQ,QAAQ,EAAE;YACpB;;QACA,WAAW,OAAO,KAAK;QACvB,sBAAsB;IACxB;AACF;GAxBwB;;QAGf,0LAAQ"}},
    {"offset": {"line": 393, "column": 0}, "map": {"version":3,"sources":["file:///E:/PROJECT%202025%20-%20October/math4code-website/hooks/admin/exams/useDeleteExam.ts"],"sourcesContent":["// hooks/admin/exams/useDeleteExam.ts\r\n\"use client\";\r\n\r\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { createClient } from \"@/lib/supabase/client\";\r\n\r\nexport default function useDeleteExam() {\r\n  const supabase = createClient();\r\n  const qc = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: async (examId: string) => {\r\n      // delete dependent records if necessary (sections/questions) depending on your schema\r\n      // for safety below we delete exam rows only (change if cascade is needed)\r\n      const { error } = await supabase.from(\"exams\").delete().eq(\"id\", examId);\r\n      if (error) throw error;\r\n      return examId;\r\n    },\r\n    onSuccess: () => {\r\n      qc.invalidateQueries({ queryKey: [\"admin\", \"exams\"] });\r\n    },\r\n  });\r\n}\r\n"],"names":[],"mappings":"AAAA,qCAAqC;;;;;AAGrC;AAAA;AACA;;AAHA;;;AAKe,SAAS;;IACtB,MAAM,WAAW,IAAA,4IAAY;IAC7B,MAAM,KAAK,IAAA,2MAAc;IAEzB,OAAO,IAAA,gMAAW,EAAC;QACjB,UAAU;yCAAE,OAAO;gBACjB,sFAAsF;gBACtF,0EAA0E;gBAC1E,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,SAAS,MAAM,GAAG,EAAE,CAAC,MAAM;gBACjE,IAAI,OAAO,MAAM;gBACjB,OAAO;YACT;;QACA,SAAS;yCAAE;gBACT,GAAG,iBAAiB,CAAC;oBAAE,UAAU;wBAAC;wBAAS;qBAAQ;gBAAC;YACtD;;IACF;AACF;GAhBwB;;QAEX,2MAAc;QAElB,gMAAW"}},
    {"offset": {"line": 444, "column": 0}, "map": {"version":3,"sources":["file:///E:/PROJECT%202025%20-%20October/math4code-website/app/admin/exams/components/ExamsTable.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardHeader,\r\n  CardTitle,\r\n} from \"@/components/ui/card\";\r\nimport ExamRow from \"./ExamRow\";\r\nimport EmptyExams from \"./EmptyExams\";\r\nimport useExams from \"@/hooks/admin/exams/useExams\";\r\nimport useDeleteExam from \"@/hooks/admin/exams/useDeleteExam\";\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n} from \"@/components/ui/alert-dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport {\r\n  FileText,\r\n  Search,\r\n  Filter,\r\n  AlertCircle,\r\n  Loader2\r\n} from \"lucide-react\";\r\n\r\nexport default function ExamsTable() {\r\n  const { data: exams, isLoading, isError, error } = useExams();\r\n  const deleteExamMutation = useDeleteExam();\r\n  const [selectedExam, setSelectedExam] = useState<any>(null);\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [statusFilter, setStatusFilter] = useState<string>(\"all\");\r\n\r\n  const handleDeleteConfirm = async () => {\r\n    if (!selectedExam) return;\r\n    await deleteExamMutation.mutateAsync(selectedExam.id);\r\n    setSelectedExam(null);\r\n  };\r\n\r\n  // Filter exams\r\n  const filteredExams = exams?.filter((exam: any) => {\r\n    const matchesSearch = exam.title.toLowerCase().includes(searchQuery.toLowerCase());\r\n    const matchesStatus = statusFilter === \"all\" || exam.status === statusFilter;\r\n    return matchesSearch && matchesStatus;\r\n  });\r\n\r\n  const statusCounts = {\r\n    all: exams?.length || 0,\r\n    draft: exams?.filter((e: any) => e.status === \"draft\").length || 0,\r\n    published: exams?.filter((e: any) => e.status === \"published\").length || 0,\r\n    archived: exams?.filter((e: any) => e.status === \"archived\").length || 0,\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Card className=\"border-none shadow-xl bg-white dark:bg-slate-800 overflow-hidden\">\r\n        {/* Header with gradient */}\r\n        <div className=\"bg-linear-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-900 border-b border-slate-200 dark:border-slate-700\">\r\n          <CardHeader>\r\n            <div className=\"flex items-center gap-3 mb-2\">\r\n              <div className=\"p-2 bg-indigo-100 dark:bg-indigo-900/30 rounded-lg\">\r\n                <FileText className=\"w-5 h-5 text-indigo-600 dark:text-indigo-400\" />\r\n              </div>\r\n              <div>\r\n                <CardTitle className=\"text-2xl font-bold text-slate-900 dark:text-white\">\r\n                  Your Exams\r\n                </CardTitle>\r\n                <CardDescription className=\"text-slate-500 dark:text-slate-400\">\r\n                  {exams?.length || 0} {exams?.length === 1 ? \"exam\" : \"exams\"} created\r\n                </CardDescription>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Search and Filters */}\r\n            {exams && exams.length > 0 && (\r\n              <div className=\"flex flex-col sm:flex-row gap-4 mt-4\">\r\n                <div className=\"relative flex-1\">\r\n                  <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\" />\r\n                  <Input\r\n                    placeholder=\"Search exams...\"\r\n                    value={searchQuery}\r\n                    onChange={(e) => setSearchQuery(e.target.value)}\r\n                    className=\"pl-10\"\r\n                  />\r\n                </div>\r\n                <div className=\"flex gap-2\">\r\n                  {([\"all\", \"draft\", \"published\", \"archived\"] as const).map((status) => (\r\n                    <Button\r\n                      key={status}\r\n                      variant={statusFilter === status ? \"default\" : \"outline\"}\r\n                      size=\"sm\"\r\n                      onClick={() => setStatusFilter(status)}\r\n                      className={statusFilter === status ? \"bg-indigo-600\" : \"\"}\r\n                    >\r\n                      {status.charAt(0).toUpperCase() + status.slice(1)}\r\n                      <Badge\r\n                        variant=\"secondary\"\r\n                        className=\"ml-2 bg-white/20 text-current border-0\"\r\n                      >\r\n                        {statusCounts[status]}\r\n                      </Badge>\r\n                    </Button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </CardHeader>\r\n        </div>\r\n\r\n        <CardContent className=\"p-6\">\r\n          {isLoading ? (\r\n            <div className=\"flex items-center justify-center py-12\">\r\n              <div className=\"text-center\">\r\n                <Loader2 className=\"w-8 h-8 animate-spin text-indigo-600 mx-auto mb-3\" />\r\n                <p className=\"text-sm text-slate-500\">Loading exams...</p>\r\n              </div>\r\n            </div>\r\n          ) : isError ? (\r\n            <motion.div\r\n              initial={{ opacity: 0, y: 20 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              className=\"flex items-center gap-3 p-4 rounded-xl bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400\"\r\n            >\r\n              <AlertCircle className=\"w-5 h-5 shrink-0\" />\r\n              <div>\r\n                <p className=\"font-medium\">Failed to load exams</p>\r\n                <p className=\"text-sm opacity-90\">{(error as any)?.message}</p>\r\n              </div>\r\n            </motion.div>\r\n          ) : !exams || exams.length === 0 ? (\r\n            <EmptyExams />\r\n          ) : filteredExams?.length === 0 ? (\r\n            <div className=\"text-center py-12\">\r\n              <div className=\"inline-flex items-center justify-center w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-800 mb-4\">\r\n                <Search className=\"w-8 h-8 text-slate-400\" />\r\n              </div>\r\n              <p className=\"text-slate-600 dark:text-slate-400 font-medium\">\r\n                No exams match your filters\r\n              </p>\r\n              <p className=\"text-sm text-slate-500 dark:text-slate-500 mt-1\">\r\n                Try adjusting your search or filters\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-3\">\r\n              <AnimatePresence mode=\"popLayout\">\r\n                {filteredExams?.map((exam: any, index: number) => (\r\n                  <motion.div\r\n                    key={exam.id}\r\n                    initial={{ opacity: 0, y: 20 }}\r\n                    animate={{ opacity: 1, y: 0 }}\r\n                    exit={{ opacity: 0, y: -20 }}\r\n                    transition={{ delay: index * 0.05 }}\r\n                  >\r\n                    <ExamRow\r\n                      exam={exam}\r\n                      onDelete={() => setSelectedExam(exam)}\r\n                      deleting={\r\n                        deleteExamMutation.isPending &&\r\n                        deleteExamMutation.variables === exam.id\r\n                      }\r\n                    />\r\n                  </motion.div>\r\n                ))}\r\n              </AnimatePresence>\r\n            </div>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Delete Confirmation Dialog */}\r\n      <AlertDialog open={!!selectedExam} onOpenChange={() => setSelectedExam(null)}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>Delete Exam?</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              Are you sure you want to permanently delete{\" \"}\r\n              <strong>{selectedExam?.title}</strong>? <br />\r\n              This action cannot be undone and all related sections and questions\r\n              will also be deleted.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel disabled={deleteExamMutation.isPending}>\r\n              Cancel\r\n            </AlertDialogCancel>\r\n            <Button\r\n              variant=\"destructive\"\r\n              onClick={handleDeleteConfirm}\r\n              disabled={deleteExamMutation.isPending}\r\n            >\r\n              {deleteExamMutation.isPending ? (\r\n                <>\r\n                  <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\r\n                  Deleting...\r\n                </>\r\n              ) : (\r\n                \"Yes, Delete\"\r\n              )}\r\n            </Button>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 932, "column": 0}, "map": {"version":3,"sources":["file:///E:/PROJECT%202025%20-%20October/math4code-website/components/ui/table.tsx"],"sourcesContent":["'use client'\r\n\r\nimport * as React from 'react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Table({ className, ...props }: React.ComponentProps<'table'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"table-container\"\r\n      className=\"relative w-full overflow-x-auto\"\r\n    >\r\n      <table\r\n        data-slot=\"table\"\r\n        className={cn('w-full caption-bottom text-sm', className)}\r\n        {...props}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction TableHeader({ className, ...props }: React.ComponentProps<'thead'>) {\r\n  return (\r\n    <thead\r\n      data-slot=\"table-header\"\r\n      className={cn('[&_tr]:border-b', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction TableBody({ className, ...props }: React.ComponentProps<'tbody'>) {\r\n  return (\r\n    <tbody\r\n      data-slot=\"table-body\"\r\n      className={cn('[&_tr:last-child]:border-0', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction TableFooter({ className, ...props }: React.ComponentProps<'tfoot'>) {\r\n  return (\r\n    <tfoot\r\n      data-slot=\"table-footer\"\r\n      className={cn(\r\n        'bg-muted/50 border-t font-medium [&>tr]:last:border-b-0',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction TableRow({ className, ...props }: React.ComponentProps<'tr'>) {\r\n  return (\r\n    <tr\r\n      data-slot=\"table-row\"\r\n      className={cn(\r\n        'hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction TableHead({ className, ...props }: React.ComponentProps<'th'>) {\r\n  return (\r\n    <th\r\n      data-slot=\"table-head\"\r\n      className={cn(\r\n        'text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction TableCell({ className, ...props }: React.ComponentProps<'td'>) {\r\n  return (\r\n    <td\r\n      data-slot=\"table-cell\"\r\n      className={cn(\r\n        'p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction TableCaption({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<'caption'>) {\r\n  return (\r\n    <caption\r\n      data-slot=\"table-caption\"\r\n      className={cn('text-muted-foreground mt-4 text-sm', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport {\r\n  Table,\r\n  TableHeader,\r\n  TableBody,\r\n  TableFooter,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableCaption,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAIA;AAJA;;;AAMA,SAAS,MAAM,EAAE,SAAS,EAAE,GAAG,OAAsC;IACnE,qBACE,6LAAC;QACC,aAAU;QACV,WAAU;kBAEV,cAAA,6LAAC;YACC,aAAU;YACV,WAAW,IAAA,qHAAE,EAAC,iCAAiC;YAC9C,GAAG,KAAK;;;;;;;;;;;AAIjB;KAbS;AAeT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAsC;IACzE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,mBAAmB;QAChC,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAsC;IACvE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAsC;IACzE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,2DACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAmC;IACnE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,+EACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAmC;IACpE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,sJACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAmC;IACpE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,0GACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,aAAa,EACpB,SAAS,EACT,GAAG,OAC6B;IAChC,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;MAXS"}},
    {"offset": {"line": 1076, "column": 0}, "map": {"version":3,"sources":["file:///E:/PROJECT%202025%20-%20October/math4code-website/app/admin/exams/components/ExamsTableSkeleton.tsx"],"sourcesContent":["import { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\"\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\"\r\n\r\nexport default function ExamsTableSkeleton() {\r\n  const skeletonRows = Array.from({ length: 5 }) // 5 placeholder rows\r\n\r\n  return (\r\n    <Card>\r\n      <CardHeader>\r\n        <CardTitle>Your Exams</CardTitle>\r\n        <CardDescription>All exams created by you</CardDescription>\r\n      </CardHeader>\r\n      <CardContent>\r\n        <Table>\r\n          <TableHeader>\r\n            <TableRow>\r\n              <TableHead>Title</TableHead>\r\n              <TableHead>Duration</TableHead>\r\n              <TableHead>Total Marks</TableHead>\r\n              <TableHead>Status</TableHead>\r\n              <TableHead>Created</TableHead>\r\n              <TableHead>Actions</TableHead>\r\n            </TableRow>\r\n          </TableHeader>\r\n          <TableBody>\r\n            {skeletonRows.map((_, idx) => (\r\n              <TableRow key={idx}>\r\n                <TableCell>\r\n                  <div className=\"h-4 bg-gray-200 rounded animate-pulse w-24\"></div>\r\n                </TableCell>\r\n                <TableCell>\r\n                  <div className=\"h-4 bg-gray-200 rounded animate-pulse w-12\"></div>\r\n                </TableCell>\r\n                <TableCell>\r\n                  <div className=\"h-4 bg-gray-200 rounded animate-pulse w-12\"></div>\r\n                </TableCell>\r\n                <TableCell>\r\n                  <div className=\"h-4 bg-gray-200 rounded-full animate-pulse w-16\"></div>\r\n                </TableCell>\r\n                <TableCell>\r\n                  <div className=\"h-4 bg-gray-200 rounded animate-pulse w-20\"></div>\r\n                </TableCell>\r\n                <TableCell>\r\n                  <div className=\"flex gap-2\">\r\n                    <div className=\"h-6 w-6 bg-gray-200 rounded-full animate-pulse\"></div>\r\n                    <div className=\"h-6 w-6 bg-gray-200 rounded-full animate-pulse\"></div>\r\n                    <div className=\"h-6 w-6 bg-gray-200 rounded-full animate-pulse\"></div>\r\n                  </div>\r\n                </TableCell>\r\n              </TableRow>\r\n            ))}\r\n          </TableBody>\r\n        </Table>\r\n      </CardContent>\r\n    </Card>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAEe,SAAS;IACtB,MAAM,eAAe,MAAM,IAAI,CAAC;QAAE,QAAQ;IAAE,GAAG,qBAAqB;;IAEpE,qBACE,6LAAC,oIAAI;;0BACH,6LAAC,0IAAU;;kCACT,6LAAC,yIAAS;kCAAC;;;;;;kCACX,6LAAC,+IAAe;kCAAC;;;;;;;;;;;;0BAEnB,6LAAC,2IAAW;0BACV,cAAA,6LAAC,sIAAK;;sCACJ,6LAAC,4IAAW;sCACV,cAAA,6LAAC,yIAAQ;;kDACP,6LAAC,0IAAS;kDAAC;;;;;;kDACX,6LAAC,0IAAS;kDAAC;;;;;;kDACX,6LAAC,0IAAS;kDAAC;;;;;;kDACX,6LAAC,0IAAS;kDAAC;;;;;;kDACX,6LAAC,0IAAS;kDAAC;;;;;;kDACX,6LAAC,0IAAS;kDAAC;;;;;;;;;;;;;;;;;sCAGf,6LAAC,0IAAS;sCACP,aAAa,GAAG,CAAC,CAAC,GAAG,oBACpB,6LAAC,yIAAQ;;sDACP,6LAAC,0IAAS;sDACR,cAAA,6LAAC;gDAAI,WAAU;;;;;;;;;;;sDAEjB,6LAAC,0IAAS;sDACR,cAAA,6LAAC;gDAAI,WAAU;;;;;;;;;;;sDAEjB,6LAAC,0IAAS;sDACR,cAAA,6LAAC;gDAAI,WAAU;;;;;;;;;;;sDAEjB,6LAAC,0IAAS;sDACR,cAAA,6LAAC;gDAAI,WAAU;;;;;;;;;;;sDAEjB,6LAAC,0IAAS;sDACR,cAAA,6LAAC;gDAAI,WAAU;;;;;;;;;;;sDAEjB,6LAAC,0IAAS;sDACR,cAAA,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDAAI,WAAU;;;;;;kEACf,6LAAC;wDAAI,WAAU;;;;;;kEACf,6LAAC;wDAAI,WAAU;;;;;;;;;;;;;;;;;;mCApBN;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8B7B;KArDwB"}},
    {"offset": {"line": 1317, "column": 0}, "map": {"version":3,"sources":["file:///E:/PROJECT%202025%20-%20October/math4code-website/lib/import/examWord.ts"],"sourcesContent":["\r\nimport { createClient } from \"@/lib/supabase/client\";\r\n\r\ntype ExamBlock = {\r\n  title: string;\r\n  description?: string;\r\n  duration_minutes: number;\r\n  total_marks: number;\r\n  negative_marking: number;\r\n  status: \"draft\" | \"published\" | \"archived\";\r\n  start_time?: string;\r\n  end_time?: string;\r\n  sections: SectionBlock[];\r\n};\r\n\r\ntype SectionBlock = {\r\n  title: string;\r\n  duration_minutes: number;\r\n  total_marks: number;\r\n  section_order: number;\r\n  questions: QuestionBlock[];\r\n};\r\n\r\ntype QuestionBlock = {\r\n  question_text: string;\r\n  question_type: \"MCQ\" | \"MSQ\" | \"NAT\";\r\n  options: { text: string; is_correct: boolean }[];\r\n  correct_answer?: string;\r\n  explanation?: string;\r\n  marks: number;\r\n  negative_marks: number;\r\n  difficulty?: \"easy\" | \"medium\" | \"hard\";\r\n  topic?: string;\r\n};\r\n\r\nfunction getField(block: string, label: string): string {\r\n  const regex = new RegExp(`\\\\{${label}\\\\}\\\\s*([^\\\\n]*)`, \"i\");\r\n  const match = block.match(regex);\r\n  return match ? match[1].trim() : \"\";\r\n}\r\n\r\n// ðŸ”Ž Parse the Word .docx into structured Exam\r\nexport async function parseExamWord(file: File): Promise<ExamBlock> {\r\n  const buf = await file.arrayBuffer();\r\n  const { default: mammoth } = await import(\"mammoth\");\r\n  const { value } = await mammoth.extractRawText({ arrayBuffer: buf });\r\n\r\n  // exam block\r\n  const examBlock = value.split(\"{EXAM BEGINS}\")[1].split(\"{EXAM ENDS}\")[0];\r\n\r\n  const exam: ExamBlock = {\r\n    title: getField(examBlock, \"EXAM TITLE\"),\r\n    description: getField(examBlock, \"DESCRIPTION\"),\r\n    duration_minutes: Number(getField(examBlock, \"DURATION MINUTES\") || 0),\r\n    total_marks: Number(getField(examBlock, \"TOTAL MARKS\") || 0),\r\n    negative_marking: Number(getField(examBlock, \"NEGATIVE MARKING\") || 0),\r\n    status: (getField(examBlock, \"STATUS\") || \"draft\") as any,\r\n    start_time: getField(examBlock, \"START TIME\") || undefined,\r\n    end_time: getField(examBlock, \"END TIME\") || undefined,\r\n    sections: [],\r\n  };\r\n\r\n  // sections\r\n  const sectionBlocks = examBlock.split(\"{SECTION BEGINS}\").slice(1);\r\n  for (const sb of sectionBlocks) {\r\n    const sectionPart = sb.split(\"{SECTION ENDS}\")[0];\r\n    const section: SectionBlock = {\r\n      title: getField(sectionPart, \"SECTION TITLE\"),\r\n      duration_minutes: Number(getField(sectionPart, \"DURATION MINUTES\") || 0),\r\n      total_marks: Number(getField(sectionPart, \"TOTAL MARKS\") || 0),\r\n      section_order: Number(getField(sectionPart, \"SECTION ORDER\") || 0),\r\n      questions: [],\r\n    };\r\n\r\n    const qBlocks = sectionPart.split(\"{QUESTION BEGINS}\").slice(1);\r\n    for (const qb of qBlocks) {\r\n      const qPart = qb.split(\"{QUESTION ENDS}\")[0];\r\n      const qType = (getField(qPart, \"QUESTION TYPE\") || \"MCQ\").toUpperCase();\r\n\r\n      const rightAns = getField(qPart, \"RIGHT ANSWER\");\r\n      const options = Array.from({ length: 10 })\r\n        .map((_, i) => {\r\n          const txt = getField(qPart, `OPTION ${i + 1}`);\r\n          if (!txt) return null;\r\n          const isCorrect =\r\n            rightAns.split(\",\").map((x) => x.trim()).includes(String(i + 1));\r\n          return { text: txt, is_correct: isCorrect };\r\n        })\r\n        .filter(Boolean) as { text: string; is_correct: boolean }[];\r\n\r\n      const question: QuestionBlock = {\r\n        question_text: getField(qPart, \"QUESTION TEXT\"),\r\n        question_type: qType as any,\r\n        options: qType === \"NAT\" ? [] : options,\r\n        correct_answer: qType === \"NAT\" ? rightAns : undefined,\r\n        explanation: getField(qPart, \"EXPLANATION\"),\r\n        marks: Number(getField(qPart, \"CORRECT MARKS\") || 1),\r\n        negative_marks: Number(getField(qPart, \"NEGATIVE MARKS\") || 0),\r\n        difficulty: (getField(qPart, \"DIFFICULTY\") || \"easy\") as any,\r\n        topic: getField(qPart, \"TOPIC\"),\r\n      };\r\n\r\n      section.questions.push(question);\r\n    }\r\n\r\n    exam.sections.push(section);\r\n  }\r\n\r\n  return exam;\r\n}\r\n\r\n// ðŸ”Ž Insert Exam + Sections + Questions into Supabase\r\nexport async function importExamToSupabase(file: File, adminId: string) {\r\n  const exam = await parseExamWord(file);\r\n  const supabase = createClient();\r\n\r\n  // insert exam\r\n  const { data: examRow, error: examErr } = await supabase\r\n    .from(\"exams\")\r\n    .insert({\r\n      admin_id: adminId,\r\n      title: exam.title,\r\n      description: exam.description,\r\n      duration_minutes: exam.duration_minutes,\r\n      total_marks: exam.total_marks,\r\n      negative_marking: exam.negative_marking,\r\n      status: exam.status,\r\n      start_time: exam.start_time,\r\n      end_time: exam.end_time,\r\n    })\r\n    .select(\"id\")\r\n    .single();\r\n\r\n  if (examErr) throw examErr;\r\n\r\n  const examId = examRow.id;\r\n\r\n  // insert sections + questions\r\n  for (const sec of exam.sections) {\r\n    const { data: secRow, error: secErr } = await supabase\r\n      .from(\"sections\")\r\n      .insert({\r\n        exam_id: examId,\r\n        title: sec.title,\r\n        duration_minutes: sec.duration_minutes,\r\n        total_marks: sec.total_marks,\r\n        section_order: sec.section_order,\r\n      })\r\n      .select(\"id\")\r\n      .single();\r\n    if (secErr) throw secErr;\r\n\r\n    const secId = secRow.id;\r\n\r\n    for (const q of sec.questions) {\r\n      // 1ï¸âƒ£ Insert into question_bank\r\n      const { data: qbRow, error: qbErr } = await supabase\r\n        .from(\"question_bank\")\r\n        .insert({\r\n          admin_id: adminId,\r\n          title: q.question_text.slice(0, 50), // short title\r\n          question_text: q.question_text,\r\n          question_type: q.question_type,\r\n          marks: q.marks,\r\n          negative_marks: q.negative_marks,\r\n          correct_answer: q.correct_answer,\r\n          explanation: q.explanation,\r\n          subject: sec.title,\r\n          topic: q.topic,\r\n          difficulty: q.difficulty,\r\n        })\r\n        .select(\"id\")\r\n        .single();\r\n      if (qbErr) throw qbErr;\r\n\r\n      const qbId = qbRow.id;\r\n\r\n      if (q.options.length) {\r\n        const options = q.options.map((o, i) => ({\r\n          question_id: qbId,\r\n          option_text: o.text,\r\n          option_order: i + 1,\r\n          is_correct: o.is_correct,\r\n        }));\r\n        await supabase.from(\"question_bank_options\").insert(options);\r\n      }\r\n\r\n      // 2ï¸âƒ£ Insert into questions (exam delivery table)\r\n      const { data: qRow, error: qErr } = await supabase\r\n        .from(\"questions\")\r\n        .insert({\r\n          section_id: secId,\r\n          question_text: q.question_text,\r\n          question_type: q.question_type,\r\n          marks: q.marks,\r\n          negative_marks: q.negative_marks,\r\n          correct_answer: q.correct_answer,\r\n          explanation: q.explanation,\r\n        })\r\n        .select(\"id\")\r\n        .single();\r\n      if (qErr) throw qErr;\r\n\r\n      const questionId = qRow.id;\r\n\r\n      if (q.options.length) {\r\n        const opts = q.options.map((o, i) => ({\r\n          question_id: questionId,\r\n          option_text: o.text,\r\n          option_order: i + 1,\r\n          is_correct: o.is_correct,\r\n        }));\r\n        await supabase.from(\"options\").insert(opts);\r\n      }\r\n    }\r\n  }\r\n\r\n  return exam;\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1479, "column": 0}, "map": {"version":3,"sources":["file:///E:/PROJECT%202025%20-%20October/math4code-website/lib/import/examLatex.ts"],"sourcesContent":["import { createClient } from \"@/lib/supabase/client\";\r\n\r\n// â€”â€” Helpers â€”â€”\r\ntype ExamBlock = {\r\n  title: string;\r\n  description?: string;\r\n  duration_minutes: number;\r\n  total_marks: number;\r\n  negative_marking: number;\r\n  status: \"draft\" | \"published\" | \"archived\";\r\n  start_time?: string;\r\n  end_time?: string;\r\n  sections: SectionBlock[];\r\n};\r\n\r\ntype SectionBlock = {\r\n  title: string;\r\n  section_order: number;\r\n  questions: QuestionBlock[];\r\n};\r\n\r\ntype QuestionBlock = {\r\n  question_text: string;\r\n  question_type: \"MCQ\" | \"MSQ\" | \"NAT\";\r\n  options: { text: string; is_correct: boolean }[];\r\n  correct_answer?: string | null;\r\n  explanation?: string | null;\r\n  marks: number;\r\n  negative_marks: number;\r\n  difficulty?: \"easy\" | \"medium\" | \"hard\";\r\n  topic?: string;\r\n  title?: string;\r\n};\r\n\r\nfunction stripComments(src: string): string {\r\n  // remove LaTeX comments (%) to avoid confusing regex, preserve newlines\r\n  return src.replace(/(^|[\\r\\n])\\s*%.*$/gm, \"$1\");\r\n}\r\n\r\n// Matches: \\textbf{Label:} value\r\nfunction metaLine(text: string, label: string): string | null {\r\n  const re = new RegExp(`\\\\\\\\textbf\\\\{${label}:\\\\}\\\\s*([^\\\\\\\\\\\\n]+)`, \"i\");\r\n  return re.exec(text)?.[1]?.trim() ?? null;\r\n}\r\n\r\n// Collect all matches (group 1) for a regex with the global flag\r\nfunction collect(text: string, re: RegExp): string[] {\r\n  return [...text.matchAll(re)].map((m) => m[1].trim());\r\n}\r\n\r\n// â€”â€” Parser â€”â€”\r\nexport async function parseExamLatex(file: File): Promise<ExamBlock> {\r\n  const raw = await file.text();\r\n  const text = stripComments(raw);\r\n\r\n  // Exam title from \\begin{exam}{Title}\r\n  const title = (text.match(/\\\\begin{exam}\\{([^}]*)\\}/)?.[1] || \"Untitled Exam\").trim();\r\n\r\n  const exam: ExamBlock = {\r\n    title,\r\n    description: metaLine(text, \"Description\") || \"\",\r\n    duration_minutes: Number((metaLine(text, \"Duration\") || \"0\").replace(/minutes?/i, \"\").trim()),\r\n    total_marks: Number(metaLine(text, \"Total Marks\") || 0),\r\n    negative_marking: Number(metaLine(text, \"Negative Marking\") || 0),\r\n    status: (metaLine(text, \"Status\")?.toLowerCase() || \"draft\") as \"draft\" | \"published\" | \"archived\",\r\n    start_time: metaLine(text, \"Start Time\") || undefined,\r\n    end_time: metaLine(text, \"End Time\") || undefined,\r\n    sections: [],\r\n  };\r\n\r\n  // Sections\r\n  const sectionBlocks = text.split(\"\\\\begin{examsection}\").slice(1);\r\n  for (const sb of sectionBlocks) {\r\n    const headerMatch = sb.match(/\\{(\\d+)\\}\\{([^}]*)\\}/); // {order}{title}\r\n    const section_order = Number(headerMatch?.[1] ?? 0);\r\n    const section_title = (headerMatch?.[2] ?? \"Untitled\").trim();\r\n\r\n    const sectionBody = sb.split(\"\\\\end{examsection}\")[0];\r\n\r\n    // Find positions of each question start, bound blocks accordingly\r\n    const qStartMatches = [...sectionBody.matchAll(/^\\s*\\\\question\\s*(?=\\{)/gm)];\r\n    const starts = qStartMatches.map((m) => m.index ?? 0);\r\n    // nothing found â†’ empty section\r\n    if (!starts.length) {\r\n      exam.sections.push({ title: section_title, section_order, questions: [] });\r\n      continue;\r\n    }\r\n    starts.push(sectionBody.length); // sentinel end\r\n\r\n    const questions: QuestionBlock[] = [];\r\n\r\n    for (let i = 0; i < starts.length - 1; i++) {\r\n      const start = starts[i]!;\r\n      const end = starts[i + 1]!;\r\n      let qblock = sectionBody.slice(start, end);\r\n\r\n      // remove the leading \\question and spaces\r\n      qblock = qblock.replace(/^\\s*\\\\question\\s*/m, \"\");\r\n\r\n      // Header: {TYPE}{TEXT}{MARKS}{NEG}{DIFF}{TOPIC}{TITLE}\r\n      // Allow spaces around braces and multiline TEXT\r\n      const headerRe =\r\n        /^\\{\\s*([^}]*)\\s*\\}\\s*\\{\\s*([\\s\\S]*?)\\s*\\}\\s*\\{\\s*([^}]*)\\s*\\}\\s*\\{\\s*([^}]*)\\s*\\}\\s*\\{\\s*([^}]*)\\s*\\}\\s*\\{\\s*([^}]*)\\s*\\}(?:\\s*\\{\\s*([^}]*)\\s*\\})?/;\r\n      const meta = qblock.match(headerRe);\r\n      if (!meta) continue; // skip malformed question\r\n\r\n      const qType = (meta[1] || \"MCQ\").toUpperCase() as \"MCQ\" | \"MSQ\" | \"NAT\";\r\n      const qText = (meta[2] || \"\").trim();\r\n      const marks = Number(meta[3] || 1);\r\n      const neg = Number(meta[4] || 0);\r\n      const diff = (meta[5] || \"easy\").toLowerCase() as \"easy\" | \"medium\" | \"hard\";\r\n      const topic = ((meta[6] || '').trim()) || undefined;\r\n      const title = ((meta[7] || '').trim()) || exam.title; // Use custom title or fallback to exam name\r\n\r\n      const content = qblock.slice(meta[0].length).trim();\r\n\r\n      // Options (optional)\r\n      const options: { text: string; is_correct: boolean }[] = [];\r\n      const optionsMatch = content.match(/\\\\begin{options}([\\s\\S]*?)\\\\end{options}/);\r\n      if (optionsMatch) {\r\n        // Each \\item can be multiline; capture until next \\item or end\r\n        const items: string[] = [];\r\n        const body = optionsMatch[1];\r\n        const itemRe = /\\\\item\\s+([\\s\\S]*?)(?=\\\\item\\s+|$)/g;\r\n        for (const m of body.matchAll(itemRe)) {\r\n          items.push(m[1].trim());\r\n        }\r\n        items.forEach((t) => options.push({ text: t, is_correct: false }));\r\n      }\r\n\r\n      // Answer(s)\r\n      const ansRaw = (content.match(/\\\\answer\\{([^}]*)\\}/)?.[1] || \"\").trim();\r\n      if (ansRaw && (qType === \"MCQ\" || qType === \"MSQ\")) {\r\n        ansRaw.split(\",\").forEach((token) => {\r\n          const a = token.trim();\r\n          let idx = -1;\r\n          if (/^[A-Za-z]$/.test(a)) {\r\n            idx = a.toUpperCase().charCodeAt(0) - 65; // Aâ†’0\r\n          } else if (/^\\d+$/.test(a)) {\r\n            idx = Number(a) - 1; // 1-based â†’ 0-based\r\n          }\r\n          if (idx >= 0 && options[idx]) options[idx].is_correct = true;\r\n        });\r\n      }\r\n\r\n      // Explanation (optional) - simple format, keep as-is for LaTeX math rendering\r\n      const explanation = content.match(/\\\\explanation\\{([\\s\\S]*)\\}$/)?.[1] ?? null;\r\n\r\n      // Final push\r\n      questions.push({\r\n        question_text: qText,\r\n        question_type: qType,\r\n        options: qType === \"NAT\" ? [] : options,\r\n        correct_answer: qType === \"NAT\" ? (ansRaw || null) : null,\r\n        explanation,\r\n        marks,\r\n        negative_marks: neg,\r\n        difficulty: diff,\r\n        topic,\r\n        title\r\n      });\r\n    }\r\n\r\n    exam.sections.push({\r\n      title: section_title,\r\n      section_order,\r\n      questions,\r\n    });\r\n  }\r\n\r\n  return exam;\r\n}\r\n\r\n\r\n// ðŸ”Ž Insert Exam + Sections + Questions into Supabase\r\nexport async function importExamLatex(file: File, adminId: string) {\r\n  const supabase = createClient();\r\n  const exam = await parseExamLatex(file);\r\n\r\n  // Insert exam\r\n  const { data: examRow, error: examErr } = await supabase\r\n    .from(\"exams\")\r\n    .insert({\r\n      admin_id: adminId,\r\n      title: exam.title,\r\n      description: exam.description,\r\n      duration_minutes: exam.duration_minutes,\r\n      total_marks: exam.total_marks,\r\n      negative_marking: exam.negative_marking,\r\n      status: exam.status,\r\n      start_time: exam.start_time,\r\n      end_time: exam.end_time,\r\n    })\r\n    .select(\"id\")\r\n    .single();\r\n  if (examErr) throw examErr;\r\n\r\n  const examId = examRow.id;\r\n\r\n  // Insert sections + questions\r\n  for (const sec of exam.sections) {\r\n    const sectionTotalMarks = sec.questions.reduce((sum, q) => {\r\n      const m = Number.isFinite(q.marks) ? Number(q.marks) : 0;\r\n      return sum + m;\r\n    }, 0);\r\n    const { data: secRow, error: secErr } = await supabase\r\n      .from(\"sections\")\r\n      .insert({\r\n        exam_id: examId,\r\n        title: sec.title,\r\n        duration_minutes: 0, // optional to extend\r\n        total_marks: sectionTotalMarks,\r\n        section_order: sec.section_order,\r\n      })\r\n      .select(\"id\")\r\n      .single();\r\n    if (secErr) throw secErr;\r\n\r\n    const secId = secRow.id;\r\n\r\n    for (const q of sec.questions) {\r\n      // 1ï¸âƒ£ Insert into question_bank\r\n      const { data: qbRow, error: qbErr } = await supabase\r\n        .from(\"question_bank\")\r\n        .insert({\r\n          admin_id: adminId,\r\n          title: q.title,\r\n          question_text: q.question_text,\r\n          question_type: q.question_type,\r\n          marks: q.marks,\r\n          negative_marks: q.negative_marks,\r\n          correct_answer: q.correct_answer,\r\n          explanation: q.explanation,\r\n          subject: sec.title,\r\n          topic: q.topic,\r\n          difficulty: q.difficulty,\r\n        })\r\n        .select(\"id\")\r\n        .single();\r\n      if (qbErr) throw qbErr;\r\n\r\n      const qbId = qbRow.id;\r\n\r\n      if (q.options.length) {\r\n        await supabase.from(\"question_bank_options\").insert(\r\n          q.options.map((o, i) => ({\r\n            question_id: qbId,\r\n            option_text: o.text,\r\n            option_order: i + 1,\r\n            is_correct: o.is_correct,\r\n          }))\r\n        );\r\n      }\r\n\r\n      // 2ï¸âƒ£ Insert into questions\r\n      const { data: qRow, error: qErr } = await supabase\r\n        .from(\"questions\")\r\n        .insert({\r\n          section_id: secId,\r\n          question_text: q.question_text,\r\n          question_type: q.question_type,\r\n          marks: q.marks,\r\n          negative_marks: q.negative_marks,\r\n          correct_answer: q.correct_answer,\r\n          explanation: q.explanation,\r\n        })\r\n        .select(\"id\")\r\n        .single();\r\n      if (qErr) throw qErr;\r\n\r\n      const qId = qRow.id;\r\n\r\n      if (q.options.length) {\r\n        await supabase.from(\"options\").insert(\r\n          q.options.map((o, i) => ({\r\n            question_id: qId,\r\n            option_text: o.text,\r\n            option_order: i + 1,\r\n            is_correct: o.is_correct,\r\n          }))\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  return exam;\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1702, "column": 0}, "map": {"version":3,"sources":["file:///E:/PROJECT%202025%20-%20October/math4code-website/lib/renderWithLatex.tsx"],"sourcesContent":["import { MathJax } from \"better-react-mathjax\";\r\n\r\nexport function renderWithLatex(text: string ) {\r\n  return (\r\n    <MathJax inline dynamic>\r\n      {text}\r\n    </MathJax>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;;AAEO,SAAS,gBAAgB,IAAY;IAC1C,qBACE,6LAAC,2NAAO;QAAC,MAAM;QAAC,OAAO;kBACpB;;;;;;AAGP"}},
    {"offset": {"line": 1728, "column": 0}, "map": {"version":3,"sources":["file:///E:/PROJECT%202025%20-%20October/math4code-website/components/admin/ExplanationRenderer.tsx"],"sourcesContent":["import { renderWithLatex } from \"@/lib/renderWithLatex\";\r\n\r\ninterface ExplanationRendererProps {\r\n    explanation: string | null;\r\n}\r\n\r\nexport function ExplanationRenderer({ explanation }: ExplanationRendererProps) {\r\n    if (!explanation) return null;\r\n\r\n    return (\r\n        <div className=\"explanation-simple\">\r\n            <h4 className=\"font-bold mb-2 text-slate-900 dark:text-white\">Explanation:</h4>\r\n            <div className=\"text-slate-700 dark:text-slate-300 whitespace-pre-line\">\r\n                {renderWithLatex(explanation)}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;;AAMO,SAAS,oBAAoB,EAAE,WAAW,EAA4B;IACzE,IAAI,CAAC,aAAa,OAAO;IAEzB,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAG,WAAU;0BAAgD;;;;;;0BAC9D,6LAAC;gBAAI,WAAU;0BACV,IAAA,6IAAe,EAAC;;;;;;;;;;;;AAIjC;KAXgB"}},
    {"offset": {"line": 1774, "column": 0}, "map": {"version":3,"sources":["file:///E:/PROJECT%202025%20-%20October/math4code-website/components/admin/DeleteConfirmDialog.tsx"],"sourcesContent":["import {\r\n    AlertDialog,\r\n    AlertDialogAction,\r\n    AlertDialogCancel,\r\n    AlertDialogContent,\r\n    AlertDialogDescription,\r\n    AlertDialogFooter,\r\n    AlertDialogHeader,\r\n    AlertDialogTitle,\r\n} from \"@/components/ui/alert-dialog\";\r\n\r\ninterface DeleteConfirmDialogProps {\r\n    open: boolean;\r\n    onOpenChange: (open: boolean) => void;\r\n    onConfirm: () => void;\r\n    title: string;\r\n    description: string;\r\n    itemName?: string;\r\n}\r\n\r\nexport function DeleteConfirmDialog({\r\n    open,\r\n    onOpenChange,\r\n    onConfirm,\r\n    title,\r\n    description,\r\n    itemName,\r\n}: DeleteConfirmDialogProps) {\r\n    return (\r\n        <AlertDialog open={open} onOpenChange={onOpenChange}>\r\n            <AlertDialogContent>\r\n                <AlertDialogHeader>\r\n                    <AlertDialogTitle className=\"text-red-600 dark:text-red-400\">\r\n                        {title}\r\n                    </AlertDialogTitle>\r\n                    <AlertDialogDescription className=\"space-y-2\">\r\n                        <p>{description}</p>\r\n                        {itemName && (\r\n                            <div className=\"mt-3 p-3 bg-slate-100 dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-700\">\r\n                                <p className=\"text-sm font-semibold text-slate-900 dark:text-white\">\r\n                                    {itemName}\r\n                                </p>\r\n                            </div>\r\n                        )}\r\n                        <p className=\"text-sm text-red-600 dark:text-red-400 mt-2\">\r\n                            This action cannot be undone.\r\n                        </p>\r\n                    </AlertDialogDescription>\r\n                </AlertDialogHeader>\r\n                <AlertDialogFooter>\r\n                    <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n                    <AlertDialogAction\r\n                        onClick={onConfirm}\r\n                        className=\"bg-red-600 hover:bg-red-700 text-white\"\r\n                    >\r\n                        Delete\r\n                    </AlertDialogAction>\r\n                </AlertDialogFooter>\r\n            </AlertDialogContent>\r\n        </AlertDialog>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;;AAoBO,SAAS,oBAAoB,EAChC,IAAI,EACJ,YAAY,EACZ,SAAS,EACT,KAAK,EACL,WAAW,EACX,QAAQ,EACe;IACvB,qBACI,6LAAC,sJAAW;QAAC,MAAM;QAAM,cAAc;kBACnC,cAAA,6LAAC,6JAAkB;;8BACf,6LAAC,4JAAiB;;sCACd,6LAAC,2JAAgB;4BAAC,WAAU;sCACvB;;;;;;sCAEL,6LAAC,iKAAsB;4BAAC,WAAU;;8CAC9B,6LAAC;8CAAG;;;;;;gCACH,0BACG,6LAAC;oCAAI,WAAU;8CACX,cAAA,6LAAC;wCAAE,WAAU;kDACR;;;;;;;;;;;8CAIb,6LAAC;oCAAE,WAAU;8CAA8C;;;;;;;;;;;;;;;;;;8BAKnE,6LAAC,4JAAiB;;sCACd,6LAAC,4JAAiB;sCAAC;;;;;;sCACnB,6LAAC,4JAAiB;4BACd,SAAS;4BACT,WAAU;sCACb;;;;;;;;;;;;;;;;;;;;;;;AAOrB;KAzCgB"}},
    {"offset": {"line": 1889, "column": 0}, "map": {"version":3,"sources":["file:///E:/PROJECT%202025%20-%20October/math4code-website/components/admin/QuestionEditor.tsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Check, X, Plus, Trash2 } from \"lucide-react\";\r\n\r\ninterface QuestionEditorProps {\r\n    question: {\r\n        title: string;\r\n        question_text: string;\r\n        question_type: \"MCQ\" | \"MSQ\" | \"NAT\";\r\n        marks: number;\r\n        negative_marks: number;\r\n        topic?: string | null;\r\n        difficulty?: \"easy\" | \"medium\" | \"hard\";\r\n        options: { text: string; is_correct: boolean }[];\r\n        correct_answer?: string | null;\r\n        explanation?: string | null;\r\n    };\r\n    onSave: (updatedQuestion: any) => void;\r\n    onCancel: () => void;\r\n}\r\n\r\nexport function QuestionEditor({ question, onSave, onCancel }: QuestionEditorProps) {\r\n    const [editedQuestion, setEditedQuestion] = useState(question);\r\n\r\n    const handleOptionChange = (index: number, text: string) => {\r\n        const newOptions = [...editedQuestion.options];\r\n        newOptions[index] = { ...newOptions[index], text };\r\n        setEditedQuestion({ ...editedQuestion, options: newOptions });\r\n    };\r\n\r\n    const toggleCorrectAnswer = (index: number) => {\r\n        const newOptions = editedQuestion.options.map((opt, i) => ({\r\n            ...opt,\r\n            is_correct: editedQuestion.question_type === \"MCQ\"\r\n                ? i === index\r\n                : i === index ? !opt.is_correct : opt.is_correct\r\n        }));\r\n        setEditedQuestion({ ...editedQuestion, options: newOptions });\r\n    };\r\n\r\n    const addOption = () => {\r\n        setEditedQuestion({\r\n            ...editedQuestion,\r\n            options: [...editedQuestion.options, { text: \"\", is_correct: false }]\r\n        });\r\n    };\r\n\r\n    const removeOption = (index: number) => {\r\n        setEditedQuestion({\r\n            ...editedQuestion,\r\n            options: editedQuestion.options.filter((_, i) => i !== index)\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div className=\"space-y-4 p-4 bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-300 dark:border-blue-700 rounded-lg\">\r\n            <div className=\"flex items-center justify-between\">\r\n                <h4 className=\"font-semibold text-blue-900 dark:text-blue-300\">Editing Question</h4>\r\n                <div className=\"flex gap-2\">\r\n                    <Button size=\"sm\" onClick={() => onSave(editedQuestion)} className=\"bg-green-600 hover:bg-green-700\">\r\n                        <Check className=\"w-4 h-4 mr-1\" />\r\n                        Save\r\n                    </Button>\r\n                    <Button size=\"sm\" variant=\"outline\" onClick={onCancel}>\r\n                        <X className=\"w-4 h-4 mr-1\" />\r\n                        Cancel\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Title */}\r\n            <div>\r\n                <label className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">Question Title</label>\r\n                <Input\r\n                    value={editedQuestion.title}\r\n                    onChange={(e) => setEditedQuestion({ ...editedQuestion, title: e.target.value })}\r\n                    className=\"mt-1\"\r\n                    placeholder=\"Enter question title...\"\r\n                />\r\n            </div>\r\n\r\n            {/* Question Text */}\r\n            <div>\r\n                <label className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">Question Text</label>\r\n                <Textarea\r\n                    value={editedQuestion.question_text}\r\n                    onChange={(e) => setEditedQuestion({ ...editedQuestion, question_text: e.target.value })}\r\n                    className=\"mt-1 min-h-[100px]\"\r\n                    placeholder=\"Enter question text...\"\r\n                />\r\n            </div>\r\n\r\n            {/* Marks and Settings */}\r\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\r\n                <div>\r\n                    <label className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">Marks</label>\r\n                    <Input\r\n                        type=\"number\"\r\n                        value={editedQuestion.marks}\r\n                        onChange={(e) => setEditedQuestion({ ...editedQuestion, marks: Number(e.target.value) })}\r\n                        className=\"mt-1\"\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <label className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">Negative Marks</label>\r\n                    <Input\r\n                        type=\"number\"\r\n                        step=\"0.25\"\r\n                        value={editedQuestion.negative_marks}\r\n                        onChange={(e) => setEditedQuestion({ ...editedQuestion, negative_marks: Number(e.target.value) })}\r\n                        className=\"mt-1\"\r\n                    />\r\n                </div>\r\n                <div>\r\n                    <label className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">Difficulty</label>\r\n                    <select\r\n                        value={editedQuestion.difficulty || \"easy\"}\r\n                        onChange={(e) => setEditedQuestion({ ...editedQuestion, difficulty: e.target.value as any })}\r\n                        className=\"mt-1 w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 text-sm\"\r\n                    >\r\n                        <option value=\"easy\">Easy</option>\r\n                        <option value=\"medium\">Medium</option>\r\n                        <option value=\"hard\">Hard</option>\r\n                    </select>\r\n                </div>\r\n                <div>\r\n                    <label className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">Topic</label>\r\n                    <Input\r\n                        value={editedQuestion.topic || \"\"}\r\n                        onChange={(e) => setEditedQuestion({ ...editedQuestion, topic: e.target.value })}\r\n                        className=\"mt-1\"\r\n                        placeholder=\"Topic...\"\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Options (for MCQ/MSQ) */}\r\n            {editedQuestion.question_type !== \"NAT\" && (\r\n                <div>\r\n                    <div className=\"flex items-center justify-between mb-2\">\r\n                        <label className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">Options</label>\r\n                        <Button size=\"sm\" variant=\"outline\" onClick={addOption}>\r\n                            <Plus className=\"w-4 h-4 mr-1\" />\r\n                            Add Option\r\n                        </Button>\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                        {editedQuestion.options.map((opt, i) => (\r\n                            <div key={i} className=\"flex items-center gap-2\">\r\n                                <Badge variant=\"outline\" className=\"w-8 h-8 flex items-center justify-center\">\r\n                                    {String.fromCharCode(65 + i)}\r\n                                </Badge>\r\n                                <Input\r\n                                    value={opt.text}\r\n                                    onChange={(e) => handleOptionChange(i, e.target.value)}\r\n                                    className=\"flex-1\"\r\n                                    placeholder={`Option ${String.fromCharCode(65 + i)}`}\r\n                                />\r\n                                <Button\r\n                                    size=\"sm\"\r\n                                    variant={opt.is_correct ? \"default\" : \"outline\"}\r\n                                    onClick={() => toggleCorrectAnswer(i)}\r\n                                    className={opt.is_correct ? \"bg-green-600 hover:bg-green-700\" : \"\"}\r\n                                >\r\n                                    <Check className=\"w-4 h-4\" />\r\n                                </Button>\r\n                                {editedQuestion.options.length > 2 && (\r\n                                    <Button\r\n                                        size=\"sm\"\r\n                                        variant=\"ghost\"\r\n                                        onClick={() => removeOption(i)}\r\n                                        className=\"text-red-600 hover:text-red-700\"\r\n                                    >\r\n                                        <Trash2 className=\"w-4 h-4\" />\r\n                                    </Button>\r\n                                )}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* NAT Answer */}\r\n            {editedQuestion.question_type === \"NAT\" && (\r\n                <div>\r\n                    <label className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">Correct Answer</label>\r\n                    <Input\r\n                        value={editedQuestion.correct_answer || \"\"}\r\n                        onChange={(e) => setEditedQuestion({ ...editedQuestion, correct_answer: e.target.value })}\r\n                        className=\"mt-1\"\r\n                        placeholder=\"Enter numerical answer...\"\r\n                    />\r\n                </div>\r\n            )}\r\n\r\n            {/* Explanation */}\r\n            <div>\r\n                <label className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">Explanation</label>\r\n                <Textarea\r\n                    value={editedQuestion.explanation || \"\"}\r\n                    onChange={(e) => setEditedQuestion({ ...editedQuestion, explanation: e.target.value })}\r\n                    className=\"mt-1 min-h-[100px]\"\r\n                    placeholder=\"Enter explanation (supports LaTeX)...\"\r\n                />\r\n                <p className=\"text-xs text-slate-500 mt-1\">\r\n                    You can use LaTeX math: $x^2$ for inline, $$x^2$$ for display\r\n                </p>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2428, "column": 0}, "map": {"version":3,"sources":["file:///E:/PROJECT%202025%20-%20October/math4code-website/components/ui/progress.tsx"],"sourcesContent":["'use client'\r\n\r\nimport * as React from 'react'\r\nimport * as ProgressPrimitive from '@radix-ui/react-progress'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Progress({\r\n  className,\r\n  value,\r\n  indicatorClassName,\r\n  ...props\r\n}: React.ComponentProps<typeof ProgressPrimitive.Root> & { indicatorClassName?: string }) {\r\n  return (\r\n    <ProgressPrimitive.Root\r\n      data-slot=\"progress\"\r\n      className={cn(\r\n        'bg-primary/20 relative h-2 w-full overflow-hidden rounded-full',\r\n        className,\r\n      )}\r\n      {...props}\r\n    >\r\n      <ProgressPrimitive.Indicator\r\n        data-slot=\"progress-indicator\"\r\n        className={cn(\"bg-primary h-full w-full flex-1 transition-all\", indicatorClassName)}\r\n        style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\r\n      />\r\n    </ProgressPrimitive.Root>\r\n  )\r\n}\r\n\r\nexport { Progress }\r\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,SAAS,EAChB,SAAS,EACT,KAAK,EACL,kBAAkB,EAClB,GAAG,OACmF;IACtF,qBACE,6LAAC,+KAAsB;QACrB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,kEACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,oLAA2B;YAC1B,aAAU;YACV,WAAW,IAAA,qHAAE,EAAC,kDAAkD;YAChE,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;AAIlE;KAtBS"}},
    {"offset": {"line": 2472, "column": 0}, "map": {"version":3,"sources":["file:///E:/PROJECT%202025%20-%20October/math4code-website/app/admin/exams/ImportExam.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useMemo, useState } from \"react\";\r\nimport { createClient } from \"@/lib/supabase/client\";\r\nimport { importExamToSupabase, parseExamWord } from \"@/lib/import/examWord\";\r\nimport { importExamLatex, parseExamLatex } from \"@/lib/import/examLatex\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport { renderWithLatex } from \"@/lib/renderWithLatex\";\r\nimport { ExplanationRenderer } from \"@/components/admin/ExplanationRenderer\";\r\nimport { DeleteConfirmDialog } from \"@/components/admin/DeleteConfirmDialog\";\r\nimport { QuestionEditor } from \"@/components/admin/QuestionEditor\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Progress } from \"@/components/ui/progress\";\r\nimport {\r\n  Upload,\r\n  FileText,\r\n  CheckCircle2,\r\n  AlertCircle,\r\n  X,\r\n  Clock,\r\n  Award,\r\n  FileQuestion,\r\n  Loader2,\r\n  Trash2,\r\n  Edit\r\n} from \"lucide-react\";\r\n\r\ntype PreviewExam = {\r\n  title: string;\r\n  description?: string | null;\r\n  duration_minutes: number;\r\n  total_marks: number;\r\n  negative_marking: number;\r\n  status: \"draft\" | \"published\" | \"archived\";\r\n  start_time?: string | null;\r\n  end_time?: string | null;\r\n  sections: {\r\n    title: string;\r\n    section_order: number;\r\n    questions: {\r\n      title: string; // Question title from LaTeX or auto-generated\r\n      question_text: string;\r\n      question_type: \"MCQ\" | \"MSQ\" | \"NAT\";\r\n      marks: number;\r\n      negative_marks: number;\r\n      topic?: string | null;\r\n      difficulty?: \"easy\" | \"medium\" | \"hard\";\r\n      options: { text: string; is_correct: boolean }[];\r\n      correct_answer?: string | null;\r\n      explanation?: string | null;\r\n    }[];\r\n  }[];\r\n};\r\n\r\nexport default function ImportExam() {\r\n  const supabase = createClient();\r\n  const [adminId, setAdminId] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [progress, setProgress] = useState(0);\r\n  const [fileForImport, setFileForImport] = useState<File | null>(null);\r\n  const [fileKind, setFileKind] = useState<\"word\" | \"latex\" | null>(null);\r\n  const [preview, setPreview] = useState<PreviewExam | null>(null);\r\n  const [showPreview, setShowPreview] = useState(false);\r\n  const [parseError, setParseError] = useState<string | null>(null);\r\n  const [editMode, setEditMode] = useState(false); // NEW: Edit mode toggle\r\n  const [editedExam, setEditedExam] = useState<PreviewExam | null>(null); // NEW: Edited exam data\r\n\r\n  // Delete confirmation dialog state\r\n  const [deleteDialog, setDeleteDialog] = useState<{\r\n    open: boolean;\r\n    type: 'question' | 'section' | null;\r\n    sectionIndex: number;\r\n    questionIndex?: number;\r\n    itemName: string;\r\n  }>({\r\n    open: false,\r\n    type: null,\r\n    sectionIndex: -1,\r\n    questionIndex: undefined,\r\n    itemName: ''\r\n  });\r\n\r\n  // Question editing state\r\n  const [editingQuestion, setEditingQuestion] = useState<{\r\n    sectionIndex: number;\r\n    questionIndex: number;\r\n  } | null>(null);\r\n\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      const { data: { user } } = await supabase.auth.getUser();\r\n      setAdminId(user?.id ?? null);\r\n    })();\r\n  }, [supabase]);\r\n\r\n  const totalQuestions = useMemo(\r\n    () => (editedExam || preview)?.sections.reduce((s, sec) => s + sec.questions.length, 0) ?? 0,\r\n    [preview, editedExam]\r\n  );\r\n\r\n  const handleChooseFile = async (file: File) => {\r\n    setParseError(null);\r\n    setPreview(null);\r\n    setFileForImport(null);\r\n    setFileKind(null);\r\n    if (!file) return;\r\n\r\n    setLoading(true);\r\n    try {\r\n      if (file.name.toLowerCase().endsWith(\".docx\")) {\r\n        const parsed = await parseExamWord(file);\r\n        setPreview(parsed as unknown as PreviewExam);\r\n        setFileForImport(file);\r\n        setFileKind(\"word\");\r\n        setShowPreview(true);\r\n      } else if (file.name.toLowerCase().endsWith(\".tex\")) {\r\n        const parsed = await parseExamLatex(file);\r\n        setPreview(parsed as unknown as PreviewExam);\r\n        setFileForImport(file);\r\n        setFileKind(\"latex\");\r\n        setShowPreview(true);\r\n      } else {\r\n        setParseError(\"Unsupported file type. Please upload .docx or .tex\");\r\n      }\r\n    } catch (e: any) {\r\n      console.error(e);\r\n      setParseError(e?.message ?? \"Failed to parse file.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // NEW: Open delete confirmation dialog for question\r\n  const handleDeleteQuestion = (sectionIndex: number, questionIndex: number) => {\r\n    const currentExam = editedExam || preview;\r\n    if (!currentExam) return;\r\n\r\n    const question = currentExam.sections[sectionIndex]?.questions[questionIndex];\r\n    if (!question) return;\r\n\r\n    setDeleteDialog({\r\n      open: true,\r\n      type: 'question',\r\n      sectionIndex,\r\n      questionIndex,\r\n      itemName: question.title || question.question_text.substring(0, 100)\r\n    });\r\n  };\r\n\r\n  // NEW: Open delete confirmation dialog for section\r\n  const handleDeleteSection = (sectionIndex: number) => {\r\n    const currentExam = editedExam || preview;\r\n    if (!currentExam) return;\r\n\r\n    const section = currentExam.sections[sectionIndex];\r\n    if (!section) return;\r\n\r\n    setDeleteDialog({\r\n      open: true,\r\n      type: 'section',\r\n      sectionIndex,\r\n      itemName: section.title\r\n    });\r\n  };\r\n\r\n  // NEW: Confirm deletion\r\n  const confirmDelete = () => {\r\n    const currentExam = editedExam || preview;\r\n    if (!currentExam) return;\r\n\r\n    if (deleteDialog.type === 'question' && deleteDialog.questionIndex !== undefined) {\r\n      const updatedExam = { ...currentExam };\r\n      updatedExam.sections = updatedExam.sections.map((sec, si) => {\r\n        if (si === deleteDialog.sectionIndex) {\r\n          return {\r\n            ...sec,\r\n            questions: sec.questions.filter((_, qi) => qi !== deleteDialog.questionIndex)\r\n          };\r\n        }\r\n        return sec;\r\n      });\r\n      setEditedExam(updatedExam);\r\n      setEditMode(true);\r\n    } else if (deleteDialog.type === 'section') {\r\n      const updatedExam = {\r\n        ...currentExam,\r\n        sections: currentExam.sections.filter((_, si) => si !== deleteDialog.sectionIndex)\r\n      };\r\n      setEditedExam(updatedExam);\r\n      setEditMode(true);\r\n    }\r\n\r\n    setDeleteDialog({ open: false, type: null, sectionIndex: -1, itemName: '' });\r\n  };\r\n\r\n  // NEW: Save edited question\r\n  const handleSaveQuestion = (sectionIndex: number, questionIndex: number, updatedQuestion: any) => {\r\n    const currentExam = editedExam || preview;\r\n    if (!currentExam) return;\r\n\r\n    const updatedExam = { ...currentExam };\r\n    updatedExam.sections = updatedExam.sections.map((sec, si) => {\r\n      if (si === sectionIndex) {\r\n        return {\r\n          ...sec,\r\n          questions: sec.questions.map((q, qi) => qi === questionIndex ? updatedQuestion : q)\r\n        };\r\n      }\r\n      return sec;\r\n    });\r\n\r\n    setEditedExam(updatedExam);\r\n    setEditMode(true);\r\n    setEditingQuestion(null);\r\n  };\r\n\r\n\r\n  const handleConfirmImport = async () => {\r\n    if (!adminId || !fileForImport || !fileKind) return;\r\n    setLoading(true);\r\n    setProgress(10);\r\n    try {\r\n      const total = totalQuestions || 1;\r\n\r\n      const simulateProgress = setInterval(() => {\r\n        setProgress((p) => Math.min(90, p + 5));\r\n      }, 400);\r\n\r\n      if (fileKind === \"word\") {\r\n        const result = await importExamToSupabase(fileForImport, adminId);\r\n        clearInterval(simulateProgress);\r\n        setProgress(100);\r\n      } else {\r\n        const result = await importExamLatex(fileForImport, adminId);\r\n        clearInterval(simulateProgress);\r\n        setProgress(100);\r\n      }\r\n\r\n      setTimeout(() => {\r\n        setShowPreview(false);\r\n        setPreview(null);\r\n        setFileForImport(null);\r\n        setFileKind(null);\r\n        setProgress(0);\r\n        window.location.reload();\r\n      }, 1000);\r\n    } catch (e: any) {\r\n      console.error(e);\r\n      setParseError(\"Import failed: \" + (e?.message ?? \"Unknown error\"));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Card className=\"border-none shadow-xl bg-white dark:bg-slate-800 overflow-hidden\">\r\n        <div className=\"bg-linear-to-r from-emerald-50 to-green-50 dark:from-emerald-900/20 dark:to-green-900/20 border-b border-emerald-200 dark:border-emerald-800\">\r\n          <CardHeader>\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"p-2 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg\">\r\n                <Upload className=\"w-5 h-5 text-emerald-600 dark:text-emerald-400\" />\r\n              </div>\r\n              <div>\r\n                <CardTitle className=\"text-xl font-bold text-slate-900 dark:text-white\">\r\n                  Import Exam\r\n                </CardTitle>\r\n                <CardDescription className=\"text-slate-600 dark:text-slate-400\">\r\n                  Upload a Word (.docx) or LaTeX (.tex) file to import exams with questions\r\n                </CardDescription>\r\n              </div>\r\n            </div>\r\n          </CardHeader>\r\n        </div>\r\n\r\n        <CardContent className=\"p-6\">\r\n          <div className=\"space-y-4\">\r\n            {/* File Upload Area */}\r\n            <div className=\"relative\">\r\n              <input\r\n                type=\"file\"\r\n                accept=\".docx,.tex\"\r\n                onChange={(e) => {\r\n                  const f = e.target.files?.[0];\r\n                  if (f) handleChooseFile(f);\r\n                }}\r\n                disabled={loading}\r\n                className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer disabled:cursor-not-allowed z-10\"\r\n                id=\"file-upload\"\r\n              />\r\n              <label\r\n                htmlFor=\"file-upload\"\r\n                className={`flex flex-col items-center justify-center w-full h-32 border-2 border-dashed rounded-xl transition-all duration-300 ${loading\r\n                  ? \"border-slate-300 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 cursor-not-allowed\"\r\n                  : \"border-emerald-300 dark:border-emerald-700 bg-emerald-50/50 dark:bg-emerald-900/10 hover:bg-emerald-100 dark:hover:bg-emerald-900/20 cursor-pointer\"\r\n                  }`}\r\n              >\r\n                {loading ? (\r\n                  <div className=\"flex flex-col items-center gap-2\">\r\n                    <Loader2 className=\"w-8 h-8 text-emerald-600 dark:text-emerald-400 animate-spin\" />\r\n                    <p className=\"text-sm font-medium text-slate-600 dark:text-slate-400\">\r\n                      Processing file...\r\n                    </p>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"flex flex-col items-center gap-2\">\r\n                    <Upload className=\"w-8 h-8 text-emerald-600 dark:text-emerald-400\" />\r\n                    <p className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">\r\n                      Click to upload or drag and drop\r\n                    </p>\r\n                    <p className=\"text-xs text-slate-500 dark:text-slate-500\">\r\n                      Supports .docx and .tex files\r\n                    </p>\r\n                  </div>\r\n                )}\r\n              </label>\r\n            </div>\r\n\r\n            {/* Error Message */}\r\n            {parseError && (\r\n              <motion.div\r\n                initial={{ opacity: 0, y: -10 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                className=\"flex items-center gap-2 p-3 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400\"\r\n              >\r\n                <AlertCircle className=\"w-4 h-4 shrink-0\" />\r\n                <p className=\"text-sm font-medium\">{parseError}</p>\r\n              </motion.div>\r\n            )}\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Preview Modal */}\r\n      <AnimatePresence>\r\n        {showPreview && preview && (\r\n          <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            className=\"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4\"\r\n            onClick={() => !loading && setShowPreview(false)}\r\n          >\r\n            <motion.div\r\n              initial={{ scale: 0.95, opacity: 0 }}\r\n              animate={{ scale: 1, opacity: 1 }}\r\n              exit={{ scale: 0.95, opacity: 0 }}\r\n              transition={{ type: \"spring\", stiffness: 300, damping: 30 }}\r\n              className=\"bg-white dark:bg-slate-900 w-full max-w-5xl rounded-2xl shadow-2xl overflow-hidden\"\r\n              onClick={(e) => e.stopPropagation()}\r\n            >\r\n              {/* Header */}\r\n              <div className=\"bg-linear-to-r from-emerald-600 to-green-600 p-6 text-white\">\r\n                <div className=\"flex items-start justify-between\">\r\n                  <div className=\"flex-1\">\r\n                    <h2 className=\"text-2xl font-bold mb-2\">{preview.title}</h2>\r\n                    {preview.description && (\r\n                      <p className=\"text-emerald-100 text-sm\">{preview.description}</p>\r\n                    )}\r\n                    <div className=\"flex flex-wrap items-center gap-3 mt-4\">\r\n                      <Badge className=\"bg-white/20 text-white border-0\">\r\n                        <Clock className=\"w-3 h-3 mr-1\" />\r\n                        {preview.duration_minutes} min\r\n                      </Badge>\r\n                      <Badge className=\"bg-white/20 text-white border-0\">\r\n                        <Award className=\"w-3 h-3 mr-1\" />\r\n                        {preview.total_marks} marks\r\n                      </Badge>\r\n                      <Badge className=\"bg-white/20 text-white border-0\">\r\n                        <FileQuestion className=\"w-3 h-3 mr-1\" />\r\n                        {totalQuestions} questions\r\n                      </Badge>\r\n                      <Badge className=\"bg-white/20 text-white border-0\">\r\n                        Status: {preview.status}\r\n                      </Badge>\r\n                      {editMode && (\r\n                        <Badge className=\"bg-yellow-500/90 text-white border-0 animate-pulse\">\r\n                          <Edit className=\"w-3 h-3 mr-1\" />\r\n                          Modified\r\n                        </Badge>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    onClick={() => setShowPreview(false)}\r\n                    disabled={loading}\r\n                    className=\"text-white hover:bg-white/20\"\r\n                  >\r\n                    <X className=\"w-5 h-5\" />\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Content */}\r\n              <div className=\"p-6 max-h-[60vh] overflow-y-auto\">\r\n                <div className=\"space-y-4\">\r\n                  {(editedExam || preview)!.sections.map((sec, idx) => {\r\n                    const secTotal = sec.questions.reduce((s, q) => s + (q.marks || 0), 0);\r\n                    return (\r\n                      <div key={idx} className=\"border border-slate-200 dark:border-slate-700 rounded-xl p-5 bg-slate-50 dark:bg-slate-800\">\r\n                        <div className=\"flex items-center justify-between mb-4\">\r\n                          <h3 className=\"font-bold text-lg text-slate-900 dark:text-white\">\r\n                            {sec.section_order}. {sec.title}\r\n                          </h3>\r\n                          <div className=\"flex items-center gap-3\">\r\n                            <Badge variant=\"outline\">{sec.questions.length} questions</Badge>\r\n                            <Badge variant=\"outline\">{secTotal} marks</Badge>\r\n                            {/* Delete Section Button */}\r\n                            <Button\r\n                              variant=\"ghost\"\r\n                              size=\"sm\"\r\n                              onClick={() => handleDeleteSection(idx)}\r\n                              className=\"text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20\"\r\n                              disabled={loading}\r\n                            >\r\n                              <Trash2 className=\"w-4 h-4\" />\r\n                            </Button>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"space-y-3 max-h-[400px] overflow-y-auto\">\r\n                          {sec.questions.map((q, qi) => {\r\n                            const isEditing = editingQuestion?.sectionIndex === idx && editingQuestion?.questionIndex === qi;\r\n\r\n                            return (\r\n                              <div key={qi} className=\"p-4 rounded-lg bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 relative\">\r\n                                {/* Action Buttons */}\r\n                                {!isEditing && (\r\n                                  <div className=\"absolute top-2 right-2 flex gap-1\">\r\n                                    <Button\r\n                                      variant=\"ghost\"\r\n                                      size=\"sm\"\r\n                                      onClick={() => setEditingQuestion({ sectionIndex: idx, questionIndex: qi })}\r\n                                      className=\"text-blue-600 hover:text-blue-700 hover:bg-blue-50 dark:hover:bg-blue-900/20\"\r\n                                      disabled={loading}\r\n                                    >\r\n                                      <Edit className=\"w-4 h-4\" />\r\n                                    </Button>\r\n                                    <Button\r\n                                      variant=\"ghost\"\r\n                                      size=\"sm\"\r\n                                      onClick={() => handleDeleteQuestion(idx, qi)}\r\n                                      className=\"text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20\"\r\n                                      disabled={loading}\r\n                                    >\r\n                                      <Trash2 className=\"w-4 h-4\" />\r\n                                    </Button>\r\n                                  </div>\r\n                                )}\r\n\r\n                                {/* Question Editor or Display */}\r\n                                {isEditing ? (\r\n                                  <QuestionEditor\r\n                                    question={q}\r\n                                    onSave={(updated) => handleSaveQuestion(idx, qi, updated)}\r\n                                    onCancel={() => setEditingQuestion(null)}\r\n                                  />\r\n                                ) : (\r\n                                  <>\r\n                                    {/* Question Title */}\r\n                                    {q.title && (\r\n                                      <div className=\"mb-2 pb-2 border-b border-slate-200 dark:border-slate-700 pr-20\">\r\n                                        <h5 className=\"text-sm font-semibold text-emerald-700 dark:text-emerald-400\">\r\n                                          {q.title}\r\n                                        </h5>\r\n                                      </div>\r\n                                    )}\r\n\r\n                                    <div className=\"flex items-center gap-2 mb-2\">\r\n                                      <Badge className=\"bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400\">\r\n                                        {q.question_type}\r\n                                      </Badge>\r\n                                      <span className=\"text-xs text-slate-500 dark:text-slate-400\">\r\n                                        {q.marks} marks â€¢ -{q.negative_marks} â€¢ {q.difficulty}\r\n                                      </span>\r\n                                      {q.topic && (\r\n                                        <Badge variant=\"outline\" className=\"text-xs\">\r\n                                          {q.topic}\r\n                                        </Badge>\r\n                                      )}\r\n                                    </div>\r\n\r\n                                    <div className=\"text-sm text-slate-700 dark:text-slate-300 mb-3\">\r\n                                      {renderWithLatex(q.question_text)}\r\n                                    </div>\r\n\r\n                                    {q.question_type !== \"NAT\" && q.options?.length > 0 && (\r\n                                      <div className=\"grid grid-cols-1 gap-2 mb-3\">\r\n                                        {q.options.map((op, oi) => (\r\n                                          <div\r\n                                            key={oi}\r\n                                            className={`flex items-center gap-2 p-2 rounded-md text-sm ${op.is_correct\r\n                                              ? \"bg-green-50 dark:bg-green-900/20 border border-green-300 dark:border-green-800\"\r\n                                              : \"bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700\"\r\n                                              }`}\r\n                                          >\r\n                                            <span className=\"font-semibold text-slate-600 dark:text-slate-400\">\r\n                                              {String.fromCharCode(65 + oi)}.\r\n                                            </span>\r\n                                            <span className=\"flex-1\">{renderWithLatex(op.text)}</span>\r\n                                            {op.is_correct && (\r\n                                              <CheckCircle2 className=\"w-4 h-4 text-green-600 dark:text-green-400\" />\r\n                                            )}\r\n                                          </div>\r\n                                        ))}\r\n                                      </div>\r\n                                    )}\r\n\r\n                                    {/* Explanation using ExplanationRenderer */}\r\n                                    {q.explanation && (\r\n                                      <div className=\"mt-3 pt-3 border-t border-slate-200 dark:border-slate-700\">\r\n                                        <ExplanationRenderer explanation={q.explanation} />\r\n                                      </div>\r\n                                    )}\r\n                                  </>\r\n                                )}\r\n                              </div>\r\n                            );\r\n                          })}\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Footer */}\r\n              <div className=\"border-t border-slate-200 dark:border-slate-700 p-6 bg-slate-50 dark:bg-slate-900/50\">\r\n                {loading && (\r\n                  <div className=\"mb-4\">\r\n                    <div className=\"flex items-center justify-between mb-2\">\r\n                      <span className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">\r\n                        Importing exam...\r\n                      </span>\r\n                      <span className=\"text-sm text-slate-500 dark:text-slate-400\">\r\n                        {progress}%\r\n                      </span>\r\n                    </div>\r\n                    <Progress value={progress} className=\"h-2\" />\r\n                  </div>\r\n                )}\r\n                <div className=\"flex justify-end gap-3\">\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    onClick={() => setShowPreview(false)}\r\n                    disabled={loading}\r\n                  >\r\n                    Cancel\r\n                  </Button>\r\n                  <Button\r\n                    onClick={handleConfirmImport}\r\n                    disabled={loading || !adminId}\r\n                    className=\"bg-linear-to-r from-emerald-600 to-green-600 hover:from-emerald-700 hover:to-green-700 text-white\"\r\n                  >\r\n                    {loading ? (\r\n                      <>\r\n                        <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\r\n                        Importing...\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <CheckCircle2 className=\"w-4 h-4 mr-2\" />\r\n                        Confirm & Import\r\n                      </>\r\n                    )}\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </motion.div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {/* Delete Confirmation Dialog */}\r\n      <DeleteConfirmDialog\r\n        open={deleteDialog.open}\r\n        onOpenChange={(open) => setDeleteDialog({ ...deleteDialog, open })}\r\n        onConfirm={confirmDelete}\r\n        title={deleteDialog.type === 'question' ? 'Delete Question?' : 'Delete Section?'}\r\n        description={\r\n          deleteDialog.type === 'question'\r\n            ? 'Are you sure you want to delete this question? This will remove it from the preview.'\r\n            : 'Are you sure you want to delete this entire section? This will remove all questions in this section.'\r\n        }\r\n        itemName={deleteDialog.itemName}\r\n      />\r\n    </>\r\n\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3539, "column": 0}, "map": {"version":3,"sources":["file:///E:/PROJECT%202025%20-%20October/math4code-website/app/admin/exams/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { Suspense } from \"react\";\r\nimport ExamsTable from \"./components/ExamsTable\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport Link from \"next/link\";\r\nimport ExamsTableSkeleton from \"./components/ExamsTableSkeleton\";\r\nimport ImportExam from \"./ImportExam\";\r\nimport { motion } from \"framer-motion\";\r\nimport { Plus, FileText, TrendingUp } from \"lucide-react\";\r\nimport useExams from \"@/hooks/admin/exams/useExams\";\r\n\r\nfunction ExamsHeader() {\r\n  const { data: exams } = useExams();\r\n\r\n  const stats = {\r\n    total: exams?.length || 0,\r\n    published: exams?.filter((e: any) => e.status === \"published\").length || 0,\r\n    draft: exams?.filter((e: any) => e.status === \"draft\").length || 0,\r\n  };\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, y: -20 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      className=\"relative overflow-hidden rounded-2xl bg-linear-to-br from-indigo-600 via-purple-600 to-pink-600 p-8 text-white shadow-2xl\"\r\n    >\r\n      {/* Decorative elements */}\r\n      <div className=\"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2\" />\r\n      <div className=\"absolute bottom-0 left-0 w-48 h-48 bg-white/10 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2\" />\r\n\r\n      <div className=\"relative flex items-center justify-between\">\r\n        <div className=\"flex-1\">\r\n          <div className=\"flex items-center gap-3 mb-3\">\r\n            <div className=\"p-3 bg-white/20 backdrop-blur-sm rounded-xl\">\r\n              <FileText className=\"w-8 h-8\" />\r\n            </div>\r\n            <div>\r\n              <h1 className=\"text-4xl font-bold\">Exams</h1>\r\n              <p className=\"text-indigo-100 mt-1\">\r\n                Create, manage, and track your test series\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <Link href=\"/admin/exams/create\">\r\n          <Button\r\n            size=\"lg\"\r\n            className=\"bg-white text-indigo-600 hover:bg-indigo-50 shadow-lg hover:shadow-xl transition-all duration-300\"\r\n          >\r\n            <Plus className=\"w-5 h-5 mr-2\" />\r\n            Create New Exam\r\n          </Button>\r\n        </Link>\r\n      </div>\r\n\r\n      {/* Stats Preview */}\r\n      <motion.div\r\n        initial={{ opacity: 0, y: 20 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        transition={{ delay: 0.2 }}\r\n        className=\"relative mt-6 grid grid-cols-3 gap-4\"\r\n      >\r\n        <div className=\"p-4 bg-white/10 backdrop-blur-sm rounded-xl border border-white/20\">\r\n          <div className=\"flex items-center gap-2 mb-1\">\r\n            <TrendingUp className=\"w-4 h-4 text-green-300\" />\r\n            <p className=\"text-sm text-indigo-100\">Total Exams</p>\r\n          </div>\r\n          <p className=\"text-2xl font-bold\">{stats.total}</p>\r\n        </div>\r\n        <div className=\"p-4 bg-white/10 backdrop-blur-sm rounded-xl border border-white/20\">\r\n          <p className=\"text-sm text-indigo-100 mb-1\">Published</p>\r\n          <p className=\"text-2xl font-bold\">{stats.published}</p>\r\n        </div>\r\n        <div className=\"p-4 bg-white/10 backdrop-blur-sm rounded-xl border border-white/20\">\r\n          <p className=\"text-sm text-indigo-100 mb-1\">Drafts</p>\r\n          <p className=\"text-2xl font-bold\">{stats.draft}</p>\r\n        </div>\r\n      </motion.div>\r\n    </motion.div>\r\n  );\r\n}\r\n\r\nexport default function ExamsPage() {\r\n  return (\r\n    <div className=\"space-y-8 p-2 md:p-1\">\r\n      {/* Premium Header */}\r\n      <ExamsHeader />\r\n\r\n      {/* Import Section */}\r\n      <motion.div\r\n        initial={{ opacity: 0, y: 20 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        transition={{ delay: 0.3 }}\r\n      >\r\n        <ImportExam />\r\n      </motion.div>\r\n\r\n      {/* Exams Table */}\r\n      <motion.div\r\n        initial={{ opacity: 0, y: 20 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        transition={{ delay: 0.4 }}\r\n      >\r\n        <Suspense fallback={<ExamsTableSkeleton />}>\r\n          <ExamsTable />\r\n        </Suspense>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;;;AAVA;;;;;;;;;;AAYA,SAAS;;IACP,MAAM,EAAE,MAAM,KAAK,EAAE,GAAG,IAAA,iJAAQ;IAEhC,MAAM,QAAQ;QACZ,OAAO,OAAO,UAAU;QACxB,WAAW,OAAO,OAAO,CAAC,IAAW,EAAE,MAAM,KAAK,aAAa,UAAU;QACzE,OAAO,OAAO,OAAO,CAAC,IAAW,EAAE,MAAM,KAAK,SAAS,UAAU;IACnE;IACA,qBACE,6LAAC,uMAAM,CAAC,GAAG;QACT,SAAS;YAAE,SAAS;YAAG,GAAG,CAAC;QAAG;QAC9B,SAAS;YAAE,SAAS;YAAG,GAAG;QAAE;QAC5B,WAAU;;0BAGV,6LAAC;gBAAI,WAAU;;;;;;0BACf,6LAAC;gBAAI,WAAU;;;;;;0BAEf,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAI,WAAU;8CACb,cAAA,6LAAC,6NAAQ;wCAAC,WAAU;;;;;;;;;;;8CAEtB,6LAAC;;sDACC,6LAAC;4CAAG,WAAU;sDAAqB;;;;;;sDACnC,6LAAC;4CAAE,WAAU;sDAAuB;;;;;;;;;;;;;;;;;;;;;;;kCAO1C,6LAAC,0KAAI;wBAAC,MAAK;kCACT,cAAA,6LAAC,wIAAM;4BACL,MAAK;4BACL,WAAU;;8CAEV,6LAAC,6MAAI;oCAAC,WAAU;;;;;;gCAAiB;;;;;;;;;;;;;;;;;;0BAOvC,6LAAC,uMAAM,CAAC,GAAG;gBACT,SAAS;oBAAE,SAAS;oBAAG,GAAG;gBAAG;gBAC7B,SAAS;oBAAE,SAAS;oBAAG,GAAG;gBAAE;gBAC5B,YAAY;oBAAE,OAAO;gBAAI;gBACzB,WAAU;;kCAEV,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACb,6LAAC,mOAAU;wCAAC,WAAU;;;;;;kDACtB,6LAAC;wCAAE,WAAU;kDAA0B;;;;;;;;;;;;0CAEzC,6LAAC;gCAAE,WAAU;0CAAsB,MAAM,KAAK;;;;;;;;;;;;kCAEhD,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAE,WAAU;0CAA+B;;;;;;0CAC5C,6LAAC;gCAAE,WAAU;0CAAsB,MAAM,SAAS;;;;;;;;;;;;kCAEpD,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAE,WAAU;0CAA+B;;;;;;0CAC5C,6LAAC;gCAAE,WAAU;0CAAsB,MAAM,KAAK;;;;;;;;;;;;;;;;;;;;;;;;AAKxD;GArES;;QACiB,iJAAQ;;;KADzB;AAuEM,SAAS;IACtB,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC;;;;;0BAGD,6LAAC,uMAAM,CAAC,GAAG;gBACT,SAAS;oBAAE,SAAS;oBAAG,GAAG;gBAAG;gBAC7B,SAAS;oBAAE,SAAS;oBAAG,GAAG;gBAAE;gBAC5B,YAAY;oBAAE,OAAO;gBAAI;0BAEzB,cAAA,6LAAC,kJAAU;;;;;;;;;;0BAIb,6LAAC,uMAAM,CAAC,GAAG;gBACT,SAAS;oBAAE,SAAS;oBAAG,GAAG;gBAAG;gBAC7B,SAAS;oBAAE,SAAS;oBAAG,GAAG;gBAAE;gBAC5B,YAAY;oBAAE,OAAO;gBAAI;0BAEzB,cAAA,6LAAC,yKAAQ;oBAAC,wBAAU,6LAAC,wKAAkB;;;;;8BACrC,cAAA,6LAAC,gKAAU;;;;;;;;;;;;;;;;;;;;;AAKrB;MA3BwB"}}]
}
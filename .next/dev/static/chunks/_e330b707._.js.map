{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/PROJECT%202025%20-%20October/math4code-website/hooks/useExamResult.ts"],"sourcesContent":["\"use client\"\r\nimport { useQuery } from \"@tanstack/react-query\"\r\nimport { createClient } from \"@/lib/supabase/client\"\r\n\r\nexport async function fetchExamResult(attemptId: string) {\r\n  const supabase = createClient()\r\n\r\n  try {\r\n    // 1. Fetch attempt info\r\n    const { data: attempt, error: attemptError } = await supabase\r\n      .from(\"exam_attempts\")\r\n      .select(\"*, exams(title, id, result_visibility, result_release_time, show_answers)\")\r\n      .eq(\"id\", attemptId)\r\n      .single()\r\n\r\n    if (attemptError) {\r\n      throw attemptError\r\n    }\r\n    if (!attempt) throw new Error(\"Attempt not found\")\r\n\r\n    const examId = attempt.exam_id\r\n\r\n    // Auto-cleanup expired responses (calls database function)\r\n    // This runs in background and doesn't block the query\r\n    const { cleanupAttemptResponses } = await import('@/lib/responseCleanup');\r\n    cleanupAttemptResponses(attemptId).catch(err => {\r\n      console.warn('Background cleanup failed:', err);\r\n    });\r\n\r\n    // 2. Fetch all responses for this attempt\r\n    const { data: responses, error: responsesError } = await supabase\r\n      .from(\"responses\")\r\n      .select(\"*\")\r\n      .eq(\"attempt_id\", attemptId)\r\n\r\n    if (responsesError) {\r\n      throw responsesError\r\n    }\r\n\r\n    const responseMap: Record<string, any> = {}\r\n    responses?.forEach((r: any) => {\r\n      if (!r.student_answer) {\r\n        // No answer provided\r\n        return;\r\n      }\r\n\r\n      try {\r\n        // Try to parse as JSON first (for arrays and objects)\r\n        const parsed = JSON.parse(r.student_answer)\r\n        responseMap[r.question_id] = parsed\r\n      } catch {\r\n        // If parsing fails, use the raw value (for strings/numbers)\r\n        // Remove quotes if it's a quoted string\r\n        let value = r.student_answer\r\n        if (typeof value === 'string') {\r\n          // Remove surrounding quotes if present\r\n          value = value.replace(/^[\"']|[\"']$/g, '')\r\n        }\r\n        responseMap[r.question_id] = value\r\n      }\r\n    })\r\n\r\n    // 3. Fetch ALL sections for this exam\r\n    const { data: sections, error: sectionsError } = await supabase\r\n      .from(\"sections\")\r\n      .select(\"*\")\r\n      .eq(\"exam_id\", examId)\r\n      .order(\"section_order\")\r\n\r\n    if (sectionsError) {\r\n      throw sectionsError\r\n    }\r\n    if (!sections?.length) throw new Error(\"Sections not found\")\r\n\r\n    // 4. Fetch ALL questions for these sections\r\n    const sectionIds = sections.map((s) => s.id)\r\n    const { data: questions, error: questionsError } = await supabase\r\n      .from(\"questions\")\r\n      .select(\"*, options(*)\")\r\n      .in(\"section_id\", sectionIds)\r\n\r\n    if (questionsError) {\r\n      throw questionsError\r\n    }\r\n    if (!questions?.length) throw new Error(\"Questions not found\")\r\n\r\n    // 5. Fetch result summary\r\n    const { data: resultSummary, error: resultError } = await supabase\r\n      .from(\"results\")\r\n      .select(\"*\")\r\n      .eq(\"attempt_id\", attemptId)\r\n      .single()\r\n\r\n    if (resultError && resultError.code !== 'PGRST116') {\r\n      // Silently ignore - result may not exist yet\r\n    }\r\n\r\n    // 6. Fetch section results\r\n    let sectionResults: any[] = []\r\n    if (resultSummary) {\r\n      const { data: secResults, error: secError } = await supabase\r\n        .from(\"section_results\")\r\n        .select(\"*\")\r\n        .eq(\"result_id\", resultSummary.id)\r\n\r\n      if (secResults) sectionResults = secResults\r\n    }\r\n\r\n    // 7. Structure the data by sections\r\n    const structured = sections.map((s) => ({\r\n      ...s,\r\n      questions: questions.filter((q) => q.section_id === s.id),\r\n      result: sectionResults.find(sr => sr.section_id === s.id)\r\n    }))\r\n\r\n    return { attempt, responseMap, structured, result: resultSummary }\r\n  } catch (error) {\r\n    throw error\r\n  }\r\n}\r\n\r\nexport function useExamResult(attemptId: string) {\r\n  return useQuery({\r\n    queryKey: [\"exam-result\", attemptId],\r\n    queryFn: () => fetchExamResult(attemptId),\r\n    enabled: !!attemptId,\r\n    staleTime: 1000 * 60 * 2,\r\n    retry: 1,\r\n  })\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 125, "column": 0}, "map": {"version":3,"sources":["file:///E:/PROJECT%202025%20-%20October/math4code-website/components/skeletons/ExamResultSkeleton.tsx"],"sourcesContent":["\"use client\"\r\nimport React from \"react\"\r\n\r\nexport default function ExamResultSkeleton() {\r\n  return (\r\n    <div className=\"p-4 md:p-8 space-y-6 min-h-screen animate-pulse\">\r\n      {/* Header */}\r\n      <div className=\"flex flex-col md:flex-row justify-between gap-4\">\r\n        <div className=\"space-y-2\">\r\n          <div className=\"h-6 w-56 bg-slate-200 dark:bg-slate-700 rounded\"></div>\r\n          <div className=\"h-4 w-80 bg-slate-200 dark:bg-slate-700 rounded\"></div>\r\n        </div>\r\n        <div className=\"flex flex-wrap gap-4\">\r\n          <div className=\"w-28 h-20 bg-slate-200 dark:bg-slate-700 rounded-xl\"></div>\r\n          <div className=\"w-28 h-20 bg-slate-200 dark:bg-slate-700 rounded-xl\"></div>\r\n          <div className=\"w-24 h-10 bg-slate-200 dark:bg-slate-700 rounded-lg\"></div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Progress Bar */}\r\n      <div className=\"w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-full\"></div>\r\n\r\n      {/* Section Blocks */}\r\n      {[...Array(3)].map((_, s) => (\r\n        <div key={s} className=\"space-y-3\">\r\n          <div className=\"h-5 w-40 bg-slate-200 dark:bg-slate-700 rounded\"></div>\r\n          {[...Array(3)].map((_, i) => (\r\n            <div\r\n              key={i}\r\n              className=\"rounded-2xl bg-slate-100 dark:bg-slate-800/60 border border-slate-200 dark:border-slate-700 p-4 space-y-3\"\r\n            >\r\n              <div className=\"h-5 w-3/4 bg-slate-200 dark:bg-slate-700 rounded\"></div>\r\n              <div className=\"space-y-2\">\r\n                {[...Array(4)].map((_, j) => (\r\n                  <div\r\n                    key={j}\r\n                    className=\"h-4 w-full bg-slate-200 dark:bg-slate-700 rounded\"\r\n                  ></div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;AAGe,SAAS;IACtB,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;;;;;0CACf,6LAAC;gCAAI,WAAU;;;;;;;;;;;;kCAEjB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;;;;;0CACf,6LAAC;gCAAI,WAAU;;;;;;0CACf,6LAAC;gCAAI,WAAU;;;;;;;;;;;;;;;;;;0BAKnB,6LAAC;gBAAI,WAAU;;;;;;YAGd;mBAAI,MAAM;aAAG,CAAC,GAAG,CAAC,CAAC,GAAG,kBACrB,6LAAC;oBAAY,WAAU;;sCACrB,6LAAC;4BAAI,WAAU;;;;;;wBACd;+BAAI,MAAM;yBAAG,CAAC,GAAG,CAAC,CAAC,GAAG,kBACrB,6LAAC;gCAEC,WAAU;;kDAEV,6LAAC;wCAAI,WAAU;;;;;;kDACf,6LAAC;wCAAI,WAAU;kDACZ;+CAAI,MAAM;yCAAG,CAAC,GAAG,CAAC,CAAC,GAAG,kBACrB,6LAAC;gDAEC,WAAU;+CADL;;;;;;;;;;;+BAPN;;;;;;mBAJD;;;;;;;;;;;AAsBlB;KA3CwB"}},
    {"offset": {"line": 274, "column": 0}, "map": {"version":3,"sources":["file:///E:/PROJECT%202025%20-%20October/math4code-website/lib/renderWithLatex.tsx"],"sourcesContent":["import { MathJax } from \"better-react-mathjax\";\r\n\r\nexport function renderWithLatex(text: string ) {\r\n  return (\r\n    <MathJax inline dynamic>\r\n      {text}\r\n    </MathJax>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;;AAEO,SAAS,gBAAgB,IAAY;IAC1C,qBACE,6LAAC,2NAAO;QAAC,MAAM;QAAC,OAAO;kBACpB;;;;;;AAGP"}},
    {"offset": {"line": 300, "column": 0}, "map": {"version":3,"sources":["file:///E:/PROJECT%202025%20-%20October/math4code-website/components/ui/alert.tsx"],"sourcesContent":["import * as React from 'react'\r\nimport { cva, type VariantProps } from 'class-variance-authority'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nconst alertVariants = cva(\r\n  'relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current',\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: 'bg-card text-card-foreground',\r\n        destructive:\r\n          'text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90',\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: 'default',\r\n    },\r\n  },\r\n)\r\n\r\nfunction Alert({\r\n  className,\r\n  variant,\r\n  ...props\r\n}: React.ComponentProps<'div'> & VariantProps<typeof alertVariants>) {\r\n  return (\r\n    <div\r\n      data-slot=\"alert\"\r\n      role=\"alert\"\r\n      className={cn(alertVariants({ variant }), className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction AlertTitle({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"alert-title\"\r\n      className={cn(\r\n        'col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction AlertDescription({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"alert-description\"\r\n      className={cn(\r\n        'text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Alert, AlertTitle, AlertDescription }\r\n"],"names":[],"mappings":";;;;;;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,IAAA,0KAAG,EACvB,qOACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,GAAG,OAC8D;IACjE,qBACE,6LAAC;QACC,aAAU;QACV,MAAK;QACL,WAAW,IAAA,qHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf;KAbS;AAeT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,+DACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,iBAAiB,EACxB,SAAS,EACT,GAAG,OACyB;IAC5B,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,kGACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS"}},
    {"offset": {"line": 376, "column": 0}, "map": {"version":3,"sources":["file:///E:/PROJECT%202025%20-%20October/math4code-website/lib/responseCleanup.ts"],"sourcesContent":["import { createClient } from '@/lib/supabase/client';\r\n\r\n/**\r\n * Check if responses are expired (older than 30 days)\r\n */\r\nexport function isResponseExpired(submittedAt: string | Date): boolean {\r\n    const submittedDate = new Date(submittedAt);\r\n    const now = new Date();\r\n    const daysDiff = Math.floor((now.getTime() - submittedDate.getTime()) / (1000 * 60 * 60 * 24));\r\n    return daysDiff >= 30;\r\n}\r\n\r\n/**\r\n * Get days remaining until responses expire\r\n */\r\nexport function getDaysUntilExpiry(submittedAt: string | Date): number {\r\n    const submittedDate = new Date(submittedAt);\r\n    const now = new Date();\r\n    const daysDiff = Math.floor((now.getTime() - submittedDate.getTime()) / (1000 * 60 * 60 * 24));\r\n    return Math.max(0, 30 - daysDiff);\r\n}\r\n\r\n/**\r\n * Cleanup expired responses for a specific attempt using database function\r\n * This is called when user views exam results\r\n */\r\nexport async function cleanupAttemptResponses(attemptId: string) {\r\n    const supabase = createClient();\r\n\r\n    try {\r\n        const { data, error } = await supabase.rpc('cleanup_attempt_responses', {\r\n            p_attempt_id: attemptId\r\n        });\r\n\r\n        if (error) {\r\n            console.error('Error cleaning up responses:', error);\r\n            return { success: false, error: error.message };\r\n        }\r\n\r\n        return {\r\n            success: true,\r\n            deleted: data?.[0]?.deleted || false,\r\n            daysOld: data?.[0]?.days_old || 0\r\n        };\r\n    } catch (error: any) {\r\n        console.error('Error cleaning up responses:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n\r\n/**\r\n * Cleanup all expired responses (admin function)\r\n * Can be called manually or periodically\r\n */\r\nexport async function cleanupAllExpiredResponses() {\r\n    const supabase = createClient();\r\n\r\n    try {\r\n        const { data, error } = await supabase.rpc('cleanup_expired_responses');\r\n\r\n        if (error) {\r\n            console.error('Error cleaning up all responses:', error);\r\n            return { success: false, error: error.message };\r\n        }\r\n\r\n        return {\r\n            success: true,\r\n            deletedCount: data?.[0]?.deleted_count || 0\r\n        };\r\n    } catch (error: any) {\r\n        console.error('Error cleaning up all responses:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAKO,SAAS,kBAAkB,WAA0B;IACxD,MAAM,gBAAgB,IAAI,KAAK;IAC/B,MAAM,MAAM,IAAI;IAChB,MAAM,WAAW,KAAK,KAAK,CAAC,CAAC,IAAI,OAAO,KAAK,cAAc,OAAO,EAAE,IAAI,CAAC,OAAO,KAAK,KAAK,EAAE;IAC5F,OAAO,YAAY;AACvB;AAKO,SAAS,mBAAmB,WAA0B;IACzD,MAAM,gBAAgB,IAAI,KAAK;IAC/B,MAAM,MAAM,IAAI;IAChB,MAAM,WAAW,KAAK,KAAK,CAAC,CAAC,IAAI,OAAO,KAAK,cAAc,OAAO,EAAE,IAAI,CAAC,OAAO,KAAK,KAAK,EAAE;IAC5F,OAAO,KAAK,GAAG,CAAC,GAAG,KAAK;AAC5B;AAMO,eAAe,wBAAwB,SAAiB;IAC3D,MAAM,WAAW,IAAA,4IAAY;IAE7B,IAAI;QACA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,GAAG,CAAC,6BAA6B;YACpE,cAAc;QAClB;QAEA,IAAI,OAAO;YACP,QAAQ,KAAK,CAAC,gCAAgC;YAC9C,OAAO;gBAAE,SAAS;gBAAO,OAAO,MAAM,OAAO;YAAC;QAClD;QAEA,OAAO;YACH,SAAS;YACT,SAAS,MAAM,CAAC,EAAE,EAAE,WAAW;YAC/B,SAAS,MAAM,CAAC,EAAE,EAAE,YAAY;QACpC;IACJ,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,OAAO;YAAE,SAAS;YAAO,OAAO,MAAM,OAAO;QAAC;IAClD;AACJ;AAMO,eAAe;IAClB,MAAM,WAAW,IAAA,4IAAY;IAE7B,IAAI;QACA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,GAAG,CAAC;QAE3C,IAAI,OAAO;YACP,QAAQ,KAAK,CAAC,oCAAoC;YAClD,OAAO;gBAAE,SAAS;gBAAO,OAAO,MAAM,OAAO;YAAC;QAClD;QAEA,OAAO;YACH,SAAS;YACT,cAAc,MAAM,CAAC,EAAE,EAAE,iBAAiB;QAC9C;IACJ,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,oCAAoC;QAClD,OAAO;YAAE,SAAS;YAAO,OAAO,MAAM,OAAO;QAAC;IAClD;AACJ"}},
    {"offset": {"line": 456, "column": 0}, "map": {"version":3,"sources":["file:///E:/PROJECT%202025%20-%20October/math4code-website/components/exam/ResponseExpiryWarning.tsx"],"sourcesContent":["import { AlertCircle, Clock, CheckCircle } from 'lucide-react';\r\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert';\r\nimport { getDaysUntilExpiry } from '@/lib/responseCleanup';\r\n\r\ninterface ResponseExpiryWarningProps {\r\n    submittedAt: string | Date;\r\n}\r\n\r\nexport function ResponseExpiryWarning({ submittedAt }: ResponseExpiryWarningProps) {\r\n    const daysRemaining = getDaysUntilExpiry(submittedAt);\r\n\r\n    // Expired - no answers available\r\n    if (daysRemaining === 0) {\r\n        return (\r\n            <Alert variant=\"destructive\" className=\"mb-6\">\r\n                <AlertCircle className=\"h-4 w-4\" />\r\n                <AlertTitle>Response Review Period Expired</AlertTitle>\r\n                <AlertDescription>\r\n                    Your selected answers have been automatically deleted after 30 days.\r\n                    You can still view your results and question analysis.\r\n                </AlertDescription>\r\n            </Alert>\r\n        );\r\n    }\r\n\r\n    // Urgent - less than 7 days remaining\r\n    if (daysRemaining <= 7) {\r\n        return (\r\n            <Alert className=\"mb-6 border-orange-200 bg-orange-50 dark:bg-orange-950/20 dark:border-orange-800\">\r\n                <Clock className=\"h-4 w-4 text-orange-600 dark:text-orange-400\" />\r\n                <AlertTitle className=\"text-orange-900 dark:text-orange-400\">\r\n                    ⚠️ Review Your Answers Soon\r\n                </AlertTitle>\r\n                <AlertDescription className=\"text-orange-800 dark:text-orange-300\">\r\n                    You have <strong>{daysRemaining} {daysRemaining === 1 ? 'day' : 'days'}</strong> remaining to review your selected answers.\r\n                    After that, only results and analysis will be available.\r\n                </AlertDescription>\r\n            </Alert>\r\n        );\r\n    }\r\n\r\n    // Active - more than 7 days remaining\r\n    return (\r\n        <Alert className=\"mb-6 border-blue-200 bg-blue-50 dark:bg-blue-950/20 dark:border-blue-800\">\r\n            <CheckCircle className=\"h-4 w-4 text-blue-600 dark:text-blue-400\" />\r\n            <AlertTitle className=\"text-blue-900 dark:text-blue-400\">\r\n                Review Period Active\r\n            </AlertTitle>\r\n            <AlertDescription className=\"text-blue-800 dark:text-blue-300\">\r\n                You can review your answers for the next <strong>{daysRemaining} days</strong>.\r\n                After 30 days, selected answers will be automatically removed.\r\n            </AlertDescription>\r\n        </Alert>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AAAA;AACA;AACA;;;;;AAMO,SAAS,sBAAsB,EAAE,WAAW,EAA8B;IAC7E,MAAM,gBAAgB,IAAA,+IAAkB,EAAC;IAEzC,iCAAiC;IACjC,IAAI,kBAAkB,GAAG;QACrB,qBACI,6LAAC,sIAAK;YAAC,SAAQ;YAAc,WAAU;;8BACnC,6LAAC,sOAAW;oBAAC,WAAU;;;;;;8BACvB,6LAAC,2IAAU;8BAAC;;;;;;8BACZ,6LAAC,iJAAgB;8BAAC;;;;;;;;;;;;IAM9B;IAEA,sCAAsC;IACtC,IAAI,iBAAiB,GAAG;QACpB,qBACI,6LAAC,sIAAK;YAAC,WAAU;;8BACb,6LAAC,gNAAK;oBAAC,WAAU;;;;;;8BACjB,6LAAC,2IAAU;oBAAC,WAAU;8BAAuC;;;;;;8BAG7D,6LAAC,iJAAgB;oBAAC,WAAU;;wBAAuC;sCACtD,6LAAC;;gCAAQ;gCAAc;gCAAE,kBAAkB,IAAI,QAAQ;;;;;;;wBAAgB;;;;;;;;;;;;;IAKhG;IAEA,sCAAsC;IACtC,qBACI,6LAAC,sIAAK;QAAC,WAAU;;0BACb,6LAAC,6OAAW;gBAAC,WAAU;;;;;;0BACvB,6LAAC,2IAAU;gBAAC,WAAU;0BAAmC;;;;;;0BAGzD,6LAAC,iJAAgB;gBAAC,WAAU;;oBAAmC;kCAClB,6LAAC;;4BAAQ;4BAAc;;;;;;;oBAAc;;;;;;;;;;;;;AAK9F;KA9CgB"}},
    {"offset": {"line": 612, "column": 0}, "map": {"version":3,"sources":["file:///E:/PROJECT%202025%20-%20October/math4code-website/app/student/results/attempt/%5BattemptId%5D/page.tsx"],"sourcesContent":["\"use client\"\r\nimport React, { useMemo, useEffect } from \"react\"\r\nimport { motion } from \"framer-motion\"\r\nimport { useParams, useRouter } from \"next/navigation\"\r\nimport {\r\n  CheckCircle2,\r\n  XCircle,\r\n  Download,\r\n  Home,\r\n  RefreshCw,\r\n  Clock,\r\n  Target,\r\n  TrendingUp,\r\n  AlertCircle,\r\n  ChevronRight\r\n} from \"lucide-react\"\r\nimport { useExamResult } from \"@/hooks/useExamResult\"\r\nimport ExamResultSkeleton from \"@/components/skeletons/ExamResultSkeleton\"\r\nimport Link from \"next/link\"\r\nimport { renderWithLatex } from \"@/lib/renderWithLatex\"\r\nimport { ResponseExpiryWarning } from \"@/components/exam/ResponseExpiryWarning\"\r\nimport { isResponseExpired, cleanupAttemptResponses } from \"@/lib/responseCleanup\"\r\n\r\nexport default function ExamResultPage() {\r\n  const { attemptId } = useParams()\r\n  const router = useRouter()\r\n  const { data, isLoading, error } = useExamResult(attemptId as string)\r\n\r\n  // Auto-cleanup expired responses when component mounts\r\n  useEffect(() => {\r\n    if (attemptId) {\r\n      cleanupAttemptResponses(attemptId as string).catch(err => {\r\n        console.warn('Background cleanup failed:', err);\r\n      });\r\n    }\r\n  }, [attemptId]);\r\n\r\n  // Calculate all statistics\r\n  const stats = useMemo(() => {\r\n    if (!data) return null\r\n\r\n    const { structured, responseMap } = data\r\n    let totalMarks = 0\r\n    let obtainedMarks = 0\r\n    let correct = 0\r\n    let wrong = 0\r\n    let unattempted = 0\r\n    let totalQuestions = 0\r\n\r\n    structured.forEach((section) =>\r\n      section.questions.forEach((q: any) => {\r\n        totalQuestions++\r\n        totalMarks += q.marks\r\n        const ans = responseMap[q.id]\r\n        const neg = q.negative_marks ?? 0\r\n        let got = 0\r\n\r\n        // Check if question is unattempted\r\n        const isUnattempted = !ans ||\r\n          (Array.isArray(ans) && ans.length === 0) ||\r\n          (typeof ans === 'string' && ans.trim() === '');\r\n\r\n        if (isUnattempted) {\r\n          unattempted++\r\n        } else {\r\n          let isCorrect = false\r\n          if (q.question_type === \"MCQ\") {\r\n            const c = q.options.find((o: any) => o.is_correct)?.id\r\n            isCorrect = ans === c\r\n          } else if (q.question_type === \"MSQ\") {\r\n            const c = q.options.filter((o: any) => o.is_correct).map((o: any) => o.id).sort()\r\n            const a = (ans as string[]).sort()\r\n            isCorrect = c.length === a.length && c.every((x: any, i: any) => x === a[i])\r\n          } else if (q.question_type === \"NAT\") {\r\n            isCorrect = String(ans).trim() === String(q.correct_answer).trim()\r\n          }\r\n          if (isCorrect) {\r\n            got = q.marks\r\n            correct++\r\n          } else {\r\n            got = -Math.abs(neg)\r\n            wrong++\r\n          }\r\n        }\r\n        q.obtained = got\r\n        obtainedMarks += got\r\n      })\r\n    )\r\n\r\n    const percentage = totalMarks > 0 ? ((obtainedMarks / totalMarks) * 100) : 0\r\n    const attemptedQuestions = correct + wrong\r\n    const accuracy = attemptedQuestions > 0 ? ((correct / attemptedQuestions) * 100) : 0\r\n\r\n    return {\r\n      totalMarks,\r\n      obtainedMarks,\r\n      correct,\r\n      wrong,\r\n      unattempted,\r\n      totalQuestions,\r\n      percentage,\r\n      accuracy\r\n    }\r\n  }, [data])\r\n\r\n  if (isLoading) return <ExamResultSkeleton />\r\n\r\n  if (error || !data || !stats) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center h-screen gap-4\">\r\n        <AlertCircle className=\"w-16 h-16 text-rose-500\" />\r\n        <h2 className=\"text-2xl font-bold text-rose-500\">Failed to Load Result</h2>\r\n        <p className=\"text-slate-600\">Please try again or contact support.</p>\r\n        <Link href=\"/student/dashboard\">\r\n          <button className=\"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors\">\r\n            Go to Dashboard\r\n          </button>\r\n        </Link>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const { attempt, structured, responseMap } = data\r\n  const examTitle = attempt.exams.title\r\n  const examId = attempt.exam_id\r\n  const responsesExpired = isResponseExpired(attempt.submitted_at)\r\n\r\n  // Determine pass/fail (assuming 40% is passing)\r\n  const isPassed = stats.percentage >= 40\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-linear-to-br from-slate-50 via-white to-indigo-50 dark:from-slate-900 dark:via-slate-900 dark:to-slate-800\">\r\n      {/* Header */}\r\n      <div className=\"bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 sticky top-0 z-10 shadow-sm\">\r\n        <div className=\"max-w-7xl mx-auto px-4 md:px-8 py-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h1 className=\"text-2xl md:text-3xl font-bold text-slate-800 dark:text-white\">\r\n                {examTitle}\r\n              </h1>\r\n              <p className=\"text-sm text-slate-500 dark:text-slate-400 mt-1\">\r\n                Detailed Result Analysis\r\n              </p>\r\n            </div>\r\n            <div className=\"flex gap-2\">\r\n              <Link href=\"/student/dashboard\">\r\n                <button className=\"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors\">\r\n                  <Home className=\"w-5 h-5 text-slate-600 dark:text-slate-300\" />\r\n                </button>\r\n              </Link>\r\n              <button\r\n                onClick={() => window.print()}\r\n                className=\"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors\"\r\n              >\r\n                <Download className=\"w-5 h-5 text-slate-600 dark:text-slate-300\" />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"max-w-7xl mx-auto px-4 md:px-8 py-8 space-y-8\">\r\n        {/* Score Card */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          className=\"bg-linear-to-br from-indigo-500 to-purple-600 rounded-3xl p-8 text-white shadow-2xl\"\r\n        >\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n            {/* Main Score */}\r\n            <div className=\"md:col-span-1 flex flex-col items-center justify-center text-center\">\r\n              <div className=\"text-6xl font-black mb-2\">\r\n                {stats.percentage.toFixed(1)}%\r\n              </div>\r\n              <div className=\"text-lg opacity-90\">Overall Score</div>\r\n              <div className=\"mt-4\">\r\n                <span className={`px-4 py-2 rounded-full text-sm font-bold ${isPassed\r\n                  ? 'bg-green-500 text-white'\r\n                  : 'bg-rose-500 text-white'\r\n                  }`}>\r\n                  {isPassed ? '✓ Passed' : '✗ Not Passed'}\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Stats Grid */}\r\n            <div className=\"md:col-span-2 grid grid-cols-2 gap-4\">\r\n              <div className=\"bg-white/10 backdrop-blur-sm rounded-2xl p-4\">\r\n                <div className=\"flex items-center gap-2 mb-2\">\r\n                  <Target className=\"w-5 h-5\" />\r\n                  <span className=\"text-sm opacity-90\">Marks Obtained</span>\r\n                </div>\r\n                <div className=\"text-3xl font-bold\">\r\n                  {stats.obtainedMarks.toFixed(2)} / {stats.totalMarks}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"bg-white/10 backdrop-blur-sm rounded-2xl p-4\">\r\n                <div className=\"flex items-center gap-2 mb-2\">\r\n                  <TrendingUp className=\"w-5 h-5\" />\r\n                  <span className=\"text-sm opacity-90\">Accuracy</span>\r\n                </div>\r\n                <div className=\"text-3xl font-bold\">\r\n                  {stats.accuracy.toFixed(1)}%\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"bg-white/10 backdrop-blur-sm rounded-2xl p-4\">\r\n                <div className=\"flex items-center gap-2 mb-2\">\r\n                  <CheckCircle2 className=\"w-5 h-5\" />\r\n                  <span className=\"text-sm opacity-90\">Correct</span>\r\n                </div>\r\n                <div className=\"text-3xl font-bold text-green-300\">\r\n                  {stats.correct}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"bg-white/10 backdrop-blur-sm rounded-2xl p-4\">\r\n                <div className=\"flex items-center gap-2 mb-2\">\r\n                  <XCircle className=\"w-5 h-5\" />\r\n                  <span className=\"text-sm opacity-90\">Incorrect</span>\r\n                </div>\r\n                <div className=\"text-3xl font-bold text-rose-300\">\r\n                  {stats.wrong}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Progress Bar */}\r\n          <div className=\"mt-6\">\r\n            <div className=\"flex justify-between text-sm mb-2 opacity-90\">\r\n              <span>Progress</span>\r\n              <span>{stats.correct + stats.wrong} / {stats.totalQuestions} Attempted</span>\r\n            </div>\r\n            <div className=\"w-full bg-white/20 rounded-full h-3 overflow-hidden\">\r\n              <div className=\"h-full flex\">\r\n                <div\r\n                  className=\"bg-green-400\"\r\n                  style={{ width: `${(stats.correct / stats.totalQuestions) * 100}%` }}\r\n                />\r\n                <div\r\n                  className=\"bg-rose-400\"\r\n                  style={{ width: `${(stats.wrong / stats.totalQuestions) * 100}%` }}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"flex justify-between text-xs mt-2 opacity-75\">\r\n              <span>✓ {stats.correct} Correct</span>\r\n              <span>✗ {stats.wrong} Wrong</span>\r\n              <span>— {stats.unattempted} Skipped</span>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"mt-6 flex flex-wrap gap-3\">\r\n            <Link href={`/student/exams/${examId}?retake=true`} className=\"flex-1\">\r\n              <button className=\"w-full px-6 py-3 bg-white text-indigo-600 rounded-xl font-semibold hover:bg-indigo-50 transition-colors flex items-center justify-center gap-2\">\r\n                <RefreshCw className=\"w-5 h-5\" />\r\n                Retake Exam\r\n              </button>\r\n            </Link>\r\n            <Link href=\"/student/dashboard\" className=\"flex-1\">\r\n              <button className=\"w-full px-6 py-3 bg-white/10 backdrop-blur-sm text-white rounded-xl font-semibold hover:bg-white/20 transition-colors flex items-center justify-center gap-2\">\r\n                <Home className=\"w-5 h-5\" />\r\n                Dashboard\r\n              </button>\r\n            </Link>\r\n          </div>\r\n        </motion.div>\r\n\r\n        {/* Response Expiry Warning */}\r\n        <ResponseExpiryWarning submittedAt={attempt.submitted_at} />\r\n\r\n        {/* Questions Review */}\r\n        <div className=\"space-y-6\">\r\n          <h2 className=\"text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-2\">\r\n            <ChevronRight className=\"w-6 h-6\" />\r\n            Detailed Review\r\n          </h2>\r\n\r\n          {structured.map((section, sectionIdx) => (\r\n            <motion.div\r\n              key={section.id}\r\n              initial={{ opacity: 0, y: 20 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              transition={{ delay: sectionIdx * 0.1 }}\r\n            >\r\n              <h3 className=\"text-xl font-bold text-slate-700 dark:text-slate-200 mb-4 flex items-center gap-2\">\r\n                <div className=\"w-8 h-8 rounded-full bg-indigo-100 dark:bg-indigo-900 text-indigo-600 dark:text-indigo-300 flex items-center justify-center text-sm font-bold\">\r\n                  {sectionIdx + 1}\r\n                </div>\r\n                {section.title}\r\n              </h3>\r\n\r\n              <div className=\"space-y-4\">\r\n                {section.questions.map((q: any, idx: number) => {\r\n                  const ans = responseMap[q.id]\r\n                  const isUnattempted =\r\n                    !ans || (Array.isArray(ans) && ans.length === 0) || String(ans).trim() === \"\"\r\n                  const obtained = q.obtained ?? 0\r\n                  const neg = q.negative_marks ?? 0\r\n                  const isCorrect = obtained > 0\r\n                  const status = isUnattempted\r\n                    ? \"unattempted\"\r\n                    : isCorrect\r\n                      ? \"correct\"\r\n                      : \"incorrect\"\r\n\r\n                  return (\r\n                    <div\r\n                      key={q.id}\r\n                      className={`rounded-2xl bg-white dark:bg-slate-800 border-2 shadow-md p-6 transition-all ${status === \"correct\"\r\n                        ? \"border-green-200 dark:border-green-800\"\r\n                        : status === \"incorrect\"\r\n                          ? \"border-rose-200 dark:border-rose-800\"\r\n                          : \"border-slate-200 dark:border-slate-700\"\r\n                        }`}\r\n                    >\r\n                      {/* Question Header */}\r\n                      <div className=\"flex items-start justify-between gap-4 mb-4\">\r\n                        <div className=\"flex-1\">\r\n                          <div className=\"flex items-center gap-3 mb-2\">\r\n                            <span className=\"flex items-center justify-center w-8 h-8 rounded-full bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 font-bold text-sm\">\r\n                              {idx + 1}\r\n                            </span>\r\n                            <h4 className=\"text-lg font-semibold text-slate-800 dark:text-white\">\r\n                              {renderWithLatex(q.question_text)}\r\n                            </h4>\r\n                          </div>\r\n                          <div className=\"flex items-center gap-2 text-sm text-slate-500 dark:text-slate-400\">\r\n                            <span>Type: {q.question_type}</span>\r\n                            <span>•</span>\r\n                            <span>Marks: +{q.marks}</span>\r\n                            {neg > 0 && (\r\n                              <>\r\n                                <span>•</span>\r\n                                <span className=\"text-rose-500\">Negative: -{neg}</span>\r\n                              </>\r\n                            )}\r\n                          </div>\r\n                        </div>\r\n\r\n                        {/* Score Badge */}\r\n                        <div className=\"flex flex-col items-end gap-2\">\r\n                          <span\r\n                            className={`px-4 py-2 rounded-xl font-bold text-lg ${obtained > 0\r\n                              ? \"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300\"\r\n                              : obtained < 0\r\n                                ? \"bg-rose-100 text-rose-700 dark:bg-rose-900 dark:text-rose-300\"\r\n                                : \"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-300\"\r\n                              }`}\r\n                          >\r\n                            {obtained > 0 ? `+${obtained}` : obtained < 0 ? obtained : \"0\"}\r\n                          </span>\r\n                          {status === \"correct\" && (\r\n                            <span className=\"flex items-center gap-1 text-green-600 dark:text-green-400 text-sm font-medium\">\r\n                              <CheckCircle2 className=\"w-4 h-4\" /> Correct\r\n                            </span>\r\n                          )}\r\n                          {status === \"incorrect\" && (\r\n                            <span className=\"flex items-center gap-1 text-rose-600 dark:text-rose-400 text-sm font-medium\">\r\n                              <XCircle className=\"w-4 h-4\" /> Incorrect\r\n                            </span>\r\n                          )}\r\n                          {status === \"unattempted\" && (\r\n                            <span className=\"text-slate-500 dark:text-slate-400 text-sm\">\r\n                              Not Attempted\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Options (MCQ/MSQ) */}\r\n                      {q.question_type !== \"NAT\" && q.options && (\r\n                        <div className=\"space-y-2\">\r\n                          {q.options.map((opt: any, optIdx: number) => {\r\n                            const chosen = Array.isArray(ans)\r\n                              ? ans.includes(opt.id)\r\n                              : ans === opt.id\r\n                            const correct = opt.is_correct\r\n\r\n                            let bgClass = \"bg-slate-50 border-slate-200 dark:bg-slate-900 dark:border-slate-700\"\r\n                            let textClass = \"text-slate-700 dark:text-slate-200\"\r\n\r\n                            if (correct && chosen) {\r\n                              bgClass = \"bg-green-50 border-green-400 dark:bg-green-900/30 dark:border-green-600\"\r\n                              textClass = \"text-green-900 dark:text-green-100\"\r\n                            } else if (correct) {\r\n                              bgClass = \"bg-green-50 border-green-300 dark:bg-green-900/20 dark:border-green-700\"\r\n                              textClass = \"text-green-800 dark:text-green-200\"\r\n                            } else if (chosen && !correct) {\r\n                              bgClass = \"bg-rose-50 border-rose-400 dark:bg-rose-900/30 dark:border-rose-600\"\r\n                              textClass = \"text-rose-900 dark:text-rose-100\"\r\n                            }\r\n\r\n                            return (\r\n                              <div\r\n                                key={opt.id}\r\n                                className={`p-4 rounded-xl border-2 flex items-center justify-between transition-all ${bgClass}`}\r\n                              >\r\n                                <div className=\"flex items-center gap-3 flex-1\">\r\n                                  <span className=\"flex items-center justify-center w-8 h-8 rounded-full bg-white dark:bg-slate-800 font-bold text-sm\">\r\n                                    {String.fromCharCode(65 + optIdx)}\r\n                                  </span>\r\n                                  <span className={`${textClass} font-medium`}>\r\n                                    {renderWithLatex(opt.option_text)}\r\n                                  </span>\r\n                                </div>\r\n\r\n                                <div className=\"flex gap-2\">\r\n                                  {!responsesExpired && chosen && !correct && (\r\n                                    <span className=\"px-3 py-1 text-xs rounded-full bg-rose-600 text-white font-bold\">\r\n                                      Your Answer\r\n                                    </span>\r\n                                  )}\r\n                                  {!responsesExpired && chosen && correct && (\r\n                                    <span className=\"px-3 py-1 text-xs rounded-full bg-green-600 text-white font-bold flex items-center gap-1\">\r\n                                      <CheckCircle2 className=\"w-3 h-3\" /> Your Answer\r\n                                    </span>\r\n                                  )}\r\n                                  {!chosen && correct && (\r\n                                    <span className=\"px-3 py-1 text-xs rounded-full bg-green-500 text-white font-bold\">\r\n                                      Correct Answer\r\n                                    </span>\r\n                                  )}\r\n                                </div>\r\n                              </div>\r\n                            )\r\n                          })}\r\n                        </div>\r\n                      )}\r\n\r\n                      {/* NAT Answer */}\r\n                      {q.question_type === \"NAT\" && (\r\n                        <div className={`grid grid-cols-1 ${!responsesExpired ? 'md:grid-cols-2' : ''} gap-4`}>\r\n                          {!responsesExpired && (\r\n                            <div className=\"p-4 rounded-xl bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700\">\r\n                              <div className=\"text-sm text-slate-500 dark:text-slate-400 mb-1\">Your Answer</div>\r\n                              <div className={`text-lg font-bold ${isCorrect\r\n                                ? \"text-green-600 dark:text-green-400\"\r\n                                : isUnattempted\r\n                                  ? \"text-slate-500 dark:text-slate-400\"\r\n                                  : \"text-rose-600 dark:text-rose-400\"\r\n                                }`}>\r\n                                {ans ? renderWithLatex(String(ans)) : \"—\"}\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                          <div className=\"p-4 rounded-xl bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800\">\r\n                            <div className=\"text-sm text-green-600 dark:text-green-400 mb-1\">Correct Answer</div>\r\n                            <div className=\"text-lg font-bold text-green-700 dark:text-green-300\">\r\n                              {renderWithLatex(q.correct_answer)}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n\r\n                      {/* Explanation */}\r\n                      {q.explanation && (\r\n                        <div className=\"mt-4 p-4 rounded-xl bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-200 dark:border-indigo-800\">\r\n                          <div className=\"flex items-center gap-2 font-semibold text-indigo-900 dark:text-indigo-200 mb-2\">\r\n                            <AlertCircle className=\"w-4 h-4\" />\r\n                            Explanation\r\n                          </div>\r\n                          <p className=\"text-sm text-indigo-800 dark:text-indigo-300 leading-relaxed\">\r\n                            {renderWithLatex(q.explanation)}\r\n                          </p>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  )\r\n                })}\r\n              </div>\r\n            </motion.div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}
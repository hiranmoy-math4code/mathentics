{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/app/api/generate-outline/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\nimport { GoogleGenerativeAI } from \"@google/generative-ai\";\r\n\r\nexport const runtime = 'edge';\r\n\r\nexport async function POST(request: NextRequest) {\r\n    try {\r\n        const { courseTitle } = await request.json();\r\n\r\n        if (!courseTitle) {\r\n            return NextResponse.json(\r\n                { success: false, error: \"Course title is required\" },\r\n                { status: 400 }\r\n            );\r\n        }\r\n\r\n        const apiKey = process.env.NEXT_PUBLIC_GEMINI_API_KEY;\r\n        if (!apiKey) {\r\n            return NextResponse.json(\r\n                { success: false, error: \"Gemini API key is not configured\" },\r\n                { status: 500 }\r\n            );\r\n        }\r\n\r\n        const genAI = new GoogleGenerativeAI(apiKey);\r\n        const model = genAI.getGenerativeModel({ model: \"gemini-2.5-flash\" });\r\n\r\n        const prompt = `Generate a comprehensive course outline for a course titled \"${courseTitle}\". \r\n    Return a JSON structure with the following format:\r\n    {\r\n      \"modules\": [\r\n        {\r\n          \"title\": \"Module Title\",\r\n          \"lessons\": [\r\n            { \r\n              \"title\": \"Lesson Title\",\r\n              \"content_type\": \"video\" | \"text\" | \"pdf\" \r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    }\r\n    Rules:\r\n    - Mix content types appropriately (e.g., \"Introduction\" -> video, \"Summary\" -> text, \"Cheatsheet\" -> pdf).\r\n    - Ensure the outline is structured logically with progressive difficulty.\r\n    - Do not include any markdown formatting or code blocks, just the raw JSON string.`;\r\n\r\n        const result = await model.generateContent(prompt);\r\n        const response = await result.response;\r\n        let text = response.text();\r\n\r\n        // Clean up markdown code blocks if present\r\n        text = text.replace(/```json/g, \"\").replace(/```/g, \"\").trim();\r\n\r\n        const outline = JSON.parse(text);\r\n\r\n        return NextResponse.json({ success: true, outline });\r\n    } catch (error: any) {\r\n        console.error(\"Error generating course outline:\", error);\r\n        return NextResponse.json(\r\n            { success: false, error: \"Failed to generate course outline. \" + (error.message || \"\") },\r\n            { status: 500 }\r\n        );\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;;;AAEO,MAAM,UAAU;AAEhB,eAAe,KAAK,OAAoB;IAC3C,IAAI;QACA,MAAM,EAAE,WAAW,EAAE,GAAG,MAAM,QAAQ,IAAI;QAE1C,IAAI,CAAC,aAAa;YACd,OAAO,kMAAY,CAAC,IAAI,CACpB;gBAAE,SAAS;gBAAO,OAAO;YAA2B,GACpD;gBAAE,QAAQ;YAAI;QAEtB;QAEA,MAAM;QACN;;QAOA,MAAM,QAAQ,IAAI,8LAAkB,CAAC;QACrC,MAAM,QAAQ,MAAM,kBAAkB,CAAC;YAAE,OAAO;QAAmB;QAEnE,MAAM,SAAS,CAAC,6DAA6D,EAAE,YAAY;;;;;;;;;;;;;;;;;;sFAkBb,CAAC;QAE/E,MAAM,SAAS,MAAM,MAAM,eAAe,CAAC;QAC3C,MAAM,WAAW,MAAM,OAAO,QAAQ;QACtC,IAAI,OAAO,SAAS,IAAI;QAExB,2CAA2C;QAC3C,OAAO,KAAK,OAAO,CAAC,YAAY,IAAI,OAAO,CAAC,QAAQ,IAAI,IAAI;QAE5D,MAAM,UAAU,KAAK,KAAK,CAAC;QAE3B,OAAO,kMAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM;QAAQ;IACtD,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,oCAAoC;QAClD,OAAO,kMAAY,CAAC,IAAI,CACpB;YAAE,SAAS;YAAO,OAAO,wCAAwC,CAAC,MAAM,OAAO,IAAI,EAAE;QAAE,GACvF;YAAE,QAAQ;QAAI;IAEtB;AACJ"}}]
}
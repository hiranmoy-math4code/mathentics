{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/hooks/student/useStudentStats.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { createClient } from \"@/lib/supabase/client\";\r\n\r\ninterface StudentStats {\r\n    totalExams: number;\r\n    averageScore: number;\r\n    totalTimeSpent: number;\r\n    rank: number;\r\n}\r\n\r\nexport function useStudentStats(userId: string | undefined) {\r\n    return useQuery({\r\n        queryKey: [\"student-stats\", userId],\r\n        queryFn: async ({ signal }): Promise<StudentStats> => {\r\n            if (!userId) {\r\n                return {\r\n                    totalExams: 0,\r\n                    averageScore: 0,\r\n                    totalTimeSpent: 0,\r\n                    rank: 0,\r\n                };\r\n            }\r\n\r\n            const supabase = createClient();\r\n\r\n            // Call the optimized RPC function\r\n            const { data, error } = await supabase\r\n                .rpc('get_student_stats', { target_user_id: userId })\r\n                .abortSignal(signal);\r\n\r\n            if (error) {\r\n                // Ignore AbortError caused by navigation\r\n                if (error.code === '20' || error.message.includes('AbortError') || error.message.includes('aborted')) {\r\n                    return { totalExams: 0, averageScore: 0, totalTimeSpent: 0, rank: 0 };\r\n                }\r\n\r\n                // Return defaults instead of throwing to prevent UI crash for new users\r\n                return { totalExams: 0, averageScore: 0, totalTimeSpent: 0, rank: 0 };\r\n            }\r\n\r\n            // If data is null (fresh user), return defaults\r\n            if (!data) {\r\n                return { totalExams: 0, averageScore: 0, totalTimeSpent: 0, rank: 0 };\r\n            }\r\n\r\n            return data as unknown as StudentStats;\r\n        },\r\n        enabled: !!userId\r\n    });\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;AAYO,SAAS,gBAAgB,MAA0B;IACtD,OAAO,IAAA,+LAAQ,EAAC;QACZ,UAAU;YAAC;YAAiB;SAAO;QACnC,SAAS,OAAO,EAAE,MAAM,EAAE;YACtB,IAAI,CAAC,QAAQ;gBACT,OAAO;oBACH,YAAY;oBACZ,cAAc;oBACd,gBAAgB;oBAChB,MAAM;gBACV;YACJ;YAEA,MAAM,WAAW,IAAA,iJAAY;YAE7B,kCAAkC;YAClC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SACzB,GAAG,CAAC,qBAAqB;gBAAE,gBAAgB;YAAO,GAClD,WAAW,CAAC;YAEjB,IAAI,OAAO;gBACP,yCAAyC;gBACzC,IAAI,MAAM,IAAI,KAAK,QAAQ,MAAM,OAAO,CAAC,QAAQ,CAAC,iBAAiB,MAAM,OAAO,CAAC,QAAQ,CAAC,YAAY;oBAClG,OAAO;wBAAE,YAAY;wBAAG,cAAc;wBAAG,gBAAgB;wBAAG,MAAM;oBAAE;gBACxE;gBAEA,wEAAwE;gBACxE,OAAO;oBAAE,YAAY;oBAAG,cAAc;oBAAG,gBAAgB;oBAAG,MAAM;gBAAE;YACxE;YAEA,gDAAgD;YAChD,IAAI,CAAC,MAAM;gBACP,OAAO;oBAAE,YAAY;oBAAG,cAAc;oBAAG,gBAAgB;oBAAG,MAAM;gBAAE;YACxE;YAEA,OAAO;QACX;QACA,SAAS,CAAC,CAAC;IACf;AACJ"}},
    {"offset": {"line": 69, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/hooks/student/useStudentTestSeries.ts"],"sourcesContent":["import { useQuery } from \"@tanstack/react-query\"\r\nimport { createClient } from \"@/lib/supabase/client\"\r\n\r\ninterface EnrolledTestSeries {\r\n    id: string\r\n    title: string\r\n    description: string\r\n    thumbnail_url: string | null\r\n    course_type: string\r\n    progress: number\r\n    last_accessed_at: string | null\r\n    total_tests: number\r\n    completed_tests: number\r\n}\r\n\r\nexport function useStudentTestSeries(userId: string | undefined) {\r\n    return useQuery({\r\n        queryKey: [\"student-test-series\", userId],\r\n        queryFn: async ({ signal }) => {\r\n            if (!userId) {\r\n                return []\r\n            }\r\n\r\n            const supabase = createClient()\r\n\r\n            // ✅ OPTIMIZED: Direct query instead of RPC function\r\n            const { data: enrollments, error } = await supabase\r\n                .from('enrollments')\r\n                .select(`\r\n                    id,\r\n                    course_id,\r\n                    progress_percentage,\r\n                    last_accessed_at,\r\n                    status,\r\n                    courses (\r\n                        id,\r\n                        title,\r\n                        description,\r\n                        thumbnail_url,\r\n                        course_type\r\n                    )\r\n                `)\r\n                .eq('user_id', userId)\r\n                .in('status', ['active', 'completed'])\r\n                .order('last_accessed_at', { ascending: false, nullsFirst: false })\r\n                .abortSignal(signal);\r\n\r\n            if (error) {\r\n                if (error.code === '20' || error.message.includes('AbortError') || error.message.includes('aborted')) {\r\n                    return [];\r\n                }\r\n                console.error('Error fetching student test series:', error);\r\n                throw error\r\n            }\r\n\r\n            if (!enrollments || enrollments.length === 0) {\r\n                return [];\r\n            }\r\n\r\n            // Get course IDs for test series only\r\n            const testSeriesIds = enrollments\r\n                .filter((e: any) => e.courses?.course_type === 'test_series')\r\n                .map(e => e.course_id);\r\n\r\n            if (testSeriesIds.length === 0) {\r\n                return [];\r\n            }\r\n\r\n            // ✅ OPTIMIZED: Batch query for lesson counts (tests in test series)\r\n            const { data: lessonsData } = await supabase\r\n                .from('modules')\r\n                .select(`\r\n                    course_id,\r\n                    lessons!inner(id)\r\n                `)\r\n                .in('course_id', testSeriesIds)\r\n                .abortSignal(signal);\r\n\r\n            // ✅ OPTIMIZED: Batch query for completed tests\r\n            const { data: completedData } = await supabase\r\n                .from('lesson_progress')\r\n                .select('course_id, lesson_id')\r\n                .eq('user_id', userId)\r\n                .eq('completed', true)\r\n                .in('course_id', testSeriesIds)\r\n                .abortSignal(signal);\r\n\r\n            // Calculate counts per test series\r\n            const testCounts: Record<string, number> = {};\r\n            const completedCounts: Record<string, number> = {};\r\n\r\n            lessonsData?.forEach((module: any) => {\r\n                const courseId = module.course_id;\r\n                testCounts[courseId] = (testCounts[courseId] || 0) + (module.lessons?.length || 0);\r\n            });\r\n\r\n            completedData?.forEach((progress: any) => {\r\n                const courseId = progress.course_id;\r\n                completedCounts[courseId] = (completedCounts[courseId] || 0) + 1;\r\n            });\r\n\r\n            // Map enrollments to test series with progress data\r\n            const testSeries = enrollments\r\n                .filter((e: any) => e.courses?.course_type === 'test_series') // Only test series\r\n                .map((enrollment: any) => ({\r\n                    id: enrollment.courses.id,\r\n                    title: enrollment.courses.title,\r\n                    description: enrollment.courses.description,\r\n                    thumbnail_url: enrollment.courses.thumbnail_url,\r\n                    course_type: enrollment.courses.course_type,\r\n                    progress: enrollment.progress_percentage || 0, // ✅ Already updated by trigger!\r\n                    last_accessed_at: enrollment.last_accessed_at,\r\n                    total_tests: testCounts[enrollment.course_id] || 0,\r\n                    completed_tests: completedCounts[enrollment.course_id] || 0,\r\n                })) as EnrolledTestSeries[];\r\n\r\n            return testSeries;\r\n        },\r\n        enabled: !!userId,\r\n        staleTime: 1000 * 60 * 5, // 5 minutes cache\r\n    })\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAcO,SAAS,qBAAqB,MAA0B;IAC3D,OAAO,IAAA,+LAAQ,EAAC;QACZ,UAAU;YAAC;YAAuB;SAAO;QACzC,SAAS,OAAO,EAAE,MAAM,EAAE;YACtB,IAAI,CAAC,QAAQ;gBACT,OAAO,EAAE;YACb;YAEA,MAAM,WAAW,IAAA,iJAAY;YAE7B,oDAAoD;YACpD,MAAM,EAAE,MAAM,WAAW,EAAE,KAAK,EAAE,GAAG,MAAM,SACtC,IAAI,CAAC,eACL,MAAM,CAAC,CAAC;;;;;;;;;;;;;gBAaT,CAAC,EACA,EAAE,CAAC,WAAW,QACd,EAAE,CAAC,UAAU;gBAAC;gBAAU;aAAY,EACpC,KAAK,CAAC,oBAAoB;gBAAE,WAAW;gBAAO,YAAY;YAAM,GAChE,WAAW,CAAC;YAEjB,IAAI,OAAO;gBACP,IAAI,MAAM,IAAI,KAAK,QAAQ,MAAM,OAAO,CAAC,QAAQ,CAAC,iBAAiB,MAAM,OAAO,CAAC,QAAQ,CAAC,YAAY;oBAClG,OAAO,EAAE;gBACb;gBACA,QAAQ,KAAK,CAAC,uCAAuC;gBACrD,MAAM;YACV;YAEA,IAAI,CAAC,eAAe,YAAY,MAAM,KAAK,GAAG;gBAC1C,OAAO,EAAE;YACb;YAEA,sCAAsC;YACtC,MAAM,gBAAgB,YACjB,MAAM,CAAC,CAAC,IAAW,EAAE,OAAO,EAAE,gBAAgB,eAC9C,GAAG,CAAC,CAAA,IAAK,EAAE,SAAS;YAEzB,IAAI,cAAc,MAAM,KAAK,GAAG;gBAC5B,OAAO,EAAE;YACb;YAEA,oEAAoE;YACpE,MAAM,EAAE,MAAM,WAAW,EAAE,GAAG,MAAM,SAC/B,IAAI,CAAC,WACL,MAAM,CAAC,CAAC;;;gBAGT,CAAC,EACA,EAAE,CAAC,aAAa,eAChB,WAAW,CAAC;YAEjB,+CAA+C;YAC/C,MAAM,EAAE,MAAM,aAAa,EAAE,GAAG,MAAM,SACjC,IAAI,CAAC,mBACL,MAAM,CAAC,wBACP,EAAE,CAAC,WAAW,QACd,EAAE,CAAC,aAAa,MAChB,EAAE,CAAC,aAAa,eAChB,WAAW,CAAC;YAEjB,mCAAmC;YACnC,MAAM,aAAqC,CAAC;YAC5C,MAAM,kBAA0C,CAAC;YAEjD,aAAa,QAAQ,CAAC;gBAClB,MAAM,WAAW,OAAO,SAAS;gBACjC,UAAU,CAAC,SAAS,GAAG,CAAC,UAAU,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,OAAO,OAAO,EAAE,UAAU,CAAC;YACrF;YAEA,eAAe,QAAQ,CAAC;gBACpB,MAAM,WAAW,SAAS,SAAS;gBACnC,eAAe,CAAC,SAAS,GAAG,CAAC,eAAe,CAAC,SAAS,IAAI,CAAC,IAAI;YACnE;YAEA,oDAAoD;YACpD,MAAM,aAAa,YACd,MAAM,CAAC,CAAC,IAAW,EAAE,OAAO,EAAE,gBAAgB,eAAe,mBAAmB;aAChF,GAAG,CAAC,CAAC,aAAoB,CAAC;oBACvB,IAAI,WAAW,OAAO,CAAC,EAAE;oBACzB,OAAO,WAAW,OAAO,CAAC,KAAK;oBAC/B,aAAa,WAAW,OAAO,CAAC,WAAW;oBAC3C,eAAe,WAAW,OAAO,CAAC,aAAa;oBAC/C,aAAa,WAAW,OAAO,CAAC,WAAW;oBAC3C,UAAU,WAAW,mBAAmB,IAAI;oBAC5C,kBAAkB,WAAW,gBAAgB;oBAC7C,aAAa,UAAU,CAAC,WAAW,SAAS,CAAC,IAAI;oBACjD,iBAAiB,eAAe,CAAC,WAAW,SAAS,CAAC,IAAI;gBAC9D,CAAC;YAEL,OAAO;QACX;QACA,SAAS,CAAC,CAAC;QACX,WAAW,OAAO,KAAK;IAC3B;AACJ"}},
    {"offset": {"line": 165, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/hooks/student/useLastAttempt.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { createClient } from \"@/lib/supabase/client\";\r\n\r\ninterface LastAttempt {\r\n    attemptId: string;\r\n    examId: string;\r\n    examTitle: string;\r\n    status: \"in_progress\" | \"completed\";\r\n    startedAt: string;\r\n}\r\n\r\nexport function useLastAttempt(userId: string | undefined) {\r\n    const supabase = createClient();\r\n\r\n    return useQuery({\r\n        queryKey: [\"last-attempt\", userId],\r\n        queryFn: async (): Promise<LastAttempt | null> => {\r\n            if (!userId) return null;\r\n\r\n            // Get the most recent in-progress attempt\r\n            const { data: attempt, error } = await supabase\r\n                .from(\"exam_attempts\")\r\n                .select(`\r\n          id,\r\n          exam_id,\r\n          status,\r\n          started_at,\r\n          exams (\r\n            id,\r\n            title\r\n          )\r\n        `)\r\n                .eq(\"student_id\", userId)\r\n                .eq(\"status\", \"in_progress\")\r\n                .order(\"started_at\", { ascending: false })\r\n                .limit(1)\r\n                .single();\r\n\r\n            if (error || !attempt) return null;\r\n\r\n            const exam = attempt.exams as any;\r\n\r\n            return {\r\n                attemptId: attempt.id,\r\n                examId: attempt.exam_id,\r\n                examTitle: exam?.title || \"Untitled Exam\",\r\n                status: attempt.status as \"in_progress\" | \"completed\",\r\n                startedAt: attempt.started_at,\r\n            };\r\n        },\r\n        enabled: !!userId,\r\n        staleTime: 1000 * 30, // 30 seconds\r\n    });\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;AAaO,SAAS,eAAe,MAA0B;IACrD,MAAM,WAAW,IAAA,iJAAY;IAE7B,OAAO,IAAA,+LAAQ,EAAC;QACZ,UAAU;YAAC;YAAgB;SAAO;QAClC,SAAS;YACL,IAAI,CAAC,QAAQ,OAAO;YAEpB,0CAA0C;YAC1C,MAAM,EAAE,MAAM,OAAO,EAAE,KAAK,EAAE,GAAG,MAAM,SAClC,IAAI,CAAC,iBACL,MAAM,CAAC,CAAC;;;;;;;;;QASjB,CAAC,EACQ,EAAE,CAAC,cAAc,QACjB,EAAE,CAAC,UAAU,eACb,KAAK,CAAC,cAAc;gBAAE,WAAW;YAAM,GACvC,KAAK,CAAC,GACN,MAAM;YAEX,IAAI,SAAS,CAAC,SAAS,OAAO;YAE9B,MAAM,OAAO,QAAQ,KAAK;YAE1B,OAAO;gBACH,WAAW,QAAQ,EAAE;gBACrB,QAAQ,QAAQ,OAAO;gBACvB,WAAW,MAAM,SAAS;gBAC1B,QAAQ,QAAQ,MAAM;gBACtB,WAAW,QAAQ,UAAU;YACjC;QACJ;QACA,SAAS,CAAC,CAAC;QACX,WAAW,OAAO;IACtB;AACJ"}},
    {"offset": {"line": 214, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/hooks/student/useStudentCourses.ts"],"sourcesContent":["import { useQuery } from \"@tanstack/react-query\"\r\nimport { createClient } from \"@/lib/supabase/client\"\r\n\r\ninterface EnrolledCourse {\r\n    id: string\r\n    title: string\r\n    description: string\r\n    thumbnail_url: string | null\r\n    course_type: string\r\n    progress_percentage: number\r\n    last_accessed_at: string | null\r\n    total_lessons: number\r\n    completed_lessons: number\r\n}\r\n\r\nexport function useStudentCourses(userId: string | undefined) {\r\n    return useQuery({\r\n        queryKey: [\"student-courses\", userId],\r\n        queryFn: async ({ signal }) => {\r\n            if (!userId) {\r\n                return []\r\n            }\r\n\r\n            const supabase = createClient()\r\n\r\n            // ✅ OPTIMIZED: Direct query instead of RPC function\r\n            // Progress is already calculated by trigger!\r\n            const { data: enrollments, error } = await supabase\r\n                .from('enrollments')\r\n                .select(`\r\n                    id,\r\n                    course_id,\r\n                    progress_percentage,\r\n                    last_accessed_at,\r\n                    status,\r\n                    courses (\r\n                        id,\r\n                        title,\r\n                        description,\r\n                        thumbnail_url,\r\n                        course_type\r\n                    )\r\n                `)\r\n                .eq('user_id', userId)\r\n                .in('status', ['active', 'completed'])\r\n                .order('last_accessed_at', { ascending: false, nullsFirst: false })\r\n                .abortSignal(signal);\r\n\r\n            if (error) {\r\n                // Ignore AbortError caused by navigation\r\n                if (error.code === '20' || error.message.includes('AbortError') || error.message.includes('aborted')) {\r\n                    return [];\r\n                }\r\n                console.error('Error fetching student courses:', error);\r\n                throw error\r\n            }\r\n\r\n            if (!enrollments || enrollments.length === 0) {\r\n                return [];\r\n            }\r\n\r\n            // Get course IDs for batch queries\r\n            const courseIds = enrollments.map(e => e.course_id);\r\n\r\n            // ✅ OPTIMIZED: Batch query for lesson counts (cached)\r\n            const { data: lessonsData } = await supabase\r\n                .from('modules')\r\n                .select(`\r\n                    course_id,\r\n                    lessons!inner(id)\r\n                `)\r\n                .in('course_id', courseIds)\r\n                .abortSignal(signal);\r\n\r\n            // ✅ OPTIMIZED: Batch query for completed lessons (cached)\r\n            const { data: completedData } = await supabase\r\n                .from('lesson_progress')\r\n                .select('course_id, lesson_id')\r\n                .eq('user_id', userId)\r\n                .eq('completed', true)\r\n                .in('course_id', courseIds)\r\n                .abortSignal(signal);\r\n\r\n            // Calculate lesson counts per course\r\n            const lessonCounts: Record<string, number> = {};\r\n            const completedCounts: Record<string, number> = {};\r\n\r\n            lessonsData?.forEach((module: any) => {\r\n                const courseId = module.course_id;\r\n                lessonCounts[courseId] = (lessonCounts[courseId] || 0) + (module.lessons?.length || 0);\r\n            });\r\n\r\n            completedData?.forEach((progress: any) => {\r\n                const courseId = progress.course_id;\r\n                completedCounts[courseId] = (completedCounts[courseId] || 0) + 1;\r\n            });\r\n\r\n            // Map enrollments to courses with progress data\r\n            const courses = enrollments\r\n                .filter((e: any) => e.courses?.course_type === 'course') // Only courses, not test series\r\n                .map((enrollment: any) => ({\r\n                    id: enrollment.courses.id,\r\n                    title: enrollment.courses.title,\r\n                    description: enrollment.courses.description,\r\n                    thumbnail_url: enrollment.courses.thumbnail_url,\r\n                    course_type: enrollment.courses.course_type,\r\n                    progress_percentage: enrollment.progress_percentage || 0, // ✅ Already updated by trigger!\r\n                    last_accessed_at: enrollment.last_accessed_at,\r\n                    total_lessons: lessonCounts[enrollment.course_id] || 0,\r\n                    completed_lessons: completedCounts[enrollment.course_id] || 0,\r\n                })) as EnrolledCourse[];\r\n\r\n            return courses;\r\n        },\r\n        enabled: !!userId,\r\n        staleTime: 1000 * 60 * 5, // 5 minutes cache (progress updates via trigger)\r\n    })\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAcO,SAAS,kBAAkB,MAA0B;IACxD,OAAO,IAAA,+LAAQ,EAAC;QACZ,UAAU;YAAC;YAAmB;SAAO;QACrC,SAAS,OAAO,EAAE,MAAM,EAAE;YACtB,IAAI,CAAC,QAAQ;gBACT,OAAO,EAAE;YACb;YAEA,MAAM,WAAW,IAAA,iJAAY;YAE7B,oDAAoD;YACpD,6CAA6C;YAC7C,MAAM,EAAE,MAAM,WAAW,EAAE,KAAK,EAAE,GAAG,MAAM,SACtC,IAAI,CAAC,eACL,MAAM,CAAC,CAAC;;;;;;;;;;;;;gBAaT,CAAC,EACA,EAAE,CAAC,WAAW,QACd,EAAE,CAAC,UAAU;gBAAC;gBAAU;aAAY,EACpC,KAAK,CAAC,oBAAoB;gBAAE,WAAW;gBAAO,YAAY;YAAM,GAChE,WAAW,CAAC;YAEjB,IAAI,OAAO;gBACP,yCAAyC;gBACzC,IAAI,MAAM,IAAI,KAAK,QAAQ,MAAM,OAAO,CAAC,QAAQ,CAAC,iBAAiB,MAAM,OAAO,CAAC,QAAQ,CAAC,YAAY;oBAClG,OAAO,EAAE;gBACb;gBACA,QAAQ,KAAK,CAAC,mCAAmC;gBACjD,MAAM;YACV;YAEA,IAAI,CAAC,eAAe,YAAY,MAAM,KAAK,GAAG;gBAC1C,OAAO,EAAE;YACb;YAEA,mCAAmC;YACnC,MAAM,YAAY,YAAY,GAAG,CAAC,CAAA,IAAK,EAAE,SAAS;YAElD,sDAAsD;YACtD,MAAM,EAAE,MAAM,WAAW,EAAE,GAAG,MAAM,SAC/B,IAAI,CAAC,WACL,MAAM,CAAC,CAAC;;;gBAGT,CAAC,EACA,EAAE,CAAC,aAAa,WAChB,WAAW,CAAC;YAEjB,0DAA0D;YAC1D,MAAM,EAAE,MAAM,aAAa,EAAE,GAAG,MAAM,SACjC,IAAI,CAAC,mBACL,MAAM,CAAC,wBACP,EAAE,CAAC,WAAW,QACd,EAAE,CAAC,aAAa,MAChB,EAAE,CAAC,aAAa,WAChB,WAAW,CAAC;YAEjB,qCAAqC;YACrC,MAAM,eAAuC,CAAC;YAC9C,MAAM,kBAA0C,CAAC;YAEjD,aAAa,QAAQ,CAAC;gBAClB,MAAM,WAAW,OAAO,SAAS;gBACjC,YAAY,CAAC,SAAS,GAAG,CAAC,YAAY,CAAC,SAAS,IAAI,CAAC,IAAI,CAAC,OAAO,OAAO,EAAE,UAAU,CAAC;YACzF;YAEA,eAAe,QAAQ,CAAC;gBACpB,MAAM,WAAW,SAAS,SAAS;gBACnC,eAAe,CAAC,SAAS,GAAG,CAAC,eAAe,CAAC,SAAS,IAAI,CAAC,IAAI;YACnE;YAEA,gDAAgD;YAChD,MAAM,UAAU,YACX,MAAM,CAAC,CAAC,IAAW,EAAE,OAAO,EAAE,gBAAgB,UAAU,gCAAgC;aACxF,GAAG,CAAC,CAAC,aAAoB,CAAC;oBACvB,IAAI,WAAW,OAAO,CAAC,EAAE;oBACzB,OAAO,WAAW,OAAO,CAAC,KAAK;oBAC/B,aAAa,WAAW,OAAO,CAAC,WAAW;oBAC3C,eAAe,WAAW,OAAO,CAAC,aAAa;oBAC/C,aAAa,WAAW,OAAO,CAAC,WAAW;oBAC3C,qBAAqB,WAAW,mBAAmB,IAAI;oBACvD,kBAAkB,WAAW,gBAAgB;oBAC7C,eAAe,YAAY,CAAC,WAAW,SAAS,CAAC,IAAI;oBACrD,mBAAmB,eAAe,CAAC,WAAW,SAAS,CAAC,IAAI;gBAChE,CAAC;YAEL,OAAO;QACX;QACA,SAAS,CAAC,CAAC;QACX,WAAW,OAAO,KAAK;IAC3B;AACJ"}},
    {"offset": {"line": 309, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/hooks/student/useAllCourses.ts"],"sourcesContent":["import { useQuery } from \"@tanstack/react-query\"\r\nimport { createClient } from \"@/lib/supabase/client\"\r\n\r\ninterface Course {\r\n    id: string\r\n    title: string\r\n    description: string\r\n    thumbnail_url: string | null\r\n    price: number\r\n    is_published: boolean\r\n    created_at: string\r\n    instructor_name: string\r\n    is_enrolled: boolean\r\n    total_lessons: number\r\n}\r\n\r\nexport function useAllCourses(userId: string | undefined) {\r\n    return useQuery({\r\n        queryKey: [\"all-courses\", userId],\r\n        queryFn: async () => {\r\n            const supabase = createClient()\r\n\r\n            // Call Optimized RPC\r\n            const { data, error } = await supabase\r\n                .rpc('get_published_courses_with_meta', {\r\n                    target_user_id: userId || null,\r\n                    p_limit: 50,\r\n                    p_offset: 0\r\n                });\r\n\r\n            if (error) {\r\n                throw error;\r\n            }\r\n\r\n            // Filter to show only courses (not test series)\r\n            const courses = (data || []).filter((course: any) => course.course_type === 'course');\r\n\r\n            return courses as Course[];\r\n        },\r\n        enabled: userId !== undefined,\r\n    })\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAeO,SAAS,cAAc,MAA0B;IACpD,OAAO,IAAA,+LAAQ,EAAC;QACZ,UAAU;YAAC;YAAe;SAAO;QACjC,SAAS;YACL,MAAM,WAAW,IAAA,iJAAY;YAE7B,qBAAqB;YACrB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SACzB,GAAG,CAAC,mCAAmC;gBACpC,gBAAgB,UAAU;gBAC1B,SAAS;gBACT,UAAU;YACd;YAEJ,IAAI,OAAO;gBACP,MAAM;YACV;YAEA,gDAAgD;YAChD,MAAM,UAAU,CAAC,QAAQ,EAAE,EAAE,MAAM,CAAC,CAAC,SAAgB,OAAO,WAAW,KAAK;YAE5E,OAAO;QACX;QACA,SAAS,WAAW;IACxB;AACJ"}},
    {"offset": {"line": 345, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/lib/data/lesson.ts"],"sourcesContent":["import { SupabaseClient } from \"@supabase/supabase-js\";\r\n\r\nexport async function fetchLessonDetailedData(\r\n    supabase: SupabaseClient,\r\n    lessonId: string,\r\n    courseId: string,\r\n    userId?: string\r\n) {\r\n    // 1. Get Core Lesson Details\r\n    const { data: lesson, error } = await supabase\r\n        .from(\"lessons\")\r\n        .select(\"*\")\r\n        .eq(\"id\", lessonId)\r\n        .single();\r\n\r\n    if (error || !lesson) {\r\n        console.error(\"Lesson fetch error:\", error);\r\n        return { error: \"Lesson not found\" };\r\n    }\r\n\r\n    const result: any = { lesson };\r\n\r\n    // 2. Fetch Additional Type-Specific Data\r\n    try {\r\n        if (lesson.content_type === 'quiz' && lesson.exam_id) {\r\n            // Fetch Exam Data\r\n            const [examResult, sectionsResult] = await Promise.all([\r\n                supabase.from(\"exams\").select(\"*\").eq(\"id\", lesson.exam_id).single(),\r\n                supabase.from(\"sections\").select(\"id, questions:questions(id)\").eq(\"exam_id\", lesson.exam_id)\r\n            ]);\r\n\r\n            result.exam = examResult.data;\r\n\r\n            // Calculate Question Count\r\n            const sections = sectionsResult.data || [];\r\n            result.questionsCount = sections.reduce((acc: number, section: any) => acc + (section.questions?.length || 0), 0);\r\n\r\n            // Fetch User Attempts\r\n            if (userId) {\r\n                const { data: attempts } = await supabase\r\n                    .from(\"exam_attempts\")\r\n                    .select(\"*\")\r\n                    .eq(\"exam_id\", lesson.exam_id)\r\n                    .eq(\"student_id\", userId);\r\n                result.attempts = attempts || [];\r\n            }\r\n        }\r\n\r\n        // 3. Fetch Course/Author Context (optional, don't fail if this errors)\r\n        if (courseId) {\r\n            try {\r\n                const { data: course } = await supabase\r\n                    .from(\"courses\")\r\n                    .select(\"user_id\")\r\n                    .eq(\"id\", courseId)\r\n                    .single();\r\n\r\n                if (course?.user_id) {\r\n                    const { data: author } = await supabase\r\n                        .from(\"profiles\")\r\n                        .select(\"*\")\r\n                        .eq(\"id\", course.user_id)\r\n                        .single();\r\n                    result.author = author;\r\n                }\r\n            } catch (authorError) {\r\n                // Ignore author fetch errors - not critical\r\n                console.warn(\"Could not fetch author:\", authorError);\r\n            }\r\n        }\r\n\r\n        return result;\r\n\r\n    } catch (e) {\r\n        console.error(\"Error fetching detailed lesson data:\", e);\r\n        return { error: \"Failed to load lesson details\" };\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAEO,eAAe,wBAClB,QAAwB,EACxB,QAAgB,EAChB,QAAgB,EAChB,MAAe;IAEf,6BAA6B;IAC7B,MAAM,EAAE,MAAM,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SACjC,IAAI,CAAC,WACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,UACT,MAAM;IAEX,IAAI,SAAS,CAAC,QAAQ;QAClB,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO;YAAE,OAAO;QAAmB;IACvC;IAEA,MAAM,SAAc;QAAE;IAAO;IAE7B,yCAAyC;IACzC,IAAI;QACA,IAAI,OAAO,YAAY,KAAK,UAAU,OAAO,OAAO,EAAE;YAClD,kBAAkB;YAClB,MAAM,CAAC,YAAY,eAAe,GAAG,MAAM,QAAQ,GAAG,CAAC;gBACnD,SAAS,IAAI,CAAC,SAAS,MAAM,CAAC,KAAK,EAAE,CAAC,MAAM,OAAO,OAAO,EAAE,MAAM;gBAClE,SAAS,IAAI,CAAC,YAAY,MAAM,CAAC,+BAA+B,EAAE,CAAC,WAAW,OAAO,OAAO;aAC/F;YAED,OAAO,IAAI,GAAG,WAAW,IAAI;YAE7B,2BAA2B;YAC3B,MAAM,WAAW,eAAe,IAAI,IAAI,EAAE;YAC1C,OAAO,cAAc,GAAG,SAAS,MAAM,CAAC,CAAC,KAAa,UAAiB,MAAM,CAAC,QAAQ,SAAS,EAAE,UAAU,CAAC,GAAG;YAE/G,sBAAsB;YACtB,IAAI,QAAQ;gBACR,MAAM,EAAE,MAAM,QAAQ,EAAE,GAAG,MAAM,SAC5B,IAAI,CAAC,iBACL,MAAM,CAAC,KACP,EAAE,CAAC,WAAW,OAAO,OAAO,EAC5B,EAAE,CAAC,cAAc;gBACtB,OAAO,QAAQ,GAAG,YAAY,EAAE;YACpC;QACJ;QAEA,uEAAuE;QACvE,IAAI,UAAU;YACV,IAAI;gBACA,MAAM,EAAE,MAAM,MAAM,EAAE,GAAG,MAAM,SAC1B,IAAI,CAAC,WACL,MAAM,CAAC,WACP,EAAE,CAAC,MAAM,UACT,MAAM;gBAEX,IAAI,QAAQ,SAAS;oBACjB,MAAM,EAAE,MAAM,MAAM,EAAE,GAAG,MAAM,SAC1B,IAAI,CAAC,YACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,OAAO,OAAO,EACvB,MAAM;oBACX,OAAO,MAAM,GAAG;gBACpB;YACJ,EAAE,OAAO,aAAa;gBAClB,4CAA4C;gBAC5C,QAAQ,IAAI,CAAC,2BAA2B;YAC5C;QACJ;QAEA,OAAO;IAEX,EAAE,OAAO,GAAG;QACR,QAAQ,KAAK,CAAC,wCAAwC;QACtD,OAAO;YAAE,OAAO;QAAgC;IACpD;AACJ"}},
    {"offset": {"line": 404, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/hooks/usePrefetchCourse.ts"],"sourcesContent":["import { useQueryClient } from \"@tanstack/react-query\";\r\nimport { createClient } from \"@/lib/supabase/client\";\r\nimport { fetchLessonDetailedData } from \"@/lib/data/lesson\";\r\n\r\n/**\r\n * Hook to prefetch course data on hover for instant navigation\r\n * \r\n * Prefetches:\r\n * 1. Course structure (modules + lessons)\r\n * 2. First lesson data\r\n * \r\n * Result: Dashboard → Learn navigation feels instant (0ms perceived delay)\r\n */\r\nexport function usePrefetchCourse() {\r\n    const queryClient = useQueryClient();\r\n\r\n    const prefetchCourse = async (courseId: string) => {\r\n        try {\r\n            const supabase = createClient();\r\n\r\n            // 1. Prefetch course structure (modules + lessons)\r\n            await queryClient.prefetchQuery({\r\n                queryKey: ['course-structure', courseId],\r\n                queryFn: async () => {\r\n                    const { data, error } = await supabase.rpc(\r\n                        'get_course_structure',\r\n                        { target_course_id: courseId }\r\n                    );\r\n\r\n                    if (error) {\r\n                        // Fallback to standard query\r\n                        const { data: fallbackData } = await supabase\r\n                            .from('modules')\r\n                            .select(`\r\n                                id, \r\n                                title, \r\n                                module_order,\r\n                                lessons (\r\n                                    id, \r\n                                    title, \r\n                                    module_id, \r\n                                    content_type, \r\n                                    video_duration, \r\n                                    is_free_preview, \r\n                                    lesson_order, \r\n                                    is_live,\r\n                                    created_at, \r\n                                    updated_at\r\n                                )\r\n                            `)\r\n                            .eq('course_id', courseId)\r\n                            .order('module_order', { ascending: true });\r\n\r\n                        return fallbackData?.map((module: any) => ({\r\n                            ...module,\r\n                            lessons: (module.lessons || []).sort((a: any, b: any) => a.lesson_order - b.lesson_order)\r\n                        }));\r\n                    }\r\n\r\n                    return data;\r\n                },\r\n                staleTime: 1000 * 60 * 5, // 5 minutes\r\n            });\r\n\r\n            // 2. Get first lesson and prefetch its data\r\n            const structure = queryClient.getQueryData(['course-structure', courseId]) as any[];\r\n            if (structure?.[0]?.lessons?.[0]) {\r\n                const firstLesson = structure[0].lessons[0];\r\n                const { data: { user } } = await supabase.auth.getUser();\r\n\r\n                if (user) {\r\n                    // Prefetch first lesson detailed data\r\n                    await queryClient.prefetchQuery({\r\n                        queryKey: ['lesson', firstLesson.id, courseId],\r\n                        queryFn: () => fetchLessonDetailedData(\r\n                            supabase,\r\n                            firstLesson.id,\r\n                            courseId,\r\n                            user.id\r\n                        ),\r\n                        staleTime: 1000 * 60 * 10, // 10 minutes\r\n                    });\r\n                }\r\n            }\r\n        } catch (error) {\r\n            // Silent fail - prefetching is optional enhancement\r\n            // Navigation will still work, just not instant\r\n            console.debug('Prefetch failed:', error);\r\n        }\r\n    };\r\n\r\n    return { prefetchCourse };\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAWO,SAAS;IACZ,MAAM,cAAc,IAAA,gNAAc;IAElC,MAAM,iBAAiB,OAAO;QAC1B,IAAI;YACA,MAAM,WAAW,IAAA,iJAAY;YAE7B,mDAAmD;YACnD,MAAM,YAAY,aAAa,CAAC;gBAC5B,UAAU;oBAAC;oBAAoB;iBAAS;gBACxC,SAAS;oBACL,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,GAAG,CACtC,wBACA;wBAAE,kBAAkB;oBAAS;oBAGjC,IAAI,OAAO;wBACP,6BAA6B;wBAC7B,MAAM,EAAE,MAAM,YAAY,EAAE,GAAG,MAAM,SAChC,IAAI,CAAC,WACL,MAAM,CAAC,CAAC;;;;;;;;;;;;;;;;4BAgBT,CAAC,EACA,EAAE,CAAC,aAAa,UAChB,KAAK,CAAC,gBAAgB;4BAAE,WAAW;wBAAK;wBAE7C,OAAO,cAAc,IAAI,CAAC,SAAgB,CAAC;gCACvC,GAAG,MAAM;gCACT,SAAS,CAAC,OAAO,OAAO,IAAI,EAAE,EAAE,IAAI,CAAC,CAAC,GAAQ,IAAW,EAAE,YAAY,GAAG,EAAE,YAAY;4BAC5F,CAAC;oBACL;oBAEA,OAAO;gBACX;gBACA,WAAW,OAAO,KAAK;YAC3B;YAEA,4CAA4C;YAC5C,MAAM,YAAY,YAAY,YAAY,CAAC;gBAAC;gBAAoB;aAAS;YACzE,IAAI,WAAW,CAAC,EAAE,EAAE,SAAS,CAAC,EAAE,EAAE;gBAC9B,MAAM,cAAc,SAAS,CAAC,EAAE,CAAC,OAAO,CAAC,EAAE;gBAC3C,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;gBAEtD,IAAI,MAAM;oBACN,sCAAsC;oBACtC,MAAM,YAAY,aAAa,CAAC;wBAC5B,UAAU;4BAAC;4BAAU,YAAY,EAAE;4BAAE;yBAAS;wBAC9C,SAAS,IAAM,IAAA,wJAAuB,EAClC,UACA,YAAY,EAAE,EACd,UACA,KAAK,EAAE;wBAEX,WAAW,OAAO,KAAK;oBAC3B;gBACJ;YACJ;QACJ,EAAE,OAAO,OAAO;YACZ,oDAAoD;YACpD,+CAA+C;YAC/C,QAAQ,KAAK,CAAC,oBAAoB;QACtC;IACJ;IAEA,OAAO;QAAE;IAAe;AAC5B"}},
    {"offset": {"line": 494, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/actions/checkEnrollmentStatus.ts"],"sourcesContent":["// ============================================================================\r\n// ENROLLMENT STATUS & EXPIRY CHECK\r\n// Server actions to check enrollment status and expiry\r\n// ============================================================================\r\n\r\n'use server';\r\n\r\nimport { createClient } from '@/lib/supabase/server';\r\n\r\nexport interface EnrollmentStatus {\r\n    hasAccess: boolean;\r\n    status: 'active' | 'expired' | 'none';\r\n    expiresAt: string | null;\r\n    daysRemaining: number | null;\r\n    isExpiringSoon: boolean;\r\n    isExpired: boolean;\r\n}\r\n\r\n/**\r\n * Check if student has active course access\r\n */\r\nexport async function checkCourseAccess(courseId: string): Promise<EnrollmentStatus> {\r\n    const supabase = await createClient();\r\n\r\n    const { data: { user } } = await supabase.auth.getUser();\r\n\r\n    if (!user) {\r\n        return {\r\n            hasAccess: false,\r\n            status: 'none',\r\n            expiresAt: null,\r\n            daysRemaining: null,\r\n            isExpiringSoon: false,\r\n            isExpired: false\r\n        };\r\n    }\r\n\r\n    try {\r\n        // Get enrollment with expiry info\r\n        const { data: enrollment } = await supabase\r\n            .from('enrollments')\r\n            .select('status, expires_at')\r\n            .eq('user_id', user.id)\r\n            .eq('course_id', courseId)\r\n            .single();\r\n\r\n        if (!enrollment) {\r\n            return {\r\n                hasAccess: false,\r\n                status: 'none',\r\n                expiresAt: null,\r\n                daysRemaining: null,\r\n                isExpiringSoon: false,\r\n                isExpired: false\r\n            };\r\n        }\r\n\r\n        const now = new Date();\r\n        const expiryDate = enrollment.expires_at ? new Date(enrollment.expires_at) : null;\r\n\r\n        let daysRemaining = null;\r\n        let isExpired = false;\r\n        let isExpiringSoon = false;\r\n        let hasAccess = false;\r\n\r\n        if (expiryDate) {\r\n            const diffTime = expiryDate.getTime() - now.getTime();\r\n            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n\r\n            daysRemaining = diffDays;\r\n            isExpired = diffDays < 0;\r\n            isExpiringSoon = diffDays > 0 && diffDays <= 7;\r\n            hasAccess = enrollment.status === 'active' && !isExpired;\r\n        } else {\r\n            // Lifetime access\r\n            hasAccess = enrollment.status === 'active';\r\n        }\r\n\r\n        return {\r\n            hasAccess,\r\n            status: isExpired ? 'expired' : enrollment.status as any,\r\n            expiresAt: enrollment.expires_at,\r\n            daysRemaining,\r\n            isExpiringSoon,\r\n            isExpired\r\n        };\r\n    } catch (error) {\r\n        console.error('Error checking course access:', error);\r\n        return {\r\n            hasAccess: false,\r\n            status: 'none',\r\n            expiresAt: null,\r\n            daysRemaining: null,\r\n            isExpiringSoon: false,\r\n            isExpired: false\r\n        };\r\n    }\r\n}\r\n\r\n/**\r\n * Get all user's enrollments with expiry status\r\n */\r\nexport async function getUserEnrollmentsWithExpiry() {\r\n    const supabase = await createClient();\r\n\r\n    const { data: { user } } = await supabase.auth.getUser();\r\n    if (!user) return { enrollments: [] };\r\n\r\n    try {\r\n        const { data: enrollments } = await supabase\r\n            .from('enrollments')\r\n            .select(`\r\n        *,\r\n        courses (\r\n          id,\r\n          title,\r\n          thumbnail_url,\r\n          price\r\n        )\r\n      `)\r\n            .eq('user_id', user.id);\r\n\r\n        // Process each enrollment to check expiry status\r\n        const processedEnrollments = enrollments?.map(enrollment => {\r\n            const now = new Date();\r\n            const expiryDate = enrollment.expires_at ? new Date(enrollment.expires_at) : null;\r\n\r\n            let daysRemaining = null;\r\n            let isExpired = false;\r\n            let isExpiringSoon = false;\r\n            let urgencyLevel: 'CRITICAL' | 'HIGH' | 'MEDIUM' | 'LOW' | null = null;\r\n\r\n            if (expiryDate) {\r\n                const diffTime = expiryDate.getTime() - now.getTime();\r\n                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n\r\n                daysRemaining = diffDays;\r\n                isExpired = diffDays < 0;\r\n                isExpiringSoon = diffDays > 0 && diffDays <= 15; // Show badge for 15 days or less\r\n\r\n                if (diffDays <= 1 && diffDays > 0) urgencyLevel = 'CRITICAL';\r\n                else if (diffDays <= 3 && diffDays > 0) urgencyLevel = 'HIGH';\r\n                else if (diffDays <= 7 && diffDays > 0) urgencyLevel = 'MEDIUM';\r\n                else if (diffDays > 7 && diffDays <= 15) urgencyLevel = 'LOW'; // Show up to 15 days\r\n            }\r\n\r\n            return {\r\n                ...enrollment,\r\n                daysRemaining,\r\n                isExpired,\r\n                isExpiringSoon,\r\n                urgencyLevel,\r\n                hasAccess: enrollment.status === 'active' && !isExpired\r\n            };\r\n        }) || [];\r\n\r\n        return { enrollments: processedEnrollments };\r\n    } catch (error) {\r\n        console.error('Error fetching enrollments:', error);\r\n        return { enrollments: [] };\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;IAsGsB,+BAAA,WAAA,GAAA,IAAA,kOAAA,EAAA,8CAAA,4LAAA,EAAA,KAAA,GAAA,gNAAA,EAAA"}},
    {"offset": {"line": 509, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/hooks/useEnrollmentsWithExpiry.ts"],"sourcesContent":["import { useQuery } from '@tanstack/react-query';\r\nimport { getUserEnrollmentsWithExpiry } from '@/actions/checkEnrollmentStatus';\r\n\r\nexport function useEnrollmentsWithExpiry() {\r\n    return useQuery({\r\n        queryKey: ['enrollments-with-expiry'],\r\n        queryFn: async () => {\r\n            const result = await getUserEnrollmentsWithExpiry();\r\n            return result.enrollments;\r\n        },\r\n        staleTime: 30000, // 30 seconds\r\n    });\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS;IACZ,OAAO,IAAA,+LAAQ,EAAC;QACZ,UAAU;YAAC;SAA0B;QACrC,SAAS;YACL,MAAM,SAAS,MAAM,IAAA,uLAA4B;YACjD,OAAO,OAAO,WAAW;QAC7B;QACA,WAAW;IACf;AACJ"}},
    {"offset": {"line": 533, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/hooks/student/useAllTestSeries.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { createClient } from \"@/lib/supabase/client\";\r\nimport { useCurrentUser } from \"./useCurrentUser\";\r\n\r\ninterface TestSeries {\r\n    id: string;\r\n    title: string;\r\n    description: string | null;\r\n    thumbnail_url: string | null;\r\n    price: number;\r\n    course_type: string;\r\n    is_published: boolean;\r\n    created_at: string;\r\n    instructor_name: string;\r\n    is_enrolled: boolean;\r\n    total_lessons: number;\r\n}\r\n\r\nexport function useAllTestSeries() {\r\n    const { data: user } = useCurrentUser();\r\n\r\n    return useQuery({\r\n        queryKey: [\"all-test-series\", user?.id],\r\n        queryFn: async (): Promise<TestSeries[]> => {\r\n            const supabase = createClient();\r\n\r\n            // Use RPC function for optimized query\r\n            const { data, error } = await supabase\r\n                .rpc('get_published_courses_with_meta', {\r\n                    target_user_id: user?.id || null,\r\n                    p_limit: 50,\r\n                    p_offset: 0\r\n                });\r\n\r\n            if (error) {\r\n                console.error('Error fetching test series:', error);\r\n                throw error;\r\n            }\r\n\r\n            // Filter for test series only\r\n            const testSeries = (data || []).filter((item: any) => item.course_type === 'test_series');\r\n\r\n            return testSeries as TestSeries[];\r\n        },\r\n        // Remove enabled condition - should work even without user\r\n        staleTime: 1000 * 60 * 5, // 5 minutes\r\n    });\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;AAoBO,SAAS;IACZ,MAAM,EAAE,MAAM,IAAI,EAAE,GAAG,IAAA,4JAAc;IAErC,OAAO,IAAA,+LAAQ,EAAC;QACZ,UAAU;YAAC;YAAmB,MAAM;SAAG;QACvC,SAAS;YACL,MAAM,WAAW,IAAA,iJAAY;YAE7B,uCAAuC;YACvC,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SACzB,GAAG,CAAC,mCAAmC;gBACpC,gBAAgB,MAAM,MAAM;gBAC5B,SAAS;gBACT,UAAU;YACd;YAEJ,IAAI,OAAO;gBACP,QAAQ,KAAK,CAAC,+BAA+B;gBAC7C,MAAM;YACV;YAEA,8BAA8B;YAC9B,MAAM,aAAa,CAAC,QAAQ,EAAE,EAAE,MAAM,CAAC,CAAC,OAAc,KAAK,WAAW,KAAK;YAE3E,OAAO;QACX;QACA,2DAA2D;QAC3D,WAAW,OAAO,KAAK;IAC3B;AACJ"}},
    {"offset": {"line": 575, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/lib/queryKeys.ts"],"sourcesContent":["/**\r\n * Centralized Query Key Factory\r\n * Provides type-safe, consistent query keys across the application\r\n */\r\n\r\nexport const queryKeys = {\r\n    // Auth\r\n    auth: {\r\n        user: () => [\"auth\", \"user\"] as const,\r\n        session: () => [\"auth\", \"session\"] as const,\r\n    },\r\n\r\n    // Courses\r\n    courses: {\r\n        all: () => [\"courses\"] as const,\r\n        lists: () => [\"courses\", \"list\"] as const,\r\n        list: (filters: string) => [\"courses\", \"list\", filters] as const,\r\n        details: () => [\"courses\", \"detail\"] as const,\r\n        detail: (id: string) => [\"courses\", \"detail\", id] as const,\r\n        enrolled: (userId: string) => [\"courses\", \"enrolled\", userId] as const,\r\n    },\r\n\r\n    // Exams\r\n    exams: {\r\n        all: () => [\"exams\"] as const,\r\n        lists: () => [\"exams\", \"list\"] as const,\r\n        list: (filters?: string) => [\"exams\", \"list\", { filters }] as const,\r\n        details: () => [\"exams\", \"detail\"] as const,\r\n        detail: (id: string) => [\"exams\", \"detail\", id] as const,\r\n        sections: (examId: string) => [\"exams\", examId, \"sections\"] as const,\r\n        questions: (sectionId: string) => [\"sections\", sectionId, \"questions\"] as const,\r\n    },\r\n\r\n    // Attempts\r\n    attempts: {\r\n        all: () => [\"attempts\"] as const,\r\n        lists: () => [\"attempts\", \"list\"] as const,\r\n        list: (userId: string) => [\"attempts\", \"list\", userId] as const,\r\n        details: () => [\"attempts\", \"detail\"] as const,\r\n        detail: (id: string) => [\"attempts\", \"detail\", id] as const,\r\n        active: (userId: string, examId: string) =>\r\n            [\"attempts\", \"active\", userId, examId] as const,\r\n    },\r\n\r\n    // Results\r\n    results: {\r\n        all: () => [\"results\"] as const,\r\n        lists: () => [\"results\", \"list\"] as const,\r\n        list: (userId: string) => [\"results\", \"list\", userId] as const,\r\n        details: () => [\"results\", \"detail\"] as const,\r\n        detail: (id: string) => [\"results\", \"detail\", id] as const,\r\n        byAttempt: (attemptId: string) => [\"results\", \"attempt\", attemptId] as const,\r\n    },\r\n\r\n    // Test Series\r\n    testSeries: {\r\n        all: () => [\"testSeries\"] as const,\r\n        lists: () => [\"testSeries\", \"list\"] as const,\r\n        list: (filters?: string) => [\"testSeries\", \"list\", { filters }] as const,\r\n        details: () => [\"testSeries\", \"detail\"] as const,\r\n        detail: (id: string) => [\"testSeries\", \"detail\", id] as const,\r\n        enrolled: (userId: string) => [\"testSeries\", \"enrolled\", userId] as const,\r\n        exams: (seriesId: string) => [\"testSeries\", seriesId, \"exams\"] as const,\r\n    },\r\n\r\n    // Enrollments\r\n    enrollments: {\r\n        all: () => [\"enrollments\"] as const,\r\n        course: (userId: string, courseId: string) =>\r\n            [\"enrollments\", \"course\", userId, courseId] as const,\r\n        testSeries: (userId: string, seriesId: string) =>\r\n            [\"enrollments\", \"testSeries\", userId, seriesId] as const,\r\n        user: (userId: string) => [\"enrollments\", \"user\", userId] as const,\r\n    },\r\n\r\n    // Payments\r\n    payments: {\r\n        all: () => [\"payments\"] as const,\r\n        lists: () => [\"payments\", \"list\"] as const,\r\n        list: (userId?: string) => [\"payments\", \"list\", { userId }] as const,\r\n        details: () => [\"payments\", \"detail\"] as const,\r\n        detail: (id: string) => [\"payments\", \"detail\", id] as const,\r\n        status: (transactionId: string) => [\"payments\", \"status\", transactionId] as const,\r\n    },\r\n\r\n    // Admin\r\n    admin: {\r\n        students: () => [\"admin\", \"students\"] as const,\r\n        analytics: () => [\"admin\", \"analytics\"] as const,\r\n        questionBank: (filters?: string) => [\"admin\", \"questionBank\", { filters }] as const,\r\n    },\r\n\r\n    // Rewards\r\n    rewards: {\r\n        user: (userId: string) => [\"rewards\", \"user\", userId] as const,\r\n        leaderboard: () => [\"rewards\", \"leaderboard\"] as const,\r\n    },\r\n} as const;\r\n\r\n// Type helper to extract query key types\r\nexport type QueryKeys = typeof queryKeys;\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 843, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/lib/invalidations.ts"],"sourcesContent":["import { QueryClient } from \"@tanstack/react-query\";\r\nimport { queryKeys } from \"./queryKeys\";\r\n\r\n/**\r\n * Invalidation Helpers\r\n * Provides consistent query invalidation patterns\r\n */\r\n\r\nexport const invalidations = {\r\n    /**\r\n     * After course enrollment\r\n     */\r\n    afterCourseEnrollment: (queryClient: QueryClient, userId: string, courseId: string) => {\r\n        queryClient.invalidateQueries({ queryKey: queryKeys.enrollments.all() });\r\n        queryClient.invalidateQueries({ queryKey: queryKeys.enrollments.user(userId) });\r\n        queryClient.invalidateQueries({ queryKey: queryKeys.courses.enrolled(userId) });\r\n        queryClient.invalidateQueries({ queryKey: queryKeys.courses.detail(courseId) });\r\n    },\r\n\r\n    /**\r\n     * After test series enrollment\r\n     */\r\n    afterTestSeriesEnrollment: (\r\n        queryClient: QueryClient,\r\n        userId: string,\r\n        seriesId: string\r\n    ) => {\r\n        queryClient.invalidateQueries({ queryKey: queryKeys.enrollments.all() });\r\n        queryClient.invalidateQueries({ queryKey: queryKeys.enrollments.user(userId) });\r\n        queryClient.invalidateQueries({ queryKey: queryKeys.testSeries.enrolled(userId) });\r\n        queryClient.invalidateQueries({ queryKey: queryKeys.testSeries.detail(seriesId) });\r\n    },\r\n\r\n    /**\r\n     * After exam submission\r\n     */\r\n    afterExamSubmission: (queryClient: QueryClient, userId: string, attemptId: string) => {\r\n        queryClient.invalidateQueries({ queryKey: queryKeys.attempts.all() });\r\n        queryClient.invalidateQueries({ queryKey: queryKeys.attempts.list(userId) });\r\n        queryClient.invalidateQueries({ queryKey: queryKeys.attempts.detail(attemptId) });\r\n        queryClient.invalidateQueries({ queryKey: queryKeys.results.all() });\r\n        queryClient.invalidateQueries({ queryKey: queryKeys.results.list(userId) });\r\n        queryClient.invalidateQueries({ queryKey: queryKeys.rewards.user(userId) });\r\n    },\r\n\r\n    /**\r\n     * After payment success\r\n     */\r\n    afterPaymentSuccess: (queryClient: QueryClient, userId: string) => {\r\n        queryClient.invalidateQueries({ queryKey: queryKeys.payments.all() });\r\n        queryClient.invalidateQueries({ queryKey: queryKeys.payments.list(userId) });\r\n        queryClient.invalidateQueries({ queryKey: queryKeys.enrollments.all() });\r\n        queryClient.invalidateQueries({ queryKey: queryKeys.enrollments.user(userId) });\r\n        queryClient.invalidateQueries({ queryKey: queryKeys.courses.enrolled(userId) });\r\n        queryClient.invalidateQueries({ queryKey: queryKeys.testSeries.enrolled(userId) });\r\n    },\r\n\r\n    /**\r\n     * After exam creation/update (admin)\r\n     */\r\n    afterExamMutation: (queryClient: QueryClient, examId?: string) => {\r\n        queryClient.invalidateQueries({ queryKey: queryKeys.exams.all() });\r\n        queryClient.invalidateQueries({ queryKey: queryKeys.exams.lists() });\r\n        if (examId) {\r\n            queryClient.invalidateQueries({ queryKey: queryKeys.exams.detail(examId) });\r\n        }\r\n    },\r\n\r\n    /**\r\n     * After course creation/update (admin)\r\n     */\r\n    afterCourseMutation: (queryClient: QueryClient, courseId?: string) => {\r\n        queryClient.invalidateQueries({ queryKey: queryKeys.courses.all() });\r\n        queryClient.invalidateQueries({ queryKey: queryKeys.courses.lists() });\r\n        if (courseId) {\r\n            queryClient.invalidateQueries({ queryKey: queryKeys.courses.detail(courseId) });\r\n        }\r\n    },\r\n\r\n    /**\r\n     * After question bank update (admin)\r\n     */\r\n    afterQuestionBankUpdate: (queryClient: QueryClient) => {\r\n        queryClient.invalidateQueries({ queryKey: queryKeys.admin.questionBank() });\r\n    },\r\n};\r\n"],"names":[],"mappings":";;;;AACA;;AAOO,MAAM,gBAAgB;IACzB;;KAEC,GACD,uBAAuB,CAAC,aAA0B,QAAgB;QAC9D,YAAY,iBAAiB,CAAC;YAAE,UAAU,qIAAS,CAAC,WAAW,CAAC,GAAG;QAAG;QACtE,YAAY,iBAAiB,CAAC;YAAE,UAAU,qIAAS,CAAC,WAAW,CAAC,IAAI,CAAC;QAAQ;QAC7E,YAAY,iBAAiB,CAAC;YAAE,UAAU,qIAAS,CAAC,OAAO,CAAC,QAAQ,CAAC;QAAQ;QAC7E,YAAY,iBAAiB,CAAC;YAAE,UAAU,qIAAS,CAAC,OAAO,CAAC,MAAM,CAAC;QAAU;IACjF;IAEA;;KAEC,GACD,2BAA2B,CACvB,aACA,QACA;QAEA,YAAY,iBAAiB,CAAC;YAAE,UAAU,qIAAS,CAAC,WAAW,CAAC,GAAG;QAAG;QACtE,YAAY,iBAAiB,CAAC;YAAE,UAAU,qIAAS,CAAC,WAAW,CAAC,IAAI,CAAC;QAAQ;QAC7E,YAAY,iBAAiB,CAAC;YAAE,UAAU,qIAAS,CAAC,UAAU,CAAC,QAAQ,CAAC;QAAQ;QAChF,YAAY,iBAAiB,CAAC;YAAE,UAAU,qIAAS,CAAC,UAAU,CAAC,MAAM,CAAC;QAAU;IACpF;IAEA;;KAEC,GACD,qBAAqB,CAAC,aAA0B,QAAgB;QAC5D,YAAY,iBAAiB,CAAC;YAAE,UAAU,qIAAS,CAAC,QAAQ,CAAC,GAAG;QAAG;QACnE,YAAY,iBAAiB,CAAC;YAAE,UAAU,qIAAS,CAAC,QAAQ,CAAC,IAAI,CAAC;QAAQ;QAC1E,YAAY,iBAAiB,CAAC;YAAE,UAAU,qIAAS,CAAC,QAAQ,CAAC,MAAM,CAAC;QAAW;QAC/E,YAAY,iBAAiB,CAAC;YAAE,UAAU,qIAAS,CAAC,OAAO,CAAC,GAAG;QAAG;QAClE,YAAY,iBAAiB,CAAC;YAAE,UAAU,qIAAS,CAAC,OAAO,CAAC,IAAI,CAAC;QAAQ;QACzE,YAAY,iBAAiB,CAAC;YAAE,UAAU,qIAAS,CAAC,OAAO,CAAC,IAAI,CAAC;QAAQ;IAC7E;IAEA;;KAEC,GACD,qBAAqB,CAAC,aAA0B;QAC5C,YAAY,iBAAiB,CAAC;YAAE,UAAU,qIAAS,CAAC,QAAQ,CAAC,GAAG;QAAG;QACnE,YAAY,iBAAiB,CAAC;YAAE,UAAU,qIAAS,CAAC,QAAQ,CAAC,IAAI,CAAC;QAAQ;QAC1E,YAAY,iBAAiB,CAAC;YAAE,UAAU,qIAAS,CAAC,WAAW,CAAC,GAAG;QAAG;QACtE,YAAY,iBAAiB,CAAC;YAAE,UAAU,qIAAS,CAAC,WAAW,CAAC,IAAI,CAAC;QAAQ;QAC7E,YAAY,iBAAiB,CAAC;YAAE,UAAU,qIAAS,CAAC,OAAO,CAAC,QAAQ,CAAC;QAAQ;QAC7E,YAAY,iBAAiB,CAAC;YAAE,UAAU,qIAAS,CAAC,UAAU,CAAC,QAAQ,CAAC;QAAQ;IACpF;IAEA;;KAEC,GACD,mBAAmB,CAAC,aAA0B;QAC1C,YAAY,iBAAiB,CAAC;YAAE,UAAU,qIAAS,CAAC,KAAK,CAAC,GAAG;QAAG;QAChE,YAAY,iBAAiB,CAAC;YAAE,UAAU,qIAAS,CAAC,KAAK,CAAC,KAAK;QAAG;QAClE,IAAI,QAAQ;YACR,YAAY,iBAAiB,CAAC;gBAAE,UAAU,qIAAS,CAAC,KAAK,CAAC,MAAM,CAAC;YAAQ;QAC7E;IACJ;IAEA;;KAEC,GACD,qBAAqB,CAAC,aAA0B;QAC5C,YAAY,iBAAiB,CAAC;YAAE,UAAU,qIAAS,CAAC,OAAO,CAAC,GAAG;QAAG;QAClE,YAAY,iBAAiB,CAAC;YAAE,UAAU,qIAAS,CAAC,OAAO,CAAC,KAAK;QAAG;QACpE,IAAI,UAAU;YACV,YAAY,iBAAiB,CAAC;gBAAE,UAAU,qIAAS,CAAC,OAAO,CAAC,MAAM,CAAC;YAAU;QACjF;IACJ;IAEA;;KAEC,GACD,yBAAyB,CAAC;QACtB,YAAY,iBAAiB,CAAC;YAAE,UAAU,qIAAS,CAAC,KAAK,CAAC,YAAY;QAAG;IAC7E;AACJ"}},
    {"offset": {"line": 968, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/hooks/mutations/useEnrollCourse.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { createClient } from \"@/lib/supabase/client\";\r\nimport { invalidations } from \"@/lib/invalidations\";\r\nimport toast from \"react-hot-toast\";\r\n\r\ninterface EnrollCourseParams {\r\n    courseId: string;\r\n    userId: string;\r\n}\r\n\r\nexport function useEnrollCourse() {\r\n    const queryClient = useQueryClient();\r\n\r\n    return useMutation({\r\n        mutationFn: async ({ courseId, userId }: EnrollCourseParams) => {\r\n            const supabase = createClient();\r\n\r\n            // Check if already enrolled - use maybeSingle() to avoid 406 error\r\n            const { data: existingEnrollment } = await supabase\r\n                .from(\"enrollments\")\r\n                .select(\"id, user_id, course_id\")\r\n                .eq(\"user_id\", userId)\r\n                .eq(\"course_id\", courseId)\r\n                .maybeSingle();\r\n\r\n            if (existingEnrollment) {\r\n                throw new Error(\"You are already enrolled in this course\");\r\n            }\r\n\r\n            // Create enrollment\r\n            const { data, error } = await supabase\r\n                .from(\"enrollments\")\r\n                .insert({\r\n                    user_id: userId,\r\n                    course_id: courseId,\r\n                    enrolled_at: new Date().toISOString(),\r\n                })\r\n                .select()\r\n                .single();\r\n\r\n            if (error) throw error;\r\n            return data;\r\n        },\r\n        onSuccess: (_, variables) => {\r\n            invalidations.afterCourseEnrollment(\r\n                queryClient,\r\n                variables.userId,\r\n                variables.courseId\r\n            );\r\n            toast.success(\"Successfully enrolled in course!\");\r\n        },\r\n        onError: (error: Error) => {\r\n            toast.error(error.message || \"Failed to enroll in course\");\r\n        },\r\n    });\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AAAA;AACA;AACA;AACA;AALA;;;;;AAYO,SAAS;IACZ,MAAM,cAAc,IAAA,gNAAc;IAElC,OAAO,IAAA,qMAAW,EAAC;QACf,YAAY,OAAO,EAAE,QAAQ,EAAE,MAAM,EAAsB;YACvD,MAAM,WAAW,IAAA,iJAAY;YAE7B,mEAAmE;YACnE,MAAM,EAAE,MAAM,kBAAkB,EAAE,GAAG,MAAM,SACtC,IAAI,CAAC,eACL,MAAM,CAAC,0BACP,EAAE,CAAC,WAAW,QACd,EAAE,CAAC,aAAa,UAChB,WAAW;YAEhB,IAAI,oBAAoB;gBACpB,MAAM,IAAI,MAAM;YACpB;YAEA,oBAAoB;YACpB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SACzB,IAAI,CAAC,eACL,MAAM,CAAC;gBACJ,SAAS;gBACT,WAAW;gBACX,aAAa,IAAI,OAAO,WAAW;YACvC,GACC,MAAM,GACN,MAAM;YAEX,IAAI,OAAO,MAAM;YACjB,OAAO;QACX;QACA,WAAW,CAAC,GAAG;YACX,6IAAa,CAAC,qBAAqB,CAC/B,aACA,UAAU,MAAM,EAChB,UAAU,QAAQ;YAEtB,0KAAK,CAAC,OAAO,CAAC;QAClB;QACA,SAAS,CAAC;YACN,0KAAK,CAAC,KAAK,CAAC,MAAM,OAAO,IAAI;QACjC;IACJ;AACJ"}},
    {"offset": {"line": 1014, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/hooks/mutations/useSubmitExam.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { createClient } from \"@/lib/supabase/client\";\r\nimport { invalidations } from \"@/lib/invalidations\";\r\nimport toast from \"react-hot-toast\";\r\n\r\ninterface SubmitExamParams {\r\n    attemptId: string;\r\n    userId: string;\r\n    responses: Record<string, any>;\r\n}\r\n\r\nexport function useSubmitExam() {\r\n    const queryClient = useQueryClient();\r\n    const supabase = createClient();\r\n\r\n    return useMutation({\r\n        mutationFn: async ({ attemptId, userId, responses }: SubmitExamParams) => {\r\n            // Start a transaction-like operation\r\n            // 1. Update attempt status\r\n            const { error: attemptError } = await supabase\r\n                .from(\"exam_attempts\")\r\n                .update({\r\n                    status: \"submitted\",\r\n                    submitted_at: new Date().toISOString(),\r\n                })\r\n                .eq(\"id\", attemptId);\r\n\r\n            if (attemptError) throw attemptError;\r\n\r\n            // 2. Save all responses\r\n            const responseEntries = Object.entries(responses).map(([questionId, answer]) => ({\r\n                attempt_id: attemptId,\r\n                question_id: questionId,\r\n                selected_answer: answer,\r\n                answered_at: new Date().toISOString(),\r\n            }));\r\n\r\n            if (responseEntries.length > 0) {\r\n                const { error: responsesError } = await supabase\r\n                    .from(\"responses\")\r\n                    .upsert(responseEntries, {\r\n                        onConflict: \"attempt_id,question_id\",\r\n                    });\r\n\r\n                if (responsesError) throw responsesError;\r\n            }\r\n\r\n            // 3. Trigger result calculation (this should be done server-side ideally)\r\n            // For now, we'll just return success and let the server handle it\r\n            return { attemptId, success: true };\r\n        },\r\n        onSuccess: (_, variables) => {\r\n            invalidations.afterExamSubmission(\r\n                queryClient,\r\n                variables.userId,\r\n                variables.attemptId\r\n            );\r\n            toast.success(\"Exam submitted successfully!\");\r\n        },\r\n        onError: (error: Error) => {\r\n            toast.error(error.message || \"Failed to submit exam\");\r\n        },\r\n    });\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AAAA;AACA;AACA;AACA;AALA;;;;;AAaO,SAAS;IACZ,MAAM,cAAc,IAAA,gNAAc;IAClC,MAAM,WAAW,IAAA,iJAAY;IAE7B,OAAO,IAAA,qMAAW,EAAC;QACf,YAAY,OAAO,EAAE,SAAS,EAAE,MAAM,EAAE,SAAS,EAAoB;YACjE,qCAAqC;YACrC,2BAA2B;YAC3B,MAAM,EAAE,OAAO,YAAY,EAAE,GAAG,MAAM,SACjC,IAAI,CAAC,iBACL,MAAM,CAAC;gBACJ,QAAQ;gBACR,cAAc,IAAI,OAAO,WAAW;YACxC,GACC,EAAE,CAAC,MAAM;YAEd,IAAI,cAAc,MAAM;YAExB,wBAAwB;YACxB,MAAM,kBAAkB,OAAO,OAAO,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC,YAAY,OAAO,GAAK,CAAC;oBAC7E,YAAY;oBACZ,aAAa;oBACb,iBAAiB;oBACjB,aAAa,IAAI,OAAO,WAAW;gBACvC,CAAC;YAED,IAAI,gBAAgB,MAAM,GAAG,GAAG;gBAC5B,MAAM,EAAE,OAAO,cAAc,EAAE,GAAG,MAAM,SACnC,IAAI,CAAC,aACL,MAAM,CAAC,iBAAiB;oBACrB,YAAY;gBAChB;gBAEJ,IAAI,gBAAgB,MAAM;YAC9B;YAEA,0EAA0E;YAC1E,kEAAkE;YAClE,OAAO;gBAAE;gBAAW,SAAS;YAAK;QACtC;QACA,WAAW,CAAC,GAAG;YACX,6IAAa,CAAC,mBAAmB,CAC7B,aACA,UAAU,MAAM,EAChB,UAAU,SAAS;YAEvB,0KAAK,CAAC,OAAO,CAAC;QAClB;QACA,SAAS,CAAC;YACN,0KAAK,CAAC,KAAK,CAAC,MAAM,OAAO,IAAI;QACjC;IACJ;AACJ"}},
    {"offset": {"line": 1073, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/hooks/mutations/useSaveResponse.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { createClient } from \"@/lib/supabase/client\";\r\nimport { queryKeys } from \"@/lib/queryKeys\";\r\n\r\ninterface SaveResponseParams {\r\n    attemptId: string;\r\n    questionId: string;\r\n    answer: any;\r\n}\r\n\r\nexport function useSaveResponse() {\r\n    const queryClient = useQueryClient();\r\n    const supabase = createClient();\r\n\r\n    return useMutation({\r\n        mutationFn: async ({ attemptId, questionId, answer }: SaveResponseParams) => {\r\n            const { data, error } = await supabase\r\n                .from(\"responses\")\r\n                .upsert(\r\n                    {\r\n                        attempt_id: attemptId,\r\n                        question_id: questionId,\r\n                        selected_answer: answer,\r\n                        answered_at: new Date().toISOString(),\r\n                    },\r\n                    {\r\n                        onConflict: \"attempt_id,question_id\",\r\n                    }\r\n                )\r\n                .select()\r\n                .single();\r\n\r\n            if (error) throw error;\r\n            return data;\r\n        },\r\n        // Optimistic update for instant UI feedback\r\n        onMutate: async (variables) => {\r\n            // Cancel outgoing refetches\r\n            await queryClient.cancelQueries({\r\n                queryKey: queryKeys.attempts.detail(variables.attemptId),\r\n            });\r\n\r\n            // Snapshot previous value\r\n            const previousData = queryClient.getQueryData(\r\n                queryKeys.attempts.detail(variables.attemptId)\r\n            );\r\n\r\n            // Optimistically update\r\n            queryClient.setQueryData(\r\n                queryKeys.attempts.detail(variables.attemptId),\r\n                (old: any) => {\r\n                    if (!old) return old;\r\n                    return {\r\n                        ...old,\r\n                        responses: {\r\n                            ...old.responses,\r\n                            [variables.questionId]: variables.answer,\r\n                        },\r\n                    };\r\n                }\r\n            );\r\n\r\n            return { previousData };\r\n        },\r\n        onError: (err, variables, context) => {\r\n            // Rollback on error\r\n            if (context?.previousData) {\r\n                queryClient.setQueryData(\r\n                    queryKeys.attempts.detail(variables.attemptId),\r\n                    context.previousData\r\n                );\r\n            }\r\n        },\r\n        onSettled: (_, __, variables) => {\r\n            // Refetch to ensure consistency\r\n            queryClient.invalidateQueries({\r\n                queryKey: queryKeys.attempts.detail(variables.attemptId),\r\n            });\r\n        },\r\n    });\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AAAA;AACA;AACA;AAJA;;;;AAYO,SAAS;IACZ,MAAM,cAAc,IAAA,gNAAc;IAClC,MAAM,WAAW,IAAA,iJAAY;IAE7B,OAAO,IAAA,qMAAW,EAAC;QACf,YAAY,OAAO,EAAE,SAAS,EAAE,UAAU,EAAE,MAAM,EAAsB;YACpE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SACzB,IAAI,CAAC,aACL,MAAM,CACH;gBACI,YAAY;gBACZ,aAAa;gBACb,iBAAiB;gBACjB,aAAa,IAAI,OAAO,WAAW;YACvC,GACA;gBACI,YAAY;YAChB,GAEH,MAAM,GACN,MAAM;YAEX,IAAI,OAAO,MAAM;YACjB,OAAO;QACX;QACA,4CAA4C;QAC5C,UAAU,OAAO;YACb,4BAA4B;YAC5B,MAAM,YAAY,aAAa,CAAC;gBAC5B,UAAU,qIAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAU,SAAS;YAC3D;YAEA,0BAA0B;YAC1B,MAAM,eAAe,YAAY,YAAY,CACzC,qIAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAU,SAAS;YAGjD,wBAAwB;YACxB,YAAY,YAAY,CACpB,qIAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAU,SAAS,GAC7C,CAAC;gBACG,IAAI,CAAC,KAAK,OAAO;gBACjB,OAAO;oBACH,GAAG,GAAG;oBACN,WAAW;wBACP,GAAG,IAAI,SAAS;wBAChB,CAAC,UAAU,UAAU,CAAC,EAAE,UAAU,MAAM;oBAC5C;gBACJ;YACJ;YAGJ,OAAO;gBAAE;YAAa;QAC1B;QACA,SAAS,CAAC,KAAK,WAAW;YACtB,oBAAoB;YACpB,IAAI,SAAS,cAAc;gBACvB,YAAY,YAAY,CACpB,qIAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAU,SAAS,GAC7C,QAAQ,YAAY;YAE5B;QACJ;QACA,WAAW,CAAC,GAAG,IAAI;YACf,gCAAgC;YAChC,YAAY,iBAAiB,CAAC;gBAC1B,UAAU,qIAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAU,SAAS;YAC3D;QACJ;IACJ;AACJ"}},
    {"offset": {"line": 1142, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/hooks/mutations/useToggleMarkForReview.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { createClient } from \"@/lib/supabase/client\";\r\nimport { queryKeys } from \"@/lib/queryKeys\";\r\nimport toast from \"react-hot-toast\";\r\n\r\ninterface ToggleMarkForReviewParams {\r\n    attemptId: string;\r\n    questionId: string;\r\n    marked: boolean;\r\n}\r\n\r\nexport function useToggleMarkForReview() {\r\n    const queryClient = useQueryClient();\r\n    const supabase = createClient();\r\n\r\n    return useMutation({\r\n        mutationFn: async ({ attemptId, questionId, marked }: ToggleMarkForReviewParams) => {\r\n            // This would typically update a separate table or field\r\n            // For now, we'll use local state with optimistic updates\r\n            return { attemptId, questionId, marked };\r\n        },\r\n        // Optimistic update for instant UI feedback\r\n        onMutate: async (variables) => {\r\n            const queryKey = queryKeys.attempts.detail(variables.attemptId);\r\n\r\n            await queryClient.cancelQueries({ queryKey });\r\n            const previousData = queryClient.getQueryData(queryKey);\r\n\r\n            queryClient.setQueryData(queryKey, (old: any) => {\r\n                if (!old) return old;\r\n                return {\r\n                    ...old,\r\n                    markedForReview: {\r\n                        ...old.markedForReview,\r\n                        [variables.questionId]: variables.marked,\r\n                    },\r\n                };\r\n            });\r\n\r\n            return { previousData };\r\n        },\r\n        onError: (err, variables, context) => {\r\n            if (context?.previousData) {\r\n                queryClient.setQueryData(\r\n                    queryKeys.attempts.detail(variables.attemptId),\r\n                    context.previousData\r\n                );\r\n            }\r\n            toast.error(\"Failed to update mark status\");\r\n        },\r\n    });\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AAAA;AACA;AACA;AACA;AALA;;;;;AAaO,SAAS;IACZ,MAAM,cAAc,IAAA,gNAAc;IAClC,MAAM,WAAW,IAAA,iJAAY;IAE7B,OAAO,IAAA,qMAAW,EAAC;QACf,YAAY,OAAO,EAAE,SAAS,EAAE,UAAU,EAAE,MAAM,EAA6B;YAC3E,wDAAwD;YACxD,yDAAyD;YACzD,OAAO;gBAAE;gBAAW;gBAAY;YAAO;QAC3C;QACA,4CAA4C;QAC5C,UAAU,OAAO;YACb,MAAM,WAAW,qIAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAU,SAAS;YAE9D,MAAM,YAAY,aAAa,CAAC;gBAAE;YAAS;YAC3C,MAAM,eAAe,YAAY,YAAY,CAAC;YAE9C,YAAY,YAAY,CAAC,UAAU,CAAC;gBAChC,IAAI,CAAC,KAAK,OAAO;gBACjB,OAAO;oBACH,GAAG,GAAG;oBACN,iBAAiB;wBACb,GAAG,IAAI,eAAe;wBACtB,CAAC,UAAU,UAAU,CAAC,EAAE,UAAU,MAAM;oBAC5C;gBACJ;YACJ;YAEA,OAAO;gBAAE;YAAa;QAC1B;QACA,SAAS,CAAC,KAAK,WAAW;YACtB,IAAI,SAAS,cAAc;gBACvB,YAAY,YAAY,CACpB,qIAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAU,SAAS,GAC7C,QAAQ,YAAY;YAE5B;YACA,0KAAK,CAAC,KAAK,CAAC;QAChB;IACJ;AACJ"}},
    {"offset": {"line": 1202, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/hooks/queries/useCourses.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { createClient } from \"@/lib/supabase/client\";\r\nimport { queryKeys } from \"@/lib/queryKeys\";\r\n\r\nexport function useCourses(filters?: { status?: string; search?: string }) {\r\n    const supabase = createClient();\r\n\r\n    return useQuery({\r\n        queryKey: queryKeys.courses.list(JSON.stringify(filters)),\r\n        queryFn: async () => {\r\n            let query = supabase\r\n                .from(\"courses\")\r\n                .select(\"id, title, description, price, is_free, thumbnail_url, status, created_at\")\r\n                .order(\"created_at\", { ascending: false });\r\n\r\n            if (filters?.status) {\r\n                query = query.eq(\"status\", filters.status);\r\n            }\r\n\r\n            if (filters?.search) {\r\n                query = query.ilike(\"title\", `%${filters.search}%`);\r\n            }\r\n\r\n            const { data, error } = await query;\r\n\r\n            if (error) throw error;\r\n            return data;\r\n        },\r\n        staleTime: 1000 * 60 * 5, // 5 minutes\r\n    });\r\n}\r\n\r\nexport function useCourse(courseId: string | undefined) {\r\n    const supabase = createClient();\r\n\r\n    return useQuery({\r\n        queryKey: queryKeys.courses.detail(courseId!),\r\n        queryFn: async () => {\r\n            const { data, error } = await supabase\r\n                .from(\"courses\")\r\n                .select(\"*\")\r\n                .eq(\"id\", courseId!)\r\n                .single();\r\n\r\n            if (error) throw error;\r\n            return data;\r\n        },\r\n        enabled: !!courseId,\r\n        staleTime: 1000 * 60 * 10, // 10 minutes\r\n    });\r\n}\r\n\r\nexport function useEnrolledCourses(userId: string | undefined) {\r\n    const supabase = createClient();\r\n\r\n    return useQuery({\r\n        queryKey: queryKeys.courses.enrolled(userId!),\r\n        queryFn: async () => {\r\n            const { data, error } = await supabase\r\n                .from(\"enrollments\")\r\n                .select(`\r\n          id,\r\n          enrolled_at,\r\n          progress,\r\n          completed,\r\n          courses (\r\n            id,\r\n            title,\r\n            description,\r\n            thumbnail_url,\r\n            price\r\n          )\r\n        `)\r\n                .eq(\"user_id\", userId!)\r\n                .eq(\"status\", \"active\")\r\n                .order(\"enrolled_at\", { ascending: false });\r\n\r\n            if (error) throw error;\r\n            return data;\r\n        },\r\n        enabled: !!userId,\r\n        staleTime: 1000 * 60 * 3, // 3 minutes\r\n    });\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAEA;AACA;AACA;AAJA;;;;AAMO,SAAS,WAAW,OAA8C;IACrE,MAAM,WAAW,IAAA,iJAAY;IAE7B,OAAO,IAAA,+LAAQ,EAAC;QACZ,UAAU,qIAAS,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,SAAS,CAAC;QAChD,SAAS;YACL,IAAI,QAAQ,SACP,IAAI,CAAC,WACL,MAAM,CAAC,6EACP,KAAK,CAAC,cAAc;gBAAE,WAAW;YAAM;YAE5C,IAAI,SAAS,QAAQ;gBACjB,QAAQ,MAAM,EAAE,CAAC,UAAU,QAAQ,MAAM;YAC7C;YAEA,IAAI,SAAS,QAAQ;gBACjB,QAAQ,MAAM,KAAK,CAAC,SAAS,CAAC,CAAC,EAAE,QAAQ,MAAM,CAAC,CAAC,CAAC;YACtD;YAEA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM;YAE9B,IAAI,OAAO,MAAM;YACjB,OAAO;QACX;QACA,WAAW,OAAO,KAAK;IAC3B;AACJ;AAEO,SAAS,UAAU,QAA4B;IAClD,MAAM,WAAW,IAAA,iJAAY;IAE7B,OAAO,IAAA,+LAAQ,EAAC;QACZ,UAAU,qIAAS,CAAC,OAAO,CAAC,MAAM,CAAC;QACnC,SAAS;YACL,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SACzB,IAAI,CAAC,WACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,UACT,MAAM;YAEX,IAAI,OAAO,MAAM;YACjB,OAAO;QACX;QACA,SAAS,CAAC,CAAC;QACX,WAAW,OAAO,KAAK;IAC3B;AACJ;AAEO,SAAS,mBAAmB,MAA0B;IACzD,MAAM,WAAW,IAAA,iJAAY;IAE7B,OAAO,IAAA,+LAAQ,EAAC;QACZ,UAAU,qIAAS,CAAC,OAAO,CAAC,QAAQ,CAAC;QACrC,SAAS;YACL,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SACzB,IAAI,CAAC,eACL,MAAM,CAAC,CAAC;;;;;;;;;;;;QAYjB,CAAC,EACQ,EAAE,CAAC,WAAW,QACd,EAAE,CAAC,UAAU,UACb,KAAK,CAAC,eAAe;gBAAE,WAAW;YAAM;YAE7C,IAAI,OAAO,MAAM;YACjB,OAAO;QACX;QACA,SAAS,CAAC,CAAC;QACX,WAAW,OAAO,KAAK;IAC3B;AACJ"}},
    {"offset": {"line": 1282, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/hooks/queries/useExams.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { createClient } from \"@/lib/supabase/client\";\r\nimport { queryKeys } from \"@/lib/queryKeys\";\r\n\r\nexport function useExams(filters?: { status?: string; search?: string }) {\r\n    const supabase = createClient();\r\n\r\n    return useQuery({\r\n        queryKey: queryKeys.exams.list(JSON.stringify(filters)),\r\n        queryFn: async () => {\r\n            let query = supabase\r\n                .from(\"exams\")\r\n                .select(\"id, title, description, duration_minutes, total_marks, status, created_at\")\r\n                .order(\"created_at\", { ascending: false });\r\n\r\n            if (filters?.status) {\r\n                query = query.eq(\"status\", filters.status);\r\n            }\r\n\r\n            if (filters?.search) {\r\n                query = query.ilike(\"title\", `%${filters.search}%`);\r\n            }\r\n\r\n            const { data, error } = await query;\r\n\r\n            if (error) throw error;\r\n            return data;\r\n        },\r\n        staleTime: 1000 * 60 * 5, // 5 minutes\r\n    });\r\n}\r\n\r\nexport function useExam(examId: string | undefined) {\r\n    const supabase = createClient();\r\n\r\n    return useQuery({\r\n        queryKey: queryKeys.exams.detail(examId!),\r\n        queryFn: async () => {\r\n            const { data, error } = await supabase\r\n                .from(\"exams\")\r\n                .select(\"*\")\r\n                .eq(\"id\", examId!)\r\n                .single();\r\n\r\n            if (error) throw error;\r\n            return data;\r\n        },\r\n        enabled: !!examId,\r\n        staleTime: 1000 * 60 * 10, // 10 minutes\r\n    });\r\n}\r\n\r\nexport function useExamSections(examId: string | undefined) {\r\n    const supabase = createClient();\r\n\r\n    return useQuery({\r\n        queryKey: queryKeys.exams.sections(examId!),\r\n        queryFn: async () => {\r\n            const { data, error } = await supabase\r\n                .from(\"sections\")\r\n                .select(\"id, title, duration_minutes, total_marks, section_order\")\r\n                .eq(\"exam_id\", examId!)\r\n                .order(\"section_order\", { ascending: true });\r\n\r\n            if (error) throw error;\r\n            return data;\r\n        },\r\n        enabled: !!examId,\r\n        staleTime: 1000 * 60 * 15, // 15 minutes - sections rarely change\r\n    });\r\n}\r\n\r\nexport function useExamQuestions(sectionId: string | undefined) {\r\n    const supabase = createClient();\r\n\r\n    return useQuery({\r\n        queryKey: queryKeys.exams.questions(sectionId!),\r\n        queryFn: async () => {\r\n            const { data: questions, error } = await supabase\r\n                .from(\"questions\")\r\n                .select(\"id, question_text, question_type, marks, correct_answer, created_at\")\r\n                .eq(\"section_id\", sectionId!)\r\n                .order(\"created_at\", { ascending: true });\r\n\r\n            if (error) throw error;\r\n\r\n            // Fetch options for each question\r\n            const questionsWithOptions = await Promise.all(\r\n                (questions || []).map(async (question) => {\r\n                    const { data: options } = await supabase\r\n                        .from(\"options\")\r\n                        .select(\"id, option_text, is_correct, option_order\")\r\n                        .eq(\"question_id\", question.id)\r\n                        .order(\"option_order\", { ascending: true });\r\n\r\n                    return {\r\n                        ...question,\r\n                        options: options || [],\r\n                    };\r\n                })\r\n            );\r\n\r\n            return questionsWithOptions;\r\n        },\r\n        enabled: !!sectionId,\r\n        staleTime: 1000 * 60 * 15, // 15 minutes\r\n    });\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AAEA;AACA;AACA;AAJA;;;;AAMO,SAAS,SAAS,OAA8C;IACnE,MAAM,WAAW,IAAA,iJAAY;IAE7B,OAAO,IAAA,+LAAQ,EAAC;QACZ,UAAU,qIAAS,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,SAAS,CAAC;QAC9C,SAAS;YACL,IAAI,QAAQ,SACP,IAAI,CAAC,SACL,MAAM,CAAC,6EACP,KAAK,CAAC,cAAc;gBAAE,WAAW;YAAM;YAE5C,IAAI,SAAS,QAAQ;gBACjB,QAAQ,MAAM,EAAE,CAAC,UAAU,QAAQ,MAAM;YAC7C;YAEA,IAAI,SAAS,QAAQ;gBACjB,QAAQ,MAAM,KAAK,CAAC,SAAS,CAAC,CAAC,EAAE,QAAQ,MAAM,CAAC,CAAC,CAAC;YACtD;YAEA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM;YAE9B,IAAI,OAAO,MAAM;YACjB,OAAO;QACX;QACA,WAAW,OAAO,KAAK;IAC3B;AACJ;AAEO,SAAS,QAAQ,MAA0B;IAC9C,MAAM,WAAW,IAAA,iJAAY;IAE7B,OAAO,IAAA,+LAAQ,EAAC;QACZ,UAAU,qIAAS,CAAC,KAAK,CAAC,MAAM,CAAC;QACjC,SAAS;YACL,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SACzB,IAAI,CAAC,SACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,QACT,MAAM;YAEX,IAAI,OAAO,MAAM;YACjB,OAAO;QACX;QACA,SAAS,CAAC,CAAC;QACX,WAAW,OAAO,KAAK;IAC3B;AACJ;AAEO,SAAS,gBAAgB,MAA0B;IACtD,MAAM,WAAW,IAAA,iJAAY;IAE7B,OAAO,IAAA,+LAAQ,EAAC;QACZ,UAAU,qIAAS,CAAC,KAAK,CAAC,QAAQ,CAAC;QACnC,SAAS;YACL,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SACzB,IAAI,CAAC,YACL,MAAM,CAAC,2DACP,EAAE,CAAC,WAAW,QACd,KAAK,CAAC,iBAAiB;gBAAE,WAAW;YAAK;YAE9C,IAAI,OAAO,MAAM;YACjB,OAAO;QACX;QACA,SAAS,CAAC,CAAC;QACX,WAAW,OAAO,KAAK;IAC3B;AACJ;AAEO,SAAS,iBAAiB,SAA6B;IAC1D,MAAM,WAAW,IAAA,iJAAY;IAE7B,OAAO,IAAA,+LAAQ,EAAC;QACZ,UAAU,qIAAS,CAAC,KAAK,CAAC,SAAS,CAAC;QACpC,SAAS;YACL,MAAM,EAAE,MAAM,SAAS,EAAE,KAAK,EAAE,GAAG,MAAM,SACpC,IAAI,CAAC,aACL,MAAM,CAAC,uEACP,EAAE,CAAC,cAAc,WACjB,KAAK,CAAC,cAAc;gBAAE,WAAW;YAAK;YAE3C,IAAI,OAAO,MAAM;YAEjB,kCAAkC;YAClC,MAAM,uBAAuB,MAAM,QAAQ,GAAG,CAC1C,CAAC,aAAa,EAAE,EAAE,GAAG,CAAC,OAAO;gBACzB,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,WACL,MAAM,CAAC,6CACP,EAAE,CAAC,eAAe,SAAS,EAAE,EAC7B,KAAK,CAAC,gBAAgB;oBAAE,WAAW;gBAAK;gBAE7C,OAAO;oBACH,GAAG,QAAQ;oBACX,SAAS,WAAW,EAAE;gBAC1B;YACJ;YAGJ,OAAO;QACX;QACA,SAAS,CAAC,CAAC;QACX,WAAW,OAAO,KAAK;IAC3B;AACJ"}},
    {"offset": {"line": 1377, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/hooks/queries/useTestSeries.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { createClient } from \"@/lib/supabase/client\";\r\nimport { queryKeys } from \"@/lib/queryKeys\";\r\n\r\nexport function useTestSeries(filters?: { status?: string; search?: string }) {\r\n    const supabase = createClient();\r\n\r\n    return useQuery({\r\n        queryKey: queryKeys.testSeries.list(JSON.stringify(filters)),\r\n        queryFn: async () => {\r\n            let query = supabase\r\n                .from(\"test_series\")\r\n                .select(\"id, title, description, price, is_free, status, created_at\")\r\n                .order(\"created_at\", { ascending: false });\r\n\r\n            if (filters?.status) {\r\n                query = query.eq(\"status\", filters.status);\r\n            }\r\n\r\n            if (filters?.search) {\r\n                query = query.ilike(\"title\", `%${filters.search}%`);\r\n            }\r\n\r\n            const { data, error } = await query;\r\n\r\n            if (error) throw error;\r\n            return data;\r\n        },\r\n        staleTime: 1000 * 60 * 5, // 5 minutes\r\n    });\r\n}\r\n\r\nexport function useTestSeriesDetail(seriesId: string | undefined) {\r\n    const supabase = createClient();\r\n\r\n    return useQuery({\r\n        queryKey: queryKeys.testSeries.detail(seriesId!),\r\n        queryFn: async () => {\r\n            const { data, error } = await supabase\r\n                .from(\"test_series\")\r\n                .select(\"*\")\r\n                .eq(\"id\", seriesId!)\r\n                .single();\r\n\r\n            if (error) throw error;\r\n            return data;\r\n        },\r\n        enabled: !!seriesId,\r\n        staleTime: 1000 * 60 * 10, // 10 minutes\r\n    });\r\n}\r\n\r\n\r\n\r\nexport function useTestSeriesExams(seriesId: string | undefined) {\r\n    const supabase = createClient();\r\n\r\n    return useQuery({\r\n        queryKey: queryKeys.testSeries.exams(seriesId!),\r\n        queryFn: async () => {\r\n            const { data, error } = await supabase\r\n                .from(\"test_series_exams\")\r\n                .select(`\r\n          id,\r\n          exam_order,\r\n          max_attempts,\r\n          exams (\r\n            id,\r\n            title,\r\n            description,\r\n            duration_minutes,\r\n            total_marks,\r\n            negative_marks\r\n          )\r\n        `)\r\n                .eq(\"test_series_id\", seriesId!)\r\n                .order(\"exam_order\", { ascending: true });\r\n\r\n            if (error) throw error;\r\n            return data;\r\n        },\r\n        enabled: !!seriesId,\r\n        staleTime: 1000 * 60 * 10, // 10 minutes\r\n    });\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAEA;AACA;AACA;AAJA;;;;AAMO,SAAS,cAAc,OAA8C;IACxE,MAAM,WAAW,IAAA,iJAAY;IAE7B,OAAO,IAAA,+LAAQ,EAAC;QACZ,UAAU,qIAAS,CAAC,UAAU,CAAC,IAAI,CAAC,KAAK,SAAS,CAAC;QACnD,SAAS;YACL,IAAI,QAAQ,SACP,IAAI,CAAC,eACL,MAAM,CAAC,8DACP,KAAK,CAAC,cAAc;gBAAE,WAAW;YAAM;YAE5C,IAAI,SAAS,QAAQ;gBACjB,QAAQ,MAAM,EAAE,CAAC,UAAU,QAAQ,MAAM;YAC7C;YAEA,IAAI,SAAS,QAAQ;gBACjB,QAAQ,MAAM,KAAK,CAAC,SAAS,CAAC,CAAC,EAAE,QAAQ,MAAM,CAAC,CAAC,CAAC;YACtD;YAEA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM;YAE9B,IAAI,OAAO,MAAM;YACjB,OAAO;QACX;QACA,WAAW,OAAO,KAAK;IAC3B;AACJ;AAEO,SAAS,oBAAoB,QAA4B;IAC5D,MAAM,WAAW,IAAA,iJAAY;IAE7B,OAAO,IAAA,+LAAQ,EAAC;QACZ,UAAU,qIAAS,CAAC,UAAU,CAAC,MAAM,CAAC;QACtC,SAAS;YACL,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SACzB,IAAI,CAAC,eACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,UACT,MAAM;YAEX,IAAI,OAAO,MAAM;YACjB,OAAO;QACX;QACA,SAAS,CAAC,CAAC;QACX,WAAW,OAAO,KAAK;IAC3B;AACJ;AAIO,SAAS,mBAAmB,QAA4B;IAC3D,MAAM,WAAW,IAAA,iJAAY;IAE7B,OAAO,IAAA,+LAAQ,EAAC;QACZ,UAAU,qIAAS,CAAC,UAAU,CAAC,KAAK,CAAC;QACrC,SAAS;YACL,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SACzB,IAAI,CAAC,qBACL,MAAM,CAAC,CAAC;;;;;;;;;;;;QAYjB,CAAC,EACQ,EAAE,CAAC,kBAAkB,UACrB,KAAK,CAAC,cAAc;gBAAE,WAAW;YAAK;YAE3C,IAAI,OAAO,MAAM;YACjB,OAAO;QACX;QACA,SAAS,CAAC,CAAC;QACX,WAAW,OAAO,KAAK;IAC3B;AACJ"}},
    {"offset": {"line": 1457, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/hooks/queries/useInfiniteQuestions.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useInfiniteQuery } from \"@tanstack/react-query\";\r\nimport { createClient } from \"@/lib/supabase/client\";\r\nimport { queryKeys } from \"@/lib/queryKeys\";\r\n\r\nconst PAGE_SIZE = 20;\r\n\r\ninterface QuestionFilters {\r\n    search?: string;\r\n    type?: string;\r\n    examId?: string;\r\n}\r\n\r\nexport function useInfiniteQuestions(filters?: QuestionFilters) {\r\n    const supabase = createClient();\r\n\r\n    return useInfiniteQuery({\r\n        queryKey: queryKeys.admin.questionBank(JSON.stringify(filters)),\r\n        queryFn: async ({ pageParam = 0 }) => {\r\n            let query = supabase\r\n                .from(\"questions\")\r\n                .select(\r\n                    `\r\n          id,\r\n          question_text,\r\n          question_type,\r\n          marks,\r\n          created_at,\r\n          sections (\r\n            id,\r\n            title,\r\n            exams (\r\n              id,\r\n              title\r\n            )\r\n          )\r\n        `,\r\n                    { count: \"exact\" }\r\n                )\r\n                .order(\"created_at\", { ascending: false })\r\n                .range(pageParam * PAGE_SIZE, (pageParam + 1) * PAGE_SIZE - 1);\r\n\r\n            if (filters?.search) {\r\n                query = query.ilike(\"question_text\", `%${filters.search}%`);\r\n            }\r\n\r\n            if (filters?.type) {\r\n                query = query.eq(\"question_type\", filters.type);\r\n            }\r\n\r\n            const { data, error, count } = await query;\r\n\r\n            if (error) throw error;\r\n\r\n            return {\r\n                questions: data,\r\n                nextCursor: data.length === PAGE_SIZE ? pageParam + 1 : undefined,\r\n                totalCount: count,\r\n            };\r\n        },\r\n        getNextPageParam: (lastPage) => lastPage.nextCursor,\r\n        initialPageParam: 0,\r\n        staleTime: 1000 * 60 * 2, // 2 minutes\r\n    });\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;AAMA,MAAM,YAAY;AAQX,SAAS,qBAAqB,OAAyB;IAC1D,MAAM,WAAW,IAAA,iJAAY;IAE7B,OAAO,IAAA,+MAAgB,EAAC;QACpB,UAAU,qIAAS,CAAC,KAAK,CAAC,YAAY,CAAC,KAAK,SAAS,CAAC;QACtD,SAAS,OAAO,EAAE,YAAY,CAAC,EAAE;YAC7B,IAAI,QAAQ,SACP,IAAI,CAAC,aACL,MAAM,CACH,CAAC;;;;;;;;;;;;;;QAcb,CAAC,EACW;gBAAE,OAAO;YAAQ,GAEpB,KAAK,CAAC,cAAc;gBAAE,WAAW;YAAM,GACvC,KAAK,CAAC,YAAY,WAAW,CAAC,YAAY,CAAC,IAAI,YAAY;YAEhE,IAAI,SAAS,QAAQ;gBACjB,QAAQ,MAAM,KAAK,CAAC,iBAAiB,CAAC,CAAC,EAAE,QAAQ,MAAM,CAAC,CAAC,CAAC;YAC9D;YAEA,IAAI,SAAS,MAAM;gBACf,QAAQ,MAAM,EAAE,CAAC,iBAAiB,QAAQ,IAAI;YAClD;YAEA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,MAAM;YAErC,IAAI,OAAO,MAAM;YAEjB,OAAO;gBACH,WAAW;gBACX,YAAY,KAAK,MAAM,KAAK,YAAY,YAAY,IAAI;gBACxD,YAAY;YAChB;QACJ;QACA,kBAAkB,CAAC,WAAa,SAAS,UAAU;QACnD,kBAAkB;QAClB,WAAW,OAAO,KAAK;IAC3B;AACJ"}},
    {"offset": {"line": 1516, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/hooks/usePrefetch.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useQueryClient } from \"@tanstack/react-query\";\r\nimport { createClient } from \"@/lib/supabase/client\";\r\nimport { queryKeys } from \"@/lib/queryKeys\";\r\n\r\n/**\r\n * Prefetch Utilities\r\n * Functions to prefetch data on hover or navigation\r\n */\r\n\r\nexport function usePrefetch() {\r\n    const queryClient = useQueryClient();\r\n    const supabase = createClient();\r\n\r\n    return {\r\n        /**\r\n         * Prefetch course details on hover\r\n         */\r\n        prefetchCourse: (courseId: string) => {\r\n            queryClient.prefetchQuery({\r\n                queryKey: queryKeys.courses.detail(courseId),\r\n                queryFn: async () => {\r\n                    const { data, error } = await supabase\r\n                        .from(\"courses\")\r\n                        .select(\"*\")\r\n                        .eq(\"id\", courseId)\r\n                        .single();\r\n\r\n                    if (error) throw error;\r\n                    return data;\r\n                },\r\n                staleTime: 1000 * 60 * 10, // 10 minutes\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Prefetch exam details on hover\r\n         */\r\n        prefetchExam: (examId: string) => {\r\n            queryClient.prefetchQuery({\r\n                queryKey: queryKeys.exams.detail(examId),\r\n                queryFn: async () => {\r\n                    const { data, error } = await supabase\r\n                        .from(\"exams\")\r\n                        .select(\"*\")\r\n                        .eq(\"id\", examId)\r\n                        .single();\r\n\r\n                    if (error) throw error;\r\n                    return data;\r\n                },\r\n                staleTime: 1000 * 60 * 10,\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Prefetch test series details on hover\r\n         */\r\n        prefetchTestSeries: (seriesId: string) => {\r\n            queryClient.prefetchQuery({\r\n                queryKey: queryKeys.testSeries.detail(seriesId),\r\n                queryFn: async () => {\r\n                    const { data, error } = await supabase\r\n                        .from(\"test_series\")\r\n                        .select(\"*\")\r\n                        .eq(\"id\", seriesId)\r\n                        .single();\r\n\r\n                    if (error) throw error;\r\n                    return data;\r\n                },\r\n                staleTime: 1000 * 60 * 10,\r\n            });\r\n        },\r\n\r\n        /**\r\n         * Prefetch exam sections (for exam player)\r\n         */\r\n        prefetchExamSections: (examId: string) => {\r\n            queryClient.prefetchQuery({\r\n                queryKey: queryKeys.exams.sections(examId),\r\n                queryFn: async () => {\r\n                    const { data, error } = await supabase\r\n                        .from(\"sections\")\r\n                        .select(\"id, title, duration_minutes, total_marks, section_order\")\r\n                        .eq(\"exam_id\", examId)\r\n                        .order(\"section_order\", { ascending: true });\r\n\r\n                    if (error) throw error;\r\n                    return data;\r\n                },\r\n                staleTime: 1000 * 60 * 15, // 15 minutes - sections rarely change\r\n            });\r\n        },\r\n    };\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;AAWO,SAAS;IACZ,MAAM,cAAc,IAAA,gNAAc;IAClC,MAAM,WAAW,IAAA,iJAAY;IAE7B,OAAO;QACH;;SAEC,GACD,gBAAgB,CAAC;YACb,YAAY,aAAa,CAAC;gBACtB,UAAU,qIAAS,CAAC,OAAO,CAAC,MAAM,CAAC;gBACnC,SAAS;oBACL,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SACzB,IAAI,CAAC,WACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,UACT,MAAM;oBAEX,IAAI,OAAO,MAAM;oBACjB,OAAO;gBACX;gBACA,WAAW,OAAO,KAAK;YAC3B;QACJ;QAEA;;SAEC,GACD,cAAc,CAAC;YACX,YAAY,aAAa,CAAC;gBACtB,UAAU,qIAAS,CAAC,KAAK,CAAC,MAAM,CAAC;gBACjC,SAAS;oBACL,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SACzB,IAAI,CAAC,SACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,QACT,MAAM;oBAEX,IAAI,OAAO,MAAM;oBACjB,OAAO;gBACX;gBACA,WAAW,OAAO,KAAK;YAC3B;QACJ;QAEA;;SAEC,GACD,oBAAoB,CAAC;YACjB,YAAY,aAAa,CAAC;gBACtB,UAAU,qIAAS,CAAC,UAAU,CAAC,MAAM,CAAC;gBACtC,SAAS;oBACL,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SACzB,IAAI,CAAC,eACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,UACT,MAAM;oBAEX,IAAI,OAAO,MAAM;oBACjB,OAAO;gBACX;gBACA,WAAW,OAAO,KAAK;YAC3B;QACJ;QAEA;;SAEC,GACD,sBAAsB,CAAC;YACnB,YAAY,aAAa,CAAC;gBACtB,UAAU,qIAAS,CAAC,KAAK,CAAC,QAAQ,CAAC;gBACnC,SAAS;oBACL,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SACzB,IAAI,CAAC,YACL,MAAM,CAAC,2DACP,EAAE,CAAC,WAAW,QACd,KAAK,CAAC,iBAAiB;wBAAE,WAAW;oBAAK;oBAE9C,IAAI,OAAO,MAAM;oBACjB,OAAO;gBACX;gBACA,WAAW,OAAO,KAAK;YAC3B;QACJ;IACJ;AACJ"}},
    {"offset": {"line": 1591, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/hooks/index.ts"],"sourcesContent":["// Mutation Hooks\r\nexport { useEnrollCourse } from \"./mutations/useEnrollCourse\";\r\nexport { useSubmitExam } from \"./mutations/useSubmitExam\";\r\nexport { useSaveResponse } from \"./mutations/useSaveResponse\";\r\nexport { useToggleMarkForReview } from \"./mutations/useToggleMarkForReview\";\r\n\r\n// Query Hooks\r\nexport { useCourses, useCourse, useEnrolledCourses } from \"./queries/useCourses\";\r\nexport { useExams, useExam, useExamSections, useExamQuestions } from \"./queries/useExams\";\r\nexport {\r\n    useTestSeries,\r\n    useTestSeriesDetail,\r\n    useTestSeriesExams,\r\n} from \"./queries/useTestSeries\";\r\nexport { useInfiniteQuestions } from \"./queries/useInfiniteQuestions\";\r\n\r\n// Utilities\r\nexport { usePrefetch } from \"./usePrefetch\";\r\n"],"names":[],"mappings":"AAAA,iBAAiB;;AACjB;AACA;AACA;AACA;AAEA,cAAc;AACd;AACA;AACA;AAKA;AAEA,YAAY;AACZ"}},
    {"offset": {"line": 1617, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/student/ExpiryComponents.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { AlertTriangle, Lock, RefreshCw, Calendar, Zap } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport Link from 'next/link';\r\nimport { cn } from '@/lib/utils';\r\n\r\ninterface ExpiryWarningBannerProps {\r\n    daysRemaining: number;\r\n    expiresAt: string;\r\n    courseTitle: string;\r\n    courseId: string;\r\n    urgencyLevel: 'CRITICAL' | 'HIGH' | 'MEDIUM' | 'LOW';\r\n}\r\n\r\nexport function ExpiryWarningBanner({\r\n    daysRemaining,\r\n    expiresAt,\r\n    courseTitle,\r\n    courseId,\r\n    urgencyLevel\r\n}: ExpiryWarningBannerProps) {\r\n    const expiryDate = new Date(expiresAt);\r\n\r\n    const urgencyConfig = {\r\n        CRITICAL: {\r\n            bg: 'bg-linear-to-r from-red-500 via-orange-500 to-red-600',\r\n            text: 'text-white',\r\n            icon: AlertTriangle,\r\n            message: '⚡ URGENT: Your access expires TODAY!',\r\n            animate: 'animate-pulse'\r\n        },\r\n        HIGH: {\r\n            bg: 'bg-linear-to-r from-orange-500 via-amber-500 to-orange-600',\r\n            text: 'text-white',\r\n            icon: AlertTriangle,\r\n            message: '⏰ Access expiring in ' + daysRemaining + ' days',\r\n            animate: 'animate-bounce'\r\n        },\r\n        MEDIUM: {\r\n            bg: 'bg-linear-to-r from-amber-500 via-yellow-500 to-amber-600',\r\n            text: 'text-white',\r\n            icon: Calendar,\r\n            message: 'Renew soon! Access expires in ' + daysRemaining + ' days',\r\n            animate: ''\r\n        },\r\n        LOW: {\r\n            bg: 'bg-linear-to-r from-blue-500 via-indigo-500 to-blue-600',\r\n            text: 'text-white',\r\n            icon: Calendar,\r\n            message: daysRemaining + ' days of access remaining',\r\n            animate: ''\r\n        }\r\n    };\r\n\r\n    const config = urgencyConfig[urgencyLevel];\r\n    const Icon = config.icon;\r\n\r\n    return (\r\n        <div className={cn(\r\n            'relative overflow-hidden rounded-xl p-6 shadow-xl mb-6',\r\n            config.bg\r\n        )}>\r\n            {/* Animated background effect for critical */}\r\n            {urgencyLevel === 'CRITICAL' && (\r\n                <div className=\"absolute inset-0 bg-black/20 animate-pulse\" />\r\n            )}\r\n\r\n            <div className=\"relative z-10 flex items-center justify-between gap-4 flex-wrap\">\r\n                <div className=\"flex items-center gap-4\">\r\n                    <div className={cn('p-3 rounded-full bg-white/20', config.animate)}>\r\n                        <Icon className={cn('w-6 h-6', config.text)} />\r\n                    </div>\r\n                    <div>\r\n                        <h3 className={cn('text-xl font-bold', config.text)}>\r\n                            {config.message}\r\n                        </h3>\r\n                        <p className={cn('text-sm mt-1 opacity-90', config.text)}>\r\n                            Expires on {expiryDate.toLocaleDateString('en-US', {\r\n                                weekday: 'long',\r\n                                year: 'numeric',\r\n                                month: 'long',\r\n                                day: 'numeric',\r\n                                hour: '2-digit',\r\n                                minute: '2-digit'\r\n                            })}\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                <Link href={`/courses/${courseId}/renew`}>\r\n                    <Button\r\n                        size=\"lg\"\r\n                        className=\"bg-white text-gray-900 hover:bg-gray-100 font-bold shadow-lg\"\r\n                    >\r\n                        <RefreshCw className=\"w-5 h-5 mr-2\" />\r\n                        Renew Now\r\n                    </Button>\r\n                </Link>\r\n            </div>\r\n\r\n            {/* Urgency indicator */}\r\n            {urgencyLevel === 'CRITICAL' && (\r\n                <div className=\"absolute top-0 right-0 px-4 py-1 bg-red-700 text-white text-xs font-black uppercase tracking-wider\">\r\n                    Last Day!\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\ninterface ExpiredAccessBlockerProps {\r\n    courseTitle: string;\r\n    courseId: string;\r\n    expiredAt: string;\r\n    courseThumbnail?: string;\r\n    coursePrice?: number;\r\n}\r\n\r\nexport function ExpiredAccessBlocker({\r\n    courseTitle,\r\n    courseId,\r\n    expiredAt,\r\n    courseThumbnail,\r\n    coursePrice\r\n}: ExpiredAccessBlockerProps) {\r\n    const expiredDate = new Date(expiredAt);\r\n\r\n    return (\r\n        <div className=\"min-h-screen flex items-center justify-center p-6 bg-linear-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900\">\r\n            <div className=\"max-w-2xl w-full\">\r\n                <div className=\"bg-white dark:bg-slate-900 rounded-2xl shadow-2xl overflow-hidden border border-slate-200 dark:border-slate-800\">\r\n                    {/* Header with course thumbnail */}\r\n                    {courseThumbnail && (\r\n                        <div className=\"relative h-48 bg-linear-to-br from-red-500 to-orange-600\">\r\n                            <img\r\n                                src={courseThumbnail}\r\n                                alt={courseTitle}\r\n                                className=\"w-full h-full object-cover opacity-30\"\r\n                            />\r\n                            <div className=\"absolute inset-0 flex items-center justify-center\">\r\n                                <div className=\"p-6 rounded-full bg-white/10 backdrop-blur-xl\">\r\n                                    <Lock className=\"w-16 h-16 text-white\" />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"p-8 text-center\">\r\n                        {/* Expired badge */}\r\n                        <div className=\"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-red-100 dark:bg-red-500/20 border-2 border-red-500 mb-6\">\r\n                            <AlertTriangle className=\"w-5 h-5 text-red-600 dark:text-red-400\" />\r\n                            <span className=\"font-black uppercase text-sm text-red-600 dark:text-red-400 tracking-wider\">\r\n                                Access Expired\r\n                            </span>\r\n                        </div>\r\n\r\n                        <h1 className=\"text-3xl font-black text-slate-900 dark:text-white mb-3\">\r\n                            Your Access Has Ended\r\n                        </h1>\r\n                        <h2 className=\"text-xl font-semibold text-slate-600 dark:text-slate-400 mb-6\">\r\n                            {courseTitle}\r\n                        </h2>\r\n\r\n                        <p className=\"text-slate-600 dark:text-slate-400 mb-2\">\r\n                            Your enrollment expired on:\r\n                        </p>\r\n                        <p className=\"text-lg font-bold text-slate-900 dark:text-white mb-8\">\r\n                            {expiredDate.toLocaleDateString('en-US', {\r\n                                weekday: 'long',\r\n                                year: 'numeric',\r\n                                month: 'long',\r\n                                day: 'numeric'\r\n                            })}\r\n                        </p>\r\n\r\n                        <div className=\"bg-linear-to-r from-blue-50 to-indigo-50 dark:from-blue-500/10 dark:to-indigo-500/10 rounded-xl p-6 mb-8 border border-blue-200 dark:border-blue-500/20\">\r\n                            <Zap className=\"w-8 h-8 text-blue-600 dark:text-blue-400 mx-auto mb-3\" />\r\n                            <h3 className=\"font-bold text-slate-900 dark:text-white mb-2\">\r\n                                Want to continue learning?\r\n                            </h3>\r\n                            <p className=\"text-sm text-slate-600 dark:text-slate-400\">\r\n                                Re-enroll now to regain access to all course materials, lessons, and your progress!\r\n                            </p>\r\n                        </div>\r\n\r\n                        {/* Action buttons */}\r\n                        <div className=\"flex gap-4 justify-center flex-wrap\">\r\n                            <Link href={`/courses/${courseId}`}>\r\n                                <Button size=\"lg\" className=\"bg-linear-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-bold shadow-xl\">\r\n                                    <RefreshCw className=\"w-5 h-5 mr-2\" />\r\n                                    Re-Enroll Now\r\n                                    {coursePrice && <span className=\"ml-2\">• ₹{coursePrice}</span>}\r\n                                </Button>\r\n                            </Link>\r\n                            <Link href=\"/student/dashboard\">\r\n                                <Button size=\"lg\" variant=\"outline\" className=\"font-semibold\">\r\n                                    Back to Dashboard\r\n                                </Button>\r\n                            </Link>\r\n                        </div>\r\n\r\n                        <p className=\"text-xs text-slate-500 dark:text-slate-400 mt-6\">\r\n                            💡 Your progress is saved! Re-enroll to pick up right where you left off.\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\ninterface DashboardExpiryBadgeProps {\r\n    daysRemaining: number | null;\r\n    isExpired: boolean;\r\n    urgencyLevel: 'CRITICAL' | 'HIGH' | 'MEDIUM' | 'LOW' | null;\r\n}\r\n\r\nexport function DashboardExpiryBadge({ daysRemaining, isExpired, urgencyLevel }: DashboardExpiryBadgeProps) {\r\n    if (isExpired) {\r\n        return (\r\n            <div className=\"inline-flex items-center gap-1 px-2 py-1 rounded-md bg-red-100 dark:bg-red-500/20 border border-red-300 dark:border-red-500/30\">\r\n                <Lock className=\"w-3 h-3 text-red-600 dark:text-red-400\" />\r\n                <span className=\"text-xs font-bold text-red-600 dark:text-red-400\">EXPIRED</span>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!daysRemaining || !urgencyLevel) return null;\r\n\r\n    const urgencyColors = {\r\n        CRITICAL: 'bg-red-100 dark:bg-red-500/20 border-red-300 dark:border-red-500/30 text-red-600 dark:text-red-400',\r\n        HIGH: 'bg-orange-100 dark:bg-orange-500/20 border-orange-300 dark:border-orange-500/30 text-orange-600 dark:text-orange-400',\r\n        MEDIUM: 'bg-amber-100 dark:bg-amber-500/20 border-amber-300 dark:border-amber-500/30 text-amber-600 dark:text-amber-400',\r\n        LOW: 'bg-blue-100 dark:bg-blue-500/20 border-blue-300 dark:border-blue-500/30 text-blue-600 dark:text-blue-400'\r\n    };\r\n\r\n    return (\r\n        <div className={cn(\r\n            'inline-flex items-center gap-1 px-2 py-1 rounded-md border text-xs font-bold',\r\n            urgencyColors[urgencyLevel],\r\n            urgencyLevel === 'CRITICAL' && 'animate-pulse'\r\n        )}>\r\n            <Calendar className=\"w-3 h-3\" />\r\n            <span>{daysRemaining}d left</span>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2092, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/app/student/dashboard/page.tsx"],"sourcesContent":["'use client'\r\nimport React, { useState, useEffect, useMemo } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\nimport {\r\n  BookOpen,\r\n  Award,\r\n  Clock,\r\n  CheckCircle2,\r\n  TrendingUp,\r\n  Calendar,\r\n  Star,\r\n  PlayCircle,\r\n  Loader2,\r\n  GraduationCap,\r\n  ShoppingCart,\r\n  ArrowRight,\r\n} from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\n\r\nimport { useCurrentUser } from \"@/hooks/student/useCurrentUser\";\r\nimport { useStudentStats } from \"@/hooks/student/useStudentStats\";\r\nimport { useStudentTestSeries } from \"@/hooks/student/useStudentTestSeries\";\r\nimport { useLastAttempt } from \"@/hooks/student/useLastAttempt\";\r\nimport { useStudentCourses } from \"@/hooks/student/useStudentCourses\";\r\nimport { useAllCourses } from \"@/hooks/student/useAllCourses\";\r\nimport { usePrefetchCourse } from \"@/hooks/usePrefetchCourse\";\r\nimport { useEnrollmentsWithExpiry } from \"@/hooks/useEnrollmentsWithExpiry\";\r\nimport { useAllTestSeries } from \"@/hooks/student/useAllTestSeries\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { CourseThumbnail } from \"@/components/ui/CourseThumbnail\";\r\nimport { useEnrollCourse } from \"@/hooks\";\r\nimport { DashboardExpiryBadge } from \"@/components/student/ExpiryComponents\";\r\n\r\nexport default function StudentDashboard() {\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n  const tabParam = searchParams.get(\"tab\");\r\n  const [activeTab, setActiveTab] = useState<\"overview\" | \"my-courses\" | \"all-courses\" | \"test-series\" | \"all-test-series\">(\"overview\");\r\n\r\n  // Set active tab from URL parameter\r\n  useEffect(() => {\r\n    if (tabParam === \"my-courses\" || tabParam === \"all-courses\" || tabParam === \"test-series\" || tabParam === \"all-test-series\") {\r\n      setActiveTab(tabParam);\r\n    }\r\n  }, [tabParam]);\r\n\r\n  // Fetch data\r\n  const { data: user, isLoading: userLoading } = useCurrentUser();\r\n  const { data: stats, isLoading: statsLoading } = useStudentStats(user?.id);\r\n  const { data: testSeries, isLoading: seriesLoading } = useStudentTestSeries(user?.id);\r\n  const { data: lastAttempt } = useLastAttempt(user?.id);\r\n  const { data: myCourses, isLoading: myCoursesLoading } = useStudentCourses(user?.id);\r\n  const { data: allCourses, isLoading: allCoursesLoading } = useAllCourses(user?.id);\r\n  const { data: allTestSeries, isLoading: allTestSeriesLoading } = useAllTestSeries();\r\n  const { data: enrollmentsWithExpiry } = useEnrollmentsWithExpiry();\r\n\r\n  // Create a map of course ID to expiry info for quick lookup\r\n  const expiryMap = useMemo(() => {\r\n    const map = new Map();\r\n    enrollmentsWithExpiry?.forEach((enrollment: any) => {\r\n      map.set(enrollment.course_id, {\r\n        daysRemaining: enrollment.daysRemaining,\r\n        isExpired: enrollment.isExpired,\r\n        urgencyLevel: enrollment.urgencyLevel\r\n      });\r\n    });\r\n    return map;\r\n  }, [enrollmentsWithExpiry]);\r\n\r\n  // ⚡ INSTANT NAVIGATION: Prefetch course data on hover\r\n  const { prefetchCourse } = usePrefetchCourse();\r\n\r\n  // Enrollment mutation\r\n  const enrollMutation = useEnrollCourse();\r\n  const [enrollingCourseId, setEnrollingCourseId] = useState<string | null>(null);\r\n\r\n  const fadeIn = {\r\n    hidden: { opacity: 0, y: 20 },\r\n    visible: (i: number) => ({\r\n      opacity: 1,\r\n      y: 0,\r\n      transition: { delay: i * 0.15, duration: 0.6 },\r\n    }),\r\n  };\r\n\r\n  const handleContinueTest = () => {\r\n    if (lastAttempt) {\r\n      router.push(`/student/exam/${lastAttempt.examId}/attempt/${lastAttempt.attemptId}`);\r\n    }\r\n  };\r\n\r\n  const handleContinueCourse = (courseId: string) => {\r\n    router.push(`/learn/${courseId}`);\r\n  };\r\n\r\n  const handleEnrollCourse = (courseId: string, price: number) => {\r\n    if (!user?.id) {\r\n      toast.error(\"Please log in to enroll\");\r\n      router.push(\"/auth/login\");\r\n      return;\r\n    }\r\n\r\n    if (price === 0) {\r\n      // Free course - use mutation hook\r\n      setEnrollingCourseId(courseId);\r\n      enrollMutation.mutate(\r\n        { courseId, userId: user.id },\r\n        {\r\n          onSuccess: () => {\r\n            setEnrollingCourseId(null);\r\n            router.push(`/learn/${courseId}`);\r\n          },\r\n          onError: () => {\r\n            setEnrollingCourseId(null);\r\n          },\r\n        }\r\n      );\r\n    } else {\r\n      // Paid course - go to course page for payment\r\n      router.push(`/courses/${courseId}`);\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString: string | null) => {\r\n    if (!dateString) return \"TBA\";\r\n    const date = new Date(dateString);\r\n    return date.toLocaleDateString(\"en-US\", {\r\n      day: \"numeric\",\r\n      month: \"short\",\r\n      year: \"numeric\"\r\n    });\r\n  };\r\n\r\n  const getSeriesIcon = (index: number) => {\r\n    const icons = [\r\n      <BookOpen key=\"book\" className=\"w-5 h-5 text-indigo-500\" />,\r\n      <Calendar key=\"cal\" className=\"w-5 h-5 text-green-500\" />,\r\n      <Star key=\"star\" className=\"w-5 h-5 text-yellow-500\" />,\r\n    ];\r\n    return icons[index % icons.length];\r\n  };\r\n\r\n  const statsData = [\r\n    {\r\n      title: \"Total Exams Given\",\r\n      value: statsLoading ? \"...\" : stats?.totalExams.toString() || \"0\",\r\n      icon: <CheckCircle2 className=\"w-6 h-6 text-green-500\" />,\r\n      color: \"from-green-50 to-emerald-100 dark:from-slate-800 dark:to-slate-900\",\r\n    },\r\n    {\r\n      title: \"Average Score\",\r\n      value: statsLoading ? \"...\" : `${stats?.averageScore || 0}%`,\r\n      icon: <TrendingUp className=\"w-6 h-6 text-indigo-500\" />,\r\n      color: \"from-indigo-50 to-blue-100 dark:from-slate-800 dark:to-slate-900\",\r\n    },\r\n    {\r\n      title: \"Courses Enrolled\",\r\n      value: myCoursesLoading ? \"...\" : myCourses?.length.toString() || \"0\",\r\n      icon: <GraduationCap className=\"w-6 h-6 text-purple-500\" />,\r\n      color: \"from-purple-50 to-pink-100 dark:from-slate-800 dark:to-slate-900\",\r\n    },\r\n    {\r\n      title: \"Rank\",\r\n      value: statsLoading ? \"...\" : `#${stats?.rank || 0}`,\r\n      icon: <Award className=\"w-6 h-6 text-yellow-500\" />,\r\n      color: \"from-yellow-50 to-amber-100 dark:from-slate-800 dark:to-slate-900\",\r\n    },\r\n  ];\r\n\r\n  if (userLoading) {\r\n    return (\r\n      <div className=\"p-6 md:p-10 space-y-8 bg-linear-to-br from-sky-50 via-white to-indigo-50 dark:from-slate-900 dark:via-slate-950 dark:to-slate-900 min-h-screen\">\r\n        {/* Welcome Skeleton */}\r\n        <div className=\"rounded-3xl p-6 md:p-8 bg-white/60 dark:bg-slate-800/60 backdrop-blur-lg shadow-xl border border-slate-100 dark:border-slate-700 animate-pulse\">\r\n          <div className=\"h-8 w-64 bg-slate-200 dark:bg-slate-700 rounded mb-2\" />\r\n          <div className=\"h-4 w-96 bg-slate-100 dark:bg-slate-600 rounded\" />\r\n        </div>\r\n\r\n        {/* Stats Skeleton */}\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5\">\r\n          {[1, 2, 3, 4].map((i) => (\r\n            <div key={i} className=\"p-5 rounded-2xl bg-white/70 dark:bg-slate-800/60 shadow-lg border border-slate-100 dark:border-slate-700 animate-pulse\">\r\n              <div className=\"flex justify-between items-center mb-4\">\r\n                <div className=\"w-12 h-12 bg-slate-200 dark:bg-slate-700 rounded-lg\" />\r\n                <div className=\"h-4 w-16 bg-slate-100 dark:bg-slate-600 rounded\" />\r\n              </div>\r\n              <div className=\"h-8 w-20 bg-slate-200 dark:bg-slate-700 rounded mb-2\" />\r\n              <div className=\"h-3 w-24 bg-slate-100 dark:bg-slate-600 rounded\" />\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Tabs Skeleton */}\r\n        <div className=\"flex gap-2 border-b border-slate-200 dark:border-slate-700 pb-1\">\r\n          {[1, 2, 3, 4].map((i) => (\r\n            <div key={i} className=\"h-10 w-24 bg-slate-200 dark:bg-slate-700 rounded animate-pulse\" />\r\n          ))}\r\n        </div>\r\n\r\n        {/* Course Cards Skeleton */}\r\n        <div className=\"rounded-3xl bg-white/70 dark:bg-slate-800/60 backdrop-blur-lg p-6 shadow-xl border border-slate-100 dark:border-slate-700\">\r\n          <div className=\"h-6 w-48 bg-slate-200 dark:bg-slate-700 rounded mb-4 animate-pulse\" />\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n            {[1, 2, 3].map((i) => (\r\n              <div key={i} className=\"p-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 shadow-md animate-pulse\">\r\n                <div className=\"h-40 w-full bg-slate-200 dark:bg-slate-700 rounded-lg mb-3\" />\r\n                <div className=\"h-5 w-3/4 bg-slate-200 dark:bg-slate-700 rounded mb-2\" />\r\n                <div className=\"h-4 w-full bg-slate-100 dark:bg-slate-600 rounded mb-1\" />\r\n                <div className=\"h-4 w-2/3 bg-slate-100 dark:bg-slate-600 rounded mb-3\" />\r\n                <div className=\"h-2 w-full bg-slate-100 dark:bg-slate-600 rounded mb-3\" />\r\n                <div className=\"h-10 w-full bg-slate-200 dark:bg-slate-700 rounded\" />\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-6 md:p-10 space-y-8 bg-linear-to-br from-sky-50 via-white to-indigo-50 dark:from-slate-900 dark:via-slate-950 dark:to-slate-900 min-h-screen transition-colors duration-700\">\r\n      {/* Welcome Section */}\r\n      <motion.div\r\n        variants={fadeIn}\r\n        initial=\"hidden\"\r\n        animate=\"visible\"\r\n        custom={0}\r\n        className=\"rounded-3xl p-6 md:p-8 bg-white/60 dark:bg-slate-800/60 backdrop-blur-lg shadow-xl border border-slate-100 dark:border-slate-700 flex flex-col md:flex-row justify-between items-center\"\r\n      >\r\n        <div>\r\n          <h2 className=\"text-2xl md:text-3xl font-bold text-slate-800 dark:text-white\">\r\n            Welcome back, <span className=\"text-indigo-600 dark:text-indigo-400\">{user?.fullName || \"Student\"}!</span>\r\n          </h2>\r\n          <p className=\"text-slate-600 dark:text-slate-400 mt-2\">\r\n            Keep up the great work! You're progressing steadily towards your goals.\r\n          </p>\r\n        </div>\r\n\r\n        {lastAttempt && (\r\n          <motion.button\r\n            whileHover={{ scale: 1.05 }}\r\n            onClick={handleContinueTest}\r\n            className=\"mt-4 md:mt-0 bg-linear-to-r from-green-500 to-emerald-600 text-white px-5 py-3 rounded-xl shadow-lg flex items-center gap-2 cursor-pointer\"\r\n          >\r\n            <PlayCircle className=\"w-5 h-5\" />\r\n            <span className=\"font-medium\">Continue Last Test</span>\r\n          </motion.button>\r\n        )}\r\n      </motion.div>\r\n\r\n      {/* Statistics Section */}\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5\">\r\n        {statsData.map((stat, i) => (\r\n          <motion.div\r\n            key={i}\r\n            variants={fadeIn}\r\n            initial=\"hidden\"\r\n            animate=\"visible\"\r\n            custom={i + 1}\r\n            whileHover={{ scale: 1.03 }}\r\n            className={`p-5 rounded-2xl bg-linear-to-br ${stat.color} shadow-lg border border-slate-100 dark:border-slate-700 flex items-center justify-between`}\r\n          >\r\n            <div>\r\n              <p className=\"text-sm text-slate-600 dark:text-slate-300\">{stat.title}</p>\r\n              <h3 className=\"text-2xl font-bold text-slate-800 dark:text-white\">{stat.value}</h3>\r\n            </div>\r\n            {stat.icon}\r\n          </motion.div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Tabs */}\r\n      <div className=\"flex gap-2 border-b border-slate-200 dark:border-slate-700 overflow-x-auto pb-1 scrollbar-hide\">\r\n        {[\r\n          { id: \"overview\", label: \"Overview\" },\r\n          { id: \"my-courses\", label: \"My Courses\" },\r\n          { id: \"all-courses\", label: \"All Courses\" },\r\n          { id: \"test-series\", label: \"Test Series\" },\r\n          { id: \"all-test-series\", label: \"All Test Series\" },\r\n        ].map((tab) => (\r\n          <button\r\n            key={tab.id}\r\n            onClick={() => setActiveTab(tab.id as any)}\r\n            className={`px-4 py-2 font-medium transition-colors whitespace-nowrap ${activeTab === tab.id\r\n              ? \"text-indigo-600 dark:text-indigo-400 border-b-2 border-indigo-600 dark:border-indigo-400\"\r\n              : \"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200\"\r\n              }`}\r\n          >\r\n            {tab.label}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Tab Content */}\r\n      {activeTab === \"overview\" && (\r\n        <div className=\"space-y-6\">\r\n          {/* Recent Courses & Test Series */}\r\n          {((myCourses && myCourses.length > 0) || (testSeries && testSeries.length > 0)) && (\r\n            <motion.div\r\n              variants={fadeIn}\r\n              initial=\"hidden\"\r\n              animate=\"visible\"\r\n              custom={5}\r\n              className=\"rounded-3xl bg-white/70 dark:bg-slate-800/60 backdrop-blur-lg p-6 shadow-xl border border-slate-100 dark:border-slate-700\"\r\n            >\r\n              <div className=\"flex justify-between items-center mb-4\">\r\n                <h3 className=\"text-xl font-semibold text-slate-800 dark:text-white\">Continue Learning</h3>\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  onClick={() => setActiveTab(\"my-courses\")}\r\n                  className=\"text-indigo-600 dark:text-indigo-400\"\r\n                >\r\n                  View All <ArrowRight className=\"w-4 h-4 ml-1\" />\r\n                </Button>\r\n              </div>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                {/* Courses */}\r\n                {myCourses?.slice(0, 2).map((course) => (\r\n                  <motion.div\r\n                    key={course.id}\r\n                    whileHover={{ scale: 1.02 }}\r\n                    onClick={() => handleContinueCourse(course.id)}\r\n                    onMouseEnter={() => prefetchCourse(course.id)}\r\n                    className=\"p-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 shadow-md cursor-pointer\"\r\n                  >\r\n                    <div className=\"flex items-start justify-between mb-2\">\r\n                      <h4 className=\"font-semibold text-slate-800 dark:text-white flex-1\">{course.title}</h4>\r\n                      <span className=\"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300\">\r\n                        Course\r\n                      </span>\r\n                    </div>\r\n                    {expiryMap.has(course.id) && (\r\n                      <DashboardExpiryBadge\r\n                        daysRemaining={expiryMap.get(course.id).daysRemaining}\r\n                        isExpired={expiryMap.get(course.id).isExpired}\r\n                        urgencyLevel={expiryMap.get(course.id).urgencyLevel}\r\n                      />\r\n                    )}\r\n                    <div className=\"flex justify-between text-xs mb-2 text-slate-500 dark:text-slate-400 mt-2\">\r\n                      <span>Progress</span>\r\n                      <span>{course.progress_percentage.toFixed(0)}%</span>\r\n                    </div>\r\n                    <div className=\"w-full h-2 rounded-full bg-slate-200 dark:bg-slate-700\">\r\n                      <div\r\n                        className=\"h-2 rounded-full bg-linear-to-r from-indigo-500 to-purple-500\"\r\n                        style={{ width: `${course.progress_percentage}%` }}\r\n                      />\r\n                    </div>\r\n                  </motion.div>\r\n                ))}\r\n\r\n                {/* Test Series */}\r\n                {testSeries?.slice(0, 1).map((test) => (\r\n                  <motion.div\r\n                    key={test.id}\r\n                    whileHover={{ scale: 1.02 }}\r\n                    onClick={() => handleContinueCourse(test.id)}\r\n                    onMouseEnter={() => prefetchCourse(test.id)}\r\n                    className=\"p-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 shadow-md cursor-pointer\"\r\n                  >\r\n                    <div className=\"flex items-start justify-between mb-2\">\r\n                      <h4 className=\"font-semibold text-slate-800 dark:text-white flex-1\">{test.title}</h4>\r\n                      <span className=\"px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300\">\r\n                        Test Series\r\n                      </span>\r\n                    </div>\r\n                    {expiryMap.has(test.id) && (\r\n                      <DashboardExpiryBadge\r\n                        daysRemaining={expiryMap.get(test.id).daysRemaining}\r\n                        isExpired={expiryMap.get(test.id).isExpired}\r\n                        urgencyLevel={expiryMap.get(test.id).urgencyLevel}\r\n                      />\r\n                    )}\r\n                    <div className=\"flex justify-between text-xs mb-2 text-slate-500 dark:text-slate-400 mt-2\">\r\n                      <span>Progress</span>\r\n                      <span>{test.progress.toFixed(0)}%</span>\r\n                    </div>\r\n                    <div className=\"w-full h-2 rounded-full bg-slate-200 dark:bg-slate-700\">\r\n                      <div\r\n                        className=\"h-2 rounded-full bg-linear-to-r from-indigo-500 to-purple-500\"\r\n                        style={{ width: `${test.progress}%` }}\r\n                      />\r\n                    </div>\r\n                  </motion.div>\r\n                ))}\r\n              </div>\r\n            </motion.div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {activeTab === \"my-courses\" && (\r\n        <motion.div\r\n          variants={fadeIn}\r\n          initial=\"hidden\"\r\n          animate=\"visible\"\r\n          custom={5}\r\n          className=\"rounded-3xl bg-white/70 dark:bg-slate-800/60 backdrop-blur-lg p-6 shadow-xl border border-slate-100 dark:border-slate-700\"\r\n        >\r\n          <h3 className=\"text-xl font-semibold text-slate-800 dark:text-white mb-4\">My Courses</h3>\r\n\r\n          {myCoursesLoading ? (\r\n            <div className=\"flex items-center justify-center py-8\">\r\n              <Loader2 className=\"w-6 h-6 animate-spin text-indigo-600\" />\r\n            </div>\r\n          ) : myCourses && myCourses.length > 0 ? (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n              {myCourses.map((course) => (\r\n                <motion.div\r\n                  key={course.id}\r\n                  whileHover={{ scale: 1.02 }}\r\n                  onClick={() => handleContinueCourse(course.id)}\r\n                  onMouseEnter={() => prefetchCourse(course.id)}\r\n                  className=\"p-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 shadow-md cursor-pointer\"\r\n                >\r\n                  <div className=\"h-40 w-full mb-3 rounded-lg overflow-hidden\">\r\n                    <CourseThumbnail\r\n                      src={course.thumbnail_url}\r\n                      title={course.title}\r\n                      category=\"Enrolled\"\r\n                      className=\"w-full h-full\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"flex items-start justify-between mb-2\">\r\n                    <h4 className=\"font-semibold text-slate-800 dark:text-white flex-1\">{course.title}</h4>\r\n                    {expiryMap.has(course.id) && (\r\n                      <DashboardExpiryBadge\r\n                        daysRemaining={expiryMap.get(course.id).daysRemaining}\r\n                        isExpired={expiryMap.get(course.id).isExpired}\r\n                        urgencyLevel={expiryMap.get(course.id).urgencyLevel}\r\n                      />\r\n                    )}\r\n                  </div>\r\n                  <p className=\"text-sm text-slate-600 dark:text-slate-400 mb-3 line-clamp-2\">{course.description}</p>\r\n                  <div className=\"flex justify-between text-xs mb-2 text-slate-500 dark:text-slate-400\">\r\n                    <span>{course.completed_lessons}/{course.total_lessons} lessons</span>\r\n                    <span>{course.progress_percentage.toFixed(0)}%</span>\r\n                  </div>\r\n                  <div className=\"w-full h-2 rounded-full bg-slate-200 dark:bg-slate-700 mb-3\">\r\n                    <div\r\n                      className=\"h-2 rounded-full bg-linear-to-r from-indigo-500 to-purple-500\"\r\n                      style={{ width: `${course.progress_percentage}%` }}\r\n                    />\r\n                  </div>\r\n                  <Button\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      handleContinueCourse(course.id);\r\n                    }}\r\n                    className=\"w-full bg-linear-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700\"\r\n                  >\r\n                    Continue Learning\r\n                  </Button>\r\n                </motion.div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-center py-8 text-slate-500 dark:text-slate-400\">\r\n              <GraduationCap className=\"w-12 h-12 mx-auto mb-3 opacity-50\" />\r\n              <p>No courses enrolled yet</p>\r\n              <p className=\"text-sm mt-1\">Browse available courses to get started</p>\r\n              <Button\r\n                onClick={() => setActiveTab(\"all-courses\")}\r\n                className=\"mt-4 bg-indigo-600 hover:bg-indigo-700\"\r\n              >\r\n                Browse Courses\r\n              </Button>\r\n            </div>\r\n          )}\r\n        </motion.div>\r\n      )}\r\n\r\n      {activeTab === \"all-courses\" && (\r\n        <motion.div\r\n          variants={fadeIn}\r\n          initial=\"hidden\"\r\n          animate=\"visible\"\r\n          custom={5}\r\n          className=\"rounded-3xl bg-white/70 dark:bg-slate-800/60 backdrop-blur-lg p-6 shadow-xl border border-slate-100 dark:border-slate-700\"\r\n        >\r\n          <h3 className=\"text-xl font-semibold text-slate-800 dark:text-white mb-4\">All Courses</h3>\r\n\r\n          {allCoursesLoading ? (\r\n            <div className=\"flex items-center justify-center py-8\">\r\n              <Loader2 className=\"w-6 h-6 animate-spin text-indigo-600\" />\r\n            </div>\r\n          ) : allCourses && allCourses.length > 0 ? (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n              {allCourses.map((course) => (\r\n                <motion.div\r\n                  key={course.id}\r\n                  whileHover={{ scale: 1.02 }}\r\n                  onMouseEnter={() => prefetchCourse(course.id)}\r\n                  className=\"p-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 shadow-md\"\r\n                >\r\n                  <div className=\"h-40 w-full mb-3 rounded-lg overflow-hidden\">\r\n                    <CourseThumbnail\r\n                      src={course.thumbnail_url}\r\n                      title={course.title}\r\n                      category=\"Course\"\r\n                      className=\"w-full h-full\"\r\n                    />\r\n                  </div>\r\n                  <h4 className=\"font-semibold text-slate-800 dark:text-white mb-2\">{course.title}</h4>\r\n                  <p className=\"text-sm text-slate-600 dark:text-slate-400 mb-2\">By {course.instructor_name}</p>\r\n                  <p className=\"text-sm text-slate-600 dark:text-slate-400 mb-3 line-clamp-2\">{course.description}</p>\r\n                  <div className=\"flex justify-between items-center mb-3\">\r\n                    <span className=\"text-sm text-slate-500 dark:text-slate-400\">{course.total_lessons} lessons</span>\r\n                    <span className=\"text-lg font-bold text-indigo-600 dark:text-indigo-400\">\r\n                      {course.price === 0 ? \"Free\" : `₹${course.price}`}\r\n                    </span>\r\n                  </div>\r\n                  {course.is_enrolled ? (\r\n                    <Button\r\n                      onClick={() => handleContinueCourse(course.id)}\r\n                      className=\"w-full bg-green-600 hover:bg-green-700\"\r\n                    >\r\n                      Continue Learning\r\n                    </Button>\r\n                  ) : (\r\n                    <Button\r\n                      onClick={() => handleEnrollCourse(course.id, course.price)}\r\n                      disabled={enrollingCourseId === course.id}\r\n                      className=\"w-full bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50\"\r\n                    >\r\n                      {enrollingCourseId === course.id ? (\r\n                        <>\r\n                          <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\r\n                          Enrolling...\r\n                        </>\r\n                      ) : (\r\n                        <>\r\n                          <ShoppingCart className=\"w-4 h-4 mr-2\" />\r\n                          {course.price === 0 ? \"Enroll Free\" : \"View Course\"}\r\n                        </>\r\n                      )}\r\n                    </Button>\r\n                  )}\r\n                </motion.div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-center py-8 text-slate-500 dark:text-slate-400\">\r\n              <BookOpen className=\"w-12 h-12 mx-auto mb-3 opacity-50\" />\r\n              <p>No courses available yet</p>\r\n            </div>\r\n          )}\r\n        </motion.div>\r\n      )}\r\n\r\n      {activeTab === \"test-series\" && (\r\n        <motion.div\r\n          variants={fadeIn}\r\n          initial=\"hidden\"\r\n          animate=\"visible\"\r\n          custom={5}\r\n          className=\"rounded-3xl bg-white/70 dark:bg-slate-800/60 backdrop-blur-lg p-6 shadow-xl border border-slate-100 dark:border-slate-700\"\r\n        >\r\n          <h3 className=\"text-xl font-semibold text-slate-800 dark:text-white mb-4\">Your Test Series</h3>\r\n\r\n          {seriesLoading ? (\r\n            <div className=\"flex items-center justify-center py-8\">\r\n              <Loader2 className=\"w-6 h-6 animate-spin text-indigo-600\" />\r\n            </div>\r\n          ) : testSeries && testSeries.length > 0 ? (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n              {testSeries.map((test) => (\r\n                <motion.div\r\n                  key={test.id}\r\n                  whileHover={{ scale: 1.02 }}\r\n                  onClick={() => handleContinueCourse(test.id)}\r\n                  onMouseEnter={() => prefetchCourse(test.id)}\r\n                  className=\"p-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 shadow-md cursor-pointer\"\r\n                >\r\n                  <div className=\"h-40 w-full mb-3 rounded-lg overflow-hidden\">\r\n                    <CourseThumbnail\r\n                      src={test.thumbnail_url}\r\n                      title={test.title}\r\n                      category=\"Test Series\"\r\n                      className=\"w-full h-full\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"flex items-start justify-between mb-2\">\r\n                    <h4 className=\"font-semibold text-slate-800 dark:text-white flex-1\">{test.title}</h4>\r\n                    {expiryMap.has(test.id) && (\r\n                      <DashboardExpiryBadge\r\n                        daysRemaining={expiryMap.get(test.id).daysRemaining}\r\n                        isExpired={expiryMap.get(test.id).isExpired}\r\n                        urgencyLevel={expiryMap.get(test.id).urgencyLevel}\r\n                      />\r\n                    )}\r\n                  </div>\r\n                  <p className=\"text-sm text-slate-600 dark:text-slate-400 mb-3 line-clamp-2\">{test.description}</p>\r\n                  <div className=\"flex justify-between text-xs mb-2 text-slate-500 dark:text-slate-400\">\r\n                    <span>{test.completedExams}/{test.totalExams} exams</span>\r\n                    <span>{test.progress.toFixed(0)}%</span>\r\n                  </div>\r\n                  <div className=\"w-full h-2 rounded-full bg-slate-200 dark:bg-slate-700 mb-3\">\r\n                    <div\r\n                      className=\"h-2 rounded-full bg-linear-to-r from-indigo-500 to-purple-500\"\r\n                      style={{ width: `${test.progress}%` }}\r\n                    />\r\n                  </div>\r\n                  <Button\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      handleContinueCourse(test.id);\r\n                    }}\r\n                    className=\"w-full bg-linear-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700\"\r\n                  >\r\n                    Continue Learning\r\n                  </Button>\r\n                </motion.div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-center py-8 text-slate-500 dark:text-slate-400\">\r\n              <BookOpen className=\"w-12 h-12 mx-auto mb-3 opacity-50\" />\r\n              <p>No test series enrolled yet</p>\r\n              <p className=\"text-sm mt-1\">Browse available test series to get started</p>\r\n              <Button\r\n                onClick={() => setActiveTab(\"all-test-series\")}\r\n                className=\"mt-4 bg-indigo-600 hover:bg-indigo-700\"\r\n              >\r\n                Browse Test Series\r\n              </Button>\r\n            </div>\r\n          )}\r\n        </motion.div>\r\n      )}\r\n\r\n      {activeTab === \"all-test-series\" && (\r\n        <motion.div\r\n          variants={fadeIn}\r\n          initial=\"hidden\"\r\n          animate=\"visible\"\r\n          custom={5}\r\n          className=\"rounded-3xl bg-white/70 dark:bg-slate-800/60 backdrop-blur-lg p-6 shadow-xl border border-slate-100 dark:border-slate-700\"\r\n        >\r\n          <h3 className=\"text-xl font-semibold text-slate-800 dark:text-white mb-4\">All Test Series</h3>\r\n\r\n          {allTestSeriesLoading ? (\r\n            <div className=\"flex items-center justify-center py-8\">\r\n              <Loader2 className=\"w-6 h-6 animate-spin text-indigo-600\" />\r\n            </div>\r\n          ) : allTestSeries && allTestSeries.length > 0 ? (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n              {allTestSeries.map((series: any) => (\r\n                <motion.div\r\n                  key={series.id}\r\n                  whileHover={{ scale: 1.02 }}\r\n                  onMouseEnter={() => prefetchCourse(series.id)}\r\n                  className=\"p-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 shadow-md\"\r\n                >\r\n                  <div className=\"h-40 w-full mb-3 rounded-lg overflow-hidden\">\r\n                    <CourseThumbnail\r\n                      src={series.thumbnail_url}\r\n                      title={series.title}\r\n                      category=\"Test Series\"\r\n                      className=\"w-full h-full\"\r\n                    />\r\n                  </div>\r\n                  <h4 className=\"font-semibold text-slate-800 dark:text-white mb-2\">{series.title}</h4>\r\n                  <p className=\"text-sm text-slate-600 dark:text-slate-400 mb-3 line-clamp-2\">{series.description}</p>\r\n                  <div className=\"flex justify-between text-xs mb-3 text-slate-500 dark:text-slate-400\">\r\n                    <span>{series.total_lessons || 0} exams</span>\r\n                    <span className=\"font-semibold text-indigo-600 dark:text-indigo-400\">\r\n                      {series.price === 0 ? \"Free\" : `₹${series.price}`}\r\n                    </span>\r\n                  </div>\r\n                  {series.is_enrolled ? (\r\n                    <Button\r\n                      onClick={() => handleContinueCourse(series.id)}\r\n                      className=\"w-full bg-green-600 hover:bg-green-700\"\r\n                    >\r\n                      Continue Learning\r\n                    </Button>\r\n                  ) : (\r\n                    <Button\r\n                      onClick={() => handleEnrollCourse(series.id, series.price)}\r\n                      disabled={enrollingCourseId === series.id}\r\n                      className=\"w-full bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50\"\r\n                    >\r\n                      {enrollingCourseId === series.id ? (\r\n                        <>\r\n                          <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\r\n                          Enrolling...\r\n                        </>\r\n                      ) : (\r\n                        <>\r\n                          <ShoppingCart className=\"w-4 h-4 mr-2\" />\r\n                          {series.price === 0 ? \"Enroll Free\" : \"View Details\"}\r\n                        </>\r\n                      )}\r\n                    </Button>\r\n                  )}\r\n                </motion.div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-center py-8 text-slate-500 dark:text-slate-400\">\r\n              <BookOpen className=\"w-12 h-12 mx-auto mb-3 opacity-50\" />\r\n              <p>No test series available yet</p>\r\n            </div>\r\n          )}\r\n        </motion.div>\r\n      )}\r\n\r\n      {/* Achievements Section */}\r\n      {stats && stats.averageScore >= 75 && (\r\n        <motion.div\r\n          variants={fadeIn}\r\n          initial=\"hidden\"\r\n          animate=\"visible\"\r\n          custom={6}\r\n          className=\"rounded-3xl bg-linear-to-br from-green-500 to-emerald-600 p-6 text-white shadow-xl\"\r\n        >\r\n          <div className=\"flex items-center justify-between flex-wrap gap-3\">\r\n            <div>\r\n              <h3 className=\"text-lg font-semibold\">Congratulations! 🎉</h3>\r\n              <p className=\"text-sm opacity-90\">\r\n                You're performing excellently with {stats.averageScore}% average score!\r\n              </p>\r\n            </div>\r\n            <motion.button\r\n              whileHover={{ scale: 1.05 }}\r\n              onClick={() => router.push(\"/student/achievements\")}\r\n              className=\"px-4 py-2 rounded-lg bg-white text-indigo-600 font-semibold shadow-md\"\r\n            >\r\n              View Achievements\r\n            </motion.button>\r\n          </div>\r\n        </motion.div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAcA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAhCA;;;;;;;;;;;;;;;;;;;;AAkCe,SAAS;IACtB,MAAM,SAAS,IAAA,8LAAS;IACxB,MAAM,eAAe,IAAA,oMAAe;IACpC,MAAM,WAAW,aAAa,GAAG,CAAC;IAClC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,8KAAQ,EAAgF;IAE1H,oCAAoC;IACpC,IAAA,+KAAS,EAAC;QACR,IAAI,aAAa,gBAAgB,aAAa,iBAAiB,aAAa,iBAAiB,aAAa,mBAAmB;YAC3H,aAAa;QACf;IACF,GAAG;QAAC;KAAS;IAEb,aAAa;IACb,MAAM,EAAE,MAAM,IAAI,EAAE,WAAW,WAAW,EAAE,GAAG,IAAA,4JAAc;IAC7D,MAAM,EAAE,MAAM,KAAK,EAAE,WAAW,YAAY,EAAE,GAAG,IAAA,8JAAe,EAAC,MAAM;IACvE,MAAM,EAAE,MAAM,UAAU,EAAE,WAAW,aAAa,EAAE,GAAG,IAAA,wKAAoB,EAAC,MAAM;IAClF,MAAM,EAAE,MAAM,WAAW,EAAE,GAAG,IAAA,4JAAc,EAAC,MAAM;IACnD,MAAM,EAAE,MAAM,SAAS,EAAE,WAAW,gBAAgB,EAAE,GAAG,IAAA,kKAAiB,EAAC,MAAM;IACjF,MAAM,EAAE,MAAM,UAAU,EAAE,WAAW,iBAAiB,EAAE,GAAG,IAAA,0JAAa,EAAC,MAAM;IAC/E,MAAM,EAAE,MAAM,aAAa,EAAE,WAAW,oBAAoB,EAAE,GAAG,IAAA,gKAAgB;IACjF,MAAM,EAAE,MAAM,qBAAqB,EAAE,GAAG,IAAA,qKAAwB;IAEhE,4DAA4D;IAC5D,MAAM,YAAY,IAAA,6KAAO,EAAC;QACxB,MAAM,MAAM,IAAI;QAChB,uBAAuB,QAAQ,CAAC;YAC9B,IAAI,GAAG,CAAC,WAAW,SAAS,EAAE;gBAC5B,eAAe,WAAW,aAAa;gBACvC,WAAW,WAAW,SAAS;gBAC/B,cAAc,WAAW,YAAY;YACvC;QACF;QACA,OAAO;IACT,GAAG;QAAC;KAAsB;IAE1B,sDAAsD;IACtD,MAAM,EAAE,cAAc,EAAE,GAAG,IAAA,uJAAiB;IAE5C,sBAAsB;IACtB,MAAM,iBAAiB,IAAA,gKAAe;IACtC,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,8KAAQ,EAAgB;IAE1E,MAAM,SAAS;QACb,QAAQ;YAAE,SAAS;YAAG,GAAG;QAAG;QAC5B,SAAS,CAAC,IAAc,CAAC;gBACvB,SAAS;gBACT,GAAG;gBACH,YAAY;oBAAE,OAAO,IAAI;oBAAM,UAAU;gBAAI;YAC/C,CAAC;IACH;IAEA,MAAM,qBAAqB;QACzB,IAAI,aAAa;YACf,OAAO,IAAI,CAAC,CAAC,cAAc,EAAE,YAAY,MAAM,CAAC,SAAS,EAAE,YAAY,SAAS,EAAE;QACpF;IACF;IAEA,MAAM,uBAAuB,CAAC;QAC5B,OAAO,IAAI,CAAC,CAAC,OAAO,EAAE,UAAU;IAClC;IAEA,MAAM,qBAAqB,CAAC,UAAkB;QAC5C,IAAI,CAAC,MAAM,IAAI;YACb,yJAAK,CAAC,KAAK,CAAC;YACZ,OAAO,IAAI,CAAC;YACZ;QACF;QAEA,IAAI,UAAU,GAAG;YACf,kCAAkC;YAClC,qBAAqB;YACrB,eAAe,MAAM,CACnB;gBAAE;gBAAU,QAAQ,KAAK,EAAE;YAAC,GAC5B;gBACE,WAAW;oBACT,qBAAqB;oBACrB,OAAO,IAAI,CAAC,CAAC,OAAO,EAAE,UAAU;gBAClC;gBACA,SAAS;oBACP,qBAAqB;gBACvB;YACF;QAEJ,OAAO;YACL,8CAA8C;YAC9C,OAAO,IAAI,CAAC,CAAC,SAAS,EAAE,UAAU;QACpC;IACF;IAEA,MAAM,aAAa,CAAC;QAClB,IAAI,CAAC,YAAY,OAAO;QACxB,MAAM,OAAO,IAAI,KAAK;QACtB,OAAO,KAAK,kBAAkB,CAAC,SAAS;YACtC,KAAK;YACL,OAAO;YACP,MAAM;QACR;IACF;IAEA,MAAM,gBAAgB,CAAC;QACrB,MAAM,QAAQ;0BACZ,kMAAC,kOAAQ;gBAAY,WAAU;eAAjB;;;;;0BACd,kMAAC,8NAAQ;gBAAW,WAAU;eAAhB;;;;;0BACd,kMAAC,kNAAI;gBAAY,WAAU;eAAjB;;;;;SACX;QACD,OAAO,KAAK,CAAC,QAAQ,MAAM,MAAM,CAAC;IACpC;IAEA,MAAM,YAAY;QAChB;YACE,OAAO;YACP,OAAO,eAAe,QAAQ,OAAO,WAAW,cAAc;YAC9D,oBAAM,kMAAC,6OAAY;gBAAC,WAAU;;;;;;YAC9B,OAAO;QACT;QACA;YACE,OAAO;YACP,OAAO,eAAe,QAAQ,GAAG,OAAO,gBAAgB,EAAE,CAAC,CAAC;YAC5D,oBAAM,kMAAC,wOAAU;gBAAC,WAAU;;;;;;YAC5B,OAAO;QACT;QACA;YACE,OAAO;YACP,OAAO,mBAAmB,QAAQ,WAAW,OAAO,cAAc;YAClE,oBAAM,kMAAC,iPAAa;gBAAC,WAAU;;;;;;YAC/B,OAAO;QACT;QACA;YACE,OAAO;YACP,OAAO,eAAe,QAAQ,CAAC,CAAC,EAAE,OAAO,QAAQ,GAAG;YACpD,oBAAM,kMAAC,qNAAK;gBAAC,WAAU;;;;;;YACvB,OAAO;QACT;KACD;IAED,IAAI,aAAa;QACf,qBACE,kMAAC;YAAI,WAAU;;8BAEb,kMAAC;oBAAI,WAAU;;sCACb,kMAAC;4BAAI,WAAU;;;;;;sCACf,kMAAC;4BAAI,WAAU;;;;;;;;;;;;8BAIjB,kMAAC;oBAAI,WAAU;8BACZ;wBAAC;wBAAG;wBAAG;wBAAG;qBAAE,CAAC,GAAG,CAAC,CAAC,kBACjB,kMAAC;4BAAY,WAAU;;8CACrB,kMAAC;oCAAI,WAAU;;sDACb,kMAAC;4CAAI,WAAU;;;;;;sDACf,kMAAC;4CAAI,WAAU;;;;;;;;;;;;8CAEjB,kMAAC;oCAAI,WAAU;;;;;;8CACf,kMAAC;oCAAI,WAAU;;;;;;;2BANP;;;;;;;;;;8BAYd,kMAAC;oBAAI,WAAU;8BACZ;wBAAC;wBAAG;wBAAG;wBAAG;qBAAE,CAAC,GAAG,CAAC,CAAC,kBACjB,kMAAC;4BAAY,WAAU;2BAAb;;;;;;;;;;8BAKd,kMAAC;oBAAI,WAAU;;sCACb,kMAAC;4BAAI,WAAU;;;;;;sCACf,kMAAC;4BAAI,WAAU;sCACZ;gCAAC;gCAAG;gCAAG;6BAAE,CAAC,GAAG,CAAC,CAAC,kBACd,kMAAC;oCAAY,WAAU;;sDACrB,kMAAC;4CAAI,WAAU;;;;;;sDACf,kMAAC;4CAAI,WAAU;;;;;;sDACf,kMAAC;4CAAI,WAAU;;;;;;sDACf,kMAAC;4CAAI,WAAU;;;;;;sDACf,kMAAC;4CAAI,WAAU;;;;;;sDACf,kMAAC;4CAAI,WAAU;;;;;;;mCANP;;;;;;;;;;;;;;;;;;;;;;IAatB;IAEA,qBACE,kMAAC;QAAI,WAAU;;0BAEb,kMAAC,4MAAM,CAAC,GAAG;gBACT,UAAU;gBACV,SAAQ;gBACR,SAAQ;gBACR,QAAQ;gBACR,WAAU;;kCAEV,kMAAC;;0CACC,kMAAC;gCAAG,WAAU;;oCAAgE;kDAC9D,kMAAC;wCAAK,WAAU;;4CAAwC,MAAM,YAAY;4CAAU;;;;;;;;;;;;;0CAEpG,kMAAC;gCAAE,WAAU;0CAA0C;;;;;;;;;;;;oBAKxD,6BACC,kMAAC,4MAAM,CAAC,MAAM;wBACZ,YAAY;4BAAE,OAAO;wBAAK;wBAC1B,SAAS;wBACT,WAAU;;0CAEV,kMAAC,wOAAU;gCAAC,WAAU;;;;;;0CACtB,kMAAC;gCAAK,WAAU;0CAAc;;;;;;;;;;;;;;;;;;0BAMpC,kMAAC;gBAAI,WAAU;0BACZ,UAAU,GAAG,CAAC,CAAC,MAAM,kBACpB,kMAAC,4MAAM,CAAC,GAAG;wBAET,UAAU;wBACV,SAAQ;wBACR,SAAQ;wBACR,QAAQ,IAAI;wBACZ,YAAY;4BAAE,OAAO;wBAAK;wBAC1B,WAAW,CAAC,gCAAgC,EAAE,KAAK,KAAK,CAAC,0FAA0F,CAAC;;0CAEpJ,kMAAC;;kDACC,kMAAC;wCAAE,WAAU;kDAA8C,KAAK,KAAK;;;;;;kDACrE,kMAAC;wCAAG,WAAU;kDAAqD,KAAK,KAAK;;;;;;;;;;;;4BAE9E,KAAK,IAAI;;uBAZL;;;;;;;;;;0BAkBX,kMAAC;gBAAI,WAAU;0BACZ;oBACC;wBAAE,IAAI;wBAAY,OAAO;oBAAW;oBACpC;wBAAE,IAAI;wBAAc,OAAO;oBAAa;oBACxC;wBAAE,IAAI;wBAAe,OAAO;oBAAc;oBAC1C;wBAAE,IAAI;wBAAe,OAAO;oBAAc;oBAC1C;wBAAE,IAAI;wBAAmB,OAAO;oBAAkB;iBACnD,CAAC,GAAG,CAAC,CAAC,oBACL,kMAAC;wBAEC,SAAS,IAAM,aAAa,IAAI,EAAE;wBAClC,WAAW,CAAC,0DAA0D,EAAE,cAAc,IAAI,EAAE,GACxF,6FACA,qFACA;kCAEH,IAAI,KAAK;uBAPL,IAAI,EAAE;;;;;;;;;;YAahB,cAAc,4BACb,kMAAC;gBAAI,WAAU;0BAEZ,CAAC,AAAC,aAAa,UAAU,MAAM,GAAG,KAAO,cAAc,WAAW,MAAM,GAAG,CAAE,mBAC5E,kMAAC,4MAAM,CAAC,GAAG;oBACT,UAAU;oBACV,SAAQ;oBACR,SAAQ;oBACR,QAAQ;oBACR,WAAU;;sCAEV,kMAAC;4BAAI,WAAU;;8CACb,kMAAC;oCAAG,WAAU;8CAAuD;;;;;;8CACrE,kMAAC,6IAAM;oCACL,SAAQ;oCACR,MAAK;oCACL,SAAS,IAAM,aAAa;oCAC5B,WAAU;;wCACX;sDACU,kMAAC,wOAAU;4CAAC,WAAU;;;;;;;;;;;;;;;;;;sCAGnC,kMAAC;4BAAI,WAAU;;gCAEZ,WAAW,MAAM,GAAG,GAAG,IAAI,CAAC,uBAC3B,kMAAC,4MAAM,CAAC,GAAG;wCAET,YAAY;4CAAE,OAAO;wCAAK;wCAC1B,SAAS,IAAM,qBAAqB,OAAO,EAAE;wCAC7C,cAAc,IAAM,eAAe,OAAO,EAAE;wCAC5C,WAAU;;0DAEV,kMAAC;gDAAI,WAAU;;kEACb,kMAAC;wDAAG,WAAU;kEAAuD,OAAO,KAAK;;;;;;kEACjF,kMAAC;wDAAK,WAAU;kEAA8G;;;;;;;;;;;;4CAI/H,UAAU,GAAG,CAAC,OAAO,EAAE,mBACtB,kMAAC,0KAAoB;gDACnB,eAAe,UAAU,GAAG,CAAC,OAAO,EAAE,EAAE,aAAa;gDACrD,WAAW,UAAU,GAAG,CAAC,OAAO,EAAE,EAAE,SAAS;gDAC7C,cAAc,UAAU,GAAG,CAAC,OAAO,EAAE,EAAE,YAAY;;;;;;0DAGvD,kMAAC;gDAAI,WAAU;;kEACb,kMAAC;kEAAK;;;;;;kEACN,kMAAC;;4DAAM,OAAO,mBAAmB,CAAC,OAAO,CAAC;4DAAG;;;;;;;;;;;;;0DAE/C,kMAAC;gDAAI,WAAU;0DACb,cAAA,kMAAC;oDACC,WAAU;oDACV,OAAO;wDAAE,OAAO,GAAG,OAAO,mBAAmB,CAAC,CAAC,CAAC;oDAAC;;;;;;;;;;;;uCA1BhD,OAAO,EAAE;;;;;gCAiCjB,YAAY,MAAM,GAAG,GAAG,IAAI,CAAC,qBAC5B,kMAAC,4MAAM,CAAC,GAAG;wCAET,YAAY;4CAAE,OAAO;wCAAK;wCAC1B,SAAS,IAAM,qBAAqB,KAAK,EAAE;wCAC3C,cAAc,IAAM,eAAe,KAAK,EAAE;wCAC1C,WAAU;;0DAEV,kMAAC;gDAAI,WAAU;;kEACb,kMAAC;wDAAG,WAAU;kEAAuD,KAAK,KAAK;;;;;;kEAC/E,kMAAC;wDAAK,WAAU;kEAAkH;;;;;;;;;;;;4CAInI,UAAU,GAAG,CAAC,KAAK,EAAE,mBACpB,kMAAC,0KAAoB;gDACnB,eAAe,UAAU,GAAG,CAAC,KAAK,EAAE,EAAE,aAAa;gDACnD,WAAW,UAAU,GAAG,CAAC,KAAK,EAAE,EAAE,SAAS;gDAC3C,cAAc,UAAU,GAAG,CAAC,KAAK,EAAE,EAAE,YAAY;;;;;;0DAGrD,kMAAC;gDAAI,WAAU;;kEACb,kMAAC;kEAAK;;;;;;kEACN,kMAAC;;4DAAM,KAAK,QAAQ,CAAC,OAAO,CAAC;4DAAG;;;;;;;;;;;;;0DAElC,kMAAC;gDAAI,WAAU;0DACb,cAAA,kMAAC;oDACC,WAAU;oDACV,OAAO;wDAAE,OAAO,GAAG,KAAK,QAAQ,CAAC,CAAC,CAAC;oDAAC;;;;;;;;;;;;uCA1BnC,KAAK,EAAE;;;;;;;;;;;;;;;;;;;;;;YAqCzB,cAAc,8BACb,kMAAC,4MAAM,CAAC,GAAG;gBACT,UAAU;gBACV,SAAQ;gBACR,SAAQ;gBACR,QAAQ;gBACR,WAAU;;kCAEV,kMAAC;wBAAG,WAAU;kCAA4D;;;;;;oBAEzE,iCACC,kMAAC;wBAAI,WAAU;kCACb,cAAA,kMAAC,oOAAO;4BAAC,WAAU;;;;;;;;;;+BAEnB,aAAa,UAAU,MAAM,GAAG,kBAClC,kMAAC;wBAAI,WAAU;kCACZ,UAAU,GAAG,CAAC,CAAC,uBACd,kMAAC,4MAAM,CAAC,GAAG;gCAET,YAAY;oCAAE,OAAO;gCAAK;gCAC1B,SAAS,IAAM,qBAAqB,OAAO,EAAE;gCAC7C,cAAc,IAAM,eAAe,OAAO,EAAE;gCAC5C,WAAU;;kDAEV,kMAAC;wCAAI,WAAU;kDACb,cAAA,kMAAC,+JAAe;4CACd,KAAK,OAAO,aAAa;4CACzB,OAAO,OAAO,KAAK;4CACnB,UAAS;4CACT,WAAU;;;;;;;;;;;kDAGd,kMAAC;wCAAI,WAAU;;0DACb,kMAAC;gDAAG,WAAU;0DAAuD,OAAO,KAAK;;;;;;4CAChF,UAAU,GAAG,CAAC,OAAO,EAAE,mBACtB,kMAAC,0KAAoB;gDACnB,eAAe,UAAU,GAAG,CAAC,OAAO,EAAE,EAAE,aAAa;gDACrD,WAAW,UAAU,GAAG,CAAC,OAAO,EAAE,EAAE,SAAS;gDAC7C,cAAc,UAAU,GAAG,CAAC,OAAO,EAAE,EAAE,YAAY;;;;;;;;;;;;kDAIzD,kMAAC;wCAAE,WAAU;kDAAgE,OAAO,WAAW;;;;;;kDAC/F,kMAAC;wCAAI,WAAU;;0DACb,kMAAC;;oDAAM,OAAO,iBAAiB;oDAAC;oDAAE,OAAO,aAAa;oDAAC;;;;;;;0DACvD,kMAAC;;oDAAM,OAAO,mBAAmB,CAAC,OAAO,CAAC;oDAAG;;;;;;;;;;;;;kDAE/C,kMAAC;wCAAI,WAAU;kDACb,cAAA,kMAAC;4CACC,WAAU;4CACV,OAAO;gDAAE,OAAO,GAAG,OAAO,mBAAmB,CAAC,CAAC,CAAC;4CAAC;;;;;;;;;;;kDAGrD,kMAAC,6IAAM;wCACL,SAAS,CAAC;4CACR,EAAE,eAAe;4CACjB,qBAAqB,OAAO,EAAE;wCAChC;wCACA,WAAU;kDACX;;;;;;;+BAzCI,OAAO,EAAE;;;;;;;;;6CAgDpB,kMAAC;wBAAI,WAAU;;0CACb,kMAAC,iPAAa;gCAAC,WAAU;;;;;;0CACzB,kMAAC;0CAAE;;;;;;0CACH,kMAAC;gCAAE,WAAU;0CAAe;;;;;;0CAC5B,kMAAC,6IAAM;gCACL,SAAS,IAAM,aAAa;gCAC5B,WAAU;0CACX;;;;;;;;;;;;;;;;;;YAQR,cAAc,+BACb,kMAAC,4MAAM,CAAC,GAAG;gBACT,UAAU;gBACV,SAAQ;gBACR,SAAQ;gBACR,QAAQ;gBACR,WAAU;;kCAEV,kMAAC;wBAAG,WAAU;kCAA4D;;;;;;oBAEzE,kCACC,kMAAC;wBAAI,WAAU;kCACb,cAAA,kMAAC,oOAAO;4BAAC,WAAU;;;;;;;;;;+BAEnB,cAAc,WAAW,MAAM,GAAG,kBACpC,kMAAC;wBAAI,WAAU;kCACZ,WAAW,GAAG,CAAC,CAAC,uBACf,kMAAC,4MAAM,CAAC,GAAG;gCAET,YAAY;oCAAE,OAAO;gCAAK;gCAC1B,cAAc,IAAM,eAAe,OAAO,EAAE;gCAC5C,WAAU;;kDAEV,kMAAC;wCAAI,WAAU;kDACb,cAAA,kMAAC,+JAAe;4CACd,KAAK,OAAO,aAAa;4CACzB,OAAO,OAAO,KAAK;4CACnB,UAAS;4CACT,WAAU;;;;;;;;;;;kDAGd,kMAAC;wCAAG,WAAU;kDAAqD,OAAO,KAAK;;;;;;kDAC/E,kMAAC;wCAAE,WAAU;;4CAAkD;4CAAI,OAAO,eAAe;;;;;;;kDACzF,kMAAC;wCAAE,WAAU;kDAAgE,OAAO,WAAW;;;;;;kDAC/F,kMAAC;wCAAI,WAAU;;0DACb,kMAAC;gDAAK,WAAU;;oDAA8C,OAAO,aAAa;oDAAC;;;;;;;0DACnF,kMAAC;gDAAK,WAAU;0DACb,OAAO,KAAK,KAAK,IAAI,SAAS,CAAC,CAAC,EAAE,OAAO,KAAK,EAAE;;;;;;;;;;;;oCAGpD,OAAO,WAAW,iBACjB,kMAAC,6IAAM;wCACL,SAAS,IAAM,qBAAqB,OAAO,EAAE;wCAC7C,WAAU;kDACX;;;;;6DAID,kMAAC,6IAAM;wCACL,SAAS,IAAM,mBAAmB,OAAO,EAAE,EAAE,OAAO,KAAK;wCACzD,UAAU,sBAAsB,OAAO,EAAE;wCACzC,WAAU;kDAET,sBAAsB,OAAO,EAAE,iBAC9B;;8DACE,kMAAC,oOAAO;oDAAC,WAAU;;;;;;gDAA8B;;yEAInD;;8DACE,kMAAC,8OAAY;oDAAC,WAAU;;;;;;gDACvB,OAAO,KAAK,KAAK,IAAI,gBAAgB;;;;;;;;;+BA3CzC,OAAO,EAAE;;;;;;;;;6CAoDpB,kMAAC;wBAAI,WAAU;;0CACb,kMAAC,kOAAQ;gCAAC,WAAU;;;;;;0CACpB,kMAAC;0CAAE;;;;;;;;;;;;;;;;;;YAMV,cAAc,+BACb,kMAAC,4MAAM,CAAC,GAAG;gBACT,UAAU;gBACV,SAAQ;gBACR,SAAQ;gBACR,QAAQ;gBACR,WAAU;;kCAEV,kMAAC;wBAAG,WAAU;kCAA4D;;;;;;oBAEzE,8BACC,kMAAC;wBAAI,WAAU;kCACb,cAAA,kMAAC,oOAAO;4BAAC,WAAU;;;;;;;;;;+BAEnB,cAAc,WAAW,MAAM,GAAG,kBACpC,kMAAC;wBAAI,WAAU;kCACZ,WAAW,GAAG,CAAC,CAAC,qBACf,kMAAC,4MAAM,CAAC,GAAG;gCAET,YAAY;oCAAE,OAAO;gCAAK;gCAC1B,SAAS,IAAM,qBAAqB,KAAK,EAAE;gCAC3C,cAAc,IAAM,eAAe,KAAK,EAAE;gCAC1C,WAAU;;kDAEV,kMAAC;wCAAI,WAAU;kDACb,cAAA,kMAAC,+JAAe;4CACd,KAAK,KAAK,aAAa;4CACvB,OAAO,KAAK,KAAK;4CACjB,UAAS;4CACT,WAAU;;;;;;;;;;;kDAGd,kMAAC;wCAAI,WAAU;;0DACb,kMAAC;gDAAG,WAAU;0DAAuD,KAAK,KAAK;;;;;;4CAC9E,UAAU,GAAG,CAAC,KAAK,EAAE,mBACpB,kMAAC,0KAAoB;gDACnB,eAAe,UAAU,GAAG,CAAC,KAAK,EAAE,EAAE,aAAa;gDACnD,WAAW,UAAU,GAAG,CAAC,KAAK,EAAE,EAAE,SAAS;gDAC3C,cAAc,UAAU,GAAG,CAAC,KAAK,EAAE,EAAE,YAAY;;;;;;;;;;;;kDAIvD,kMAAC;wCAAE,WAAU;kDAAgE,KAAK,WAAW;;;;;;kDAC7F,kMAAC;wCAAI,WAAU;;0DACb,kMAAC;;oDAAM,KAAK,cAAc;oDAAC;oDAAE,KAAK,UAAU;oDAAC;;;;;;;0DAC7C,kMAAC;;oDAAM,KAAK,QAAQ,CAAC,OAAO,CAAC;oDAAG;;;;;;;;;;;;;kDAElC,kMAAC;wCAAI,WAAU;kDACb,cAAA,kMAAC;4CACC,WAAU;4CACV,OAAO;gDAAE,OAAO,GAAG,KAAK,QAAQ,CAAC,CAAC,CAAC;4CAAC;;;;;;;;;;;kDAGxC,kMAAC,6IAAM;wCACL,SAAS,CAAC;4CACR,EAAE,eAAe;4CACjB,qBAAqB,KAAK,EAAE;wCAC9B;wCACA,WAAU;kDACX;;;;;;;+BAzCI,KAAK,EAAE;;;;;;;;;6CAgDlB,kMAAC;wBAAI,WAAU;;0CACb,kMAAC,kOAAQ;gCAAC,WAAU;;;;;;0CACpB,kMAAC;0CAAE;;;;;;0CACH,kMAAC;gCAAE,WAAU;0CAAe;;;;;;0CAC5B,kMAAC,6IAAM;gCACL,SAAS,IAAM,aAAa;gCAC5B,WAAU;0CACX;;;;;;;;;;;;;;;;;;YAQR,cAAc,mCACb,kMAAC,4MAAM,CAAC,GAAG;gBACT,UAAU;gBACV,SAAQ;gBACR,SAAQ;gBACR,QAAQ;gBACR,WAAU;;kCAEV,kMAAC;wBAAG,WAAU;kCAA4D;;;;;;oBAEzE,qCACC,kMAAC;wBAAI,WAAU;kCACb,cAAA,kMAAC,oOAAO;4BAAC,WAAU;;;;;;;;;;+BAEnB,iBAAiB,cAAc,MAAM,GAAG,kBAC1C,kMAAC;wBAAI,WAAU;kCACZ,cAAc,GAAG,CAAC,CAAC,uBAClB,kMAAC,4MAAM,CAAC,GAAG;gCAET,YAAY;oCAAE,OAAO;gCAAK;gCAC1B,cAAc,IAAM,eAAe,OAAO,EAAE;gCAC5C,WAAU;;kDAEV,kMAAC;wCAAI,WAAU;kDACb,cAAA,kMAAC,+JAAe;4CACd,KAAK,OAAO,aAAa;4CACzB,OAAO,OAAO,KAAK;4CACnB,UAAS;4CACT,WAAU;;;;;;;;;;;kDAGd,kMAAC;wCAAG,WAAU;kDAAqD,OAAO,KAAK;;;;;;kDAC/E,kMAAC;wCAAE,WAAU;kDAAgE,OAAO,WAAW;;;;;;kDAC/F,kMAAC;wCAAI,WAAU;;0DACb,kMAAC;;oDAAM,OAAO,aAAa,IAAI;oDAAE;;;;;;;0DACjC,kMAAC;gDAAK,WAAU;0DACb,OAAO,KAAK,KAAK,IAAI,SAAS,CAAC,CAAC,EAAE,OAAO,KAAK,EAAE;;;;;;;;;;;;oCAGpD,OAAO,WAAW,iBACjB,kMAAC,6IAAM;wCACL,SAAS,IAAM,qBAAqB,OAAO,EAAE;wCAC7C,WAAU;kDACX;;;;;6DAID,kMAAC,6IAAM;wCACL,SAAS,IAAM,mBAAmB,OAAO,EAAE,EAAE,OAAO,KAAK;wCACzD,UAAU,sBAAsB,OAAO,EAAE;wCACzC,WAAU;kDAET,sBAAsB,OAAO,EAAE,iBAC9B;;8DACE,kMAAC,oOAAO;oDAAC,WAAU;;;;;;gDAA8B;;yEAInD;;8DACE,kMAAC,8OAAY;oDAAC,WAAU;;;;;;gDACvB,OAAO,KAAK,KAAK,IAAI,gBAAgB;;;;;;;;;+BA1CzC,OAAO,EAAE;;;;;;;;;6CAmDpB,kMAAC;wBAAI,WAAU;;0CACb,kMAAC,kOAAQ;gCAAC,WAAU;;;;;;0CACpB,kMAAC;0CAAE;;;;;;;;;;;;;;;;;;YAOV,SAAS,MAAM,YAAY,IAAI,oBAC9B,kMAAC,4MAAM,CAAC,GAAG;gBACT,UAAU;gBACV,SAAQ;gBACR,SAAQ;gBACR,QAAQ;gBACR,WAAU;0BAEV,cAAA,kMAAC;oBAAI,WAAU;;sCACb,kMAAC;;8CACC,kMAAC;oCAAG,WAAU;8CAAwB;;;;;;8CACtC,kMAAC;oCAAE,WAAU;;wCAAqB;wCACI,MAAM,YAAY;wCAAC;;;;;;;;;;;;;sCAG3D,kMAAC,4MAAM,CAAC,MAAM;4BACZ,YAAY;gCAAE,OAAO;4BAAK;4BAC1B,SAAS,IAAM,OAAO,IAAI,CAAC;4BAC3B,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AAQb"}}]
}
{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/hooks/useProfile.ts"],"sourcesContent":["\"use client\"\r\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { createClient } from '@/lib/supabase/client';\r\n\r\nexport type Profile = {\r\n  id: string;\r\n  email: string;\r\n  role: 'student' | 'admin';\r\n  full_name?: string | null;\r\n  created_at?: string | null;\r\n  updated_at?: string | null;\r\n  avatar_url?: string | null;\r\n  referral_code?: string | null;\r\n};\r\n\r\n/**\r\n * Fetch the current logged-in student's profile.\r\n * Now accepts optional abort signal.\r\n */\r\nexport const fetchProfile = async (signal?: AbortSignal): Promise<Profile | null> => {\r\n  const supabase = createClient();\r\n\r\n  // âœ… Correct destructuring\r\n  const {\r\n    data: { user },\r\n    error: userErr,\r\n  } = await supabase.auth.getUser();\r\n\r\n  if (userErr) throw userErr;\r\n  if (!user) return null;\r\n\r\n  const query = supabase\r\n    .from('profiles')\r\n    .select('*')\r\n    .eq('id', user.id);\r\n\r\n  // Attach signal if provided\r\n  if (signal) {\r\n    query.abortSignal(signal);\r\n  }\r\n\r\n  const { data, error } = await query.single();\r\n\r\n  if (error) throw error;\r\n  return data as Profile;\r\n};\r\n\r\n/**\r\n * React Query hook to get student profile.\r\n */\r\nexport const useProfileQuery = () => {\r\n  return useQuery({\r\n    queryKey: ['profile'],\r\n    queryFn: ({ signal }) => fetchProfile(signal), // Pass signal down\r\n    staleTime: 1000 * 60 * 1, // 1 minute\r\n    gcTime: 1000 * 60 * 15, // 15 mins\r\n    placeholderData: (previousData) => previousData, // keeps previous on refetch -> no UI flash\r\n    retry: 1,\r\n  });\r\n};\r\n\r\n/**\r\n * Update student profile (partial update).\r\n */\r\nexport const updateProfile = async (payload: Partial<Profile>) => {\r\n  const supabase = createClient();\r\n\r\n  const {\r\n    data: { user },\r\n    error: userErr,\r\n  } = await supabase.auth.getUser();\r\n\r\n  if (userErr) throw userErr;\r\n  if (!user) throw new Error('User not found');\r\n\r\n  const { data, error } = await supabase\r\n    .from('profiles')\r\n    .update({\r\n      ...payload,\r\n      updated_at: new Date().toISOString(),\r\n    })\r\n    .eq('id', user.id)\r\n    .select()\r\n    .single();\r\n\r\n  if (error) throw error;\r\n  return data as Profile;\r\n};\r\n\r\n/**\r\n * React Query mutation hook for updating profile.\r\n */\r\nexport const useUpdateProfileMutation = () => {\r\n  const qc = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: updateProfile,\r\n    onSuccess: () => {\r\n      // âœ… React Query v5 format\r\n      qc.invalidateQueries({ queryKey: ['profile'] });\r\n    },\r\n  });\r\n};\r\n"],"names":[],"mappings":";;;;;;;;;;AACA;AAAA;AAAA;AACA;AAFA;;;AAmBO,MAAM,eAAe,OAAO;IACjC,MAAM,WAAW,IAAA,iJAAY;IAE7B,0BAA0B;IAC1B,MAAM,EACJ,MAAM,EAAE,IAAI,EAAE,EACd,OAAO,OAAO,EACf,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAE/B,IAAI,SAAS,MAAM;IACnB,IAAI,CAAC,MAAM,OAAO;IAElB,MAAM,QAAQ,SACX,IAAI,CAAC,YACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,KAAK,EAAE;IAEnB,4BAA4B;IAC5B,IAAI,QAAQ;QACV,MAAM,WAAW,CAAC;IACpB;IAEA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,MAAM,MAAM;IAE1C,IAAI,OAAO,MAAM;IACjB,OAAO;AACT;AAKO,MAAM,kBAAkB;IAC7B,OAAO,IAAA,+LAAQ,EAAC;QACd,UAAU;YAAC;SAAU;QACrB,SAAS,CAAC,EAAE,MAAM,EAAE,GAAK,aAAa;QACtC,WAAW,OAAO,KAAK;QACvB,QAAQ,OAAO,KAAK;QACpB,iBAAiB,CAAC,eAAiB;QACnC,OAAO;IACT;AACF;AAKO,MAAM,gBAAgB,OAAO;IAClC,MAAM,WAAW,IAAA,iJAAY;IAE7B,MAAM,EACJ,MAAM,EAAE,IAAI,EAAE,EACd,OAAO,OAAO,EACf,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAE/B,IAAI,SAAS,MAAM;IACnB,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;IAE3B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,YACL,MAAM,CAAC;QACN,GAAG,OAAO;QACV,YAAY,IAAI,OAAO,WAAW;IACpC,GACC,EAAE,CAAC,MAAM,KAAK,EAAE,EAChB,MAAM,GACN,MAAM;IAET,IAAI,OAAO,MAAM;IACjB,OAAO;AACT;AAKO,MAAM,2BAA2B;IACtC,MAAM,KAAK,IAAA,gNAAc;IAEzB,OAAO,IAAA,qMAAW,EAAC;QACjB,YAAY;QACZ,WAAW;YACT,0BAA0B;YAC1B,GAAG,iBAAiB,CAAC;gBAAE,UAAU;oBAAC;iBAAU;YAAC;QAC/C;IACF;AACF"}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/ui/progress.tsx"],"sourcesContent":["'use client'\r\n\r\nimport * as React from 'react'\r\nimport * as ProgressPrimitive from '@radix-ui/react-progress'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Progress({\r\n  className,\r\n  value,\r\n  indicatorClassName,\r\n  ...props\r\n}: React.ComponentProps<typeof ProgressPrimitive.Root> & { indicatorClassName?: string }) {\r\n  return (\r\n    <ProgressPrimitive.Root\r\n      data-slot=\"progress\"\r\n      className={cn(\r\n        'bg-primary/20 relative h-2 w-full overflow-hidden rounded-full',\r\n        className,\r\n      )}\r\n      {...props}\r\n    >\r\n      <ProgressPrimitive.Indicator\r\n        data-slot=\"progress-indicator\"\r\n        className={cn(\"bg-primary h-full w-full flex-1 transition-all\", indicatorClassName)}\r\n        style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\r\n      />\r\n    </ProgressPrimitive.Root>\r\n  )\r\n}\r\n\r\nexport { Progress }\r\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,SAAS,EAChB,SAAS,EACT,KAAK,EACL,kBAAkB,EAClB,GAAG,OACmF;IACtF,qBACE,kMAAC,oLAAsB;QACrB,aAAU;QACV,WAAW,IAAA,0HAAE,EACX,kEACA;QAED,GAAG,KAAK;kBAET,cAAA,kMAAC,yLAA2B;YAC1B,aAAU;YACV,WAAW,IAAA,0HAAE,EAAC,kDAAkD;YAChE,OAAO;gBAAE,WAAW,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC;YAAC;;;;;;;;;;;AAIlE"}},
    {"offset": {"line": 116, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/student/rewards/MissionCard.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { Card, CardContent } from \"@/components/ui/card\";\r\nimport { Progress } from \"@/components/ui/progress\";\r\nimport { CheckCircle2, Circle, Zap, Brain, Play, Star } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\ninterface Mission {\r\n    id: string;\r\n    title: string;\r\n    reward: number;\r\n    progress: number;\r\n    goal: number;\r\n    completed: boolean;\r\n    icon: string;\r\n}\r\n\r\nconst icons: Record<string, any> = {\r\n    Zap, Brain, Play, Star\r\n};\r\n\r\nexport default function MissionCard({ mission }: { mission: Mission }) {\r\n    const Icon = icons[mission.icon] || Star;\r\n    const progressPercent = (mission.progress / mission.goal) * 100;\r\n\r\n    return (\r\n        <Card className={cn(\"border-l-4 transition-all\", mission.completed ? \"border-l-emerald-500 bg-emerald-50/50 dark:bg-emerald-900/10\" : \"border-l-indigo-500\")}>\r\n            <CardContent className=\"p-4 flex items-center gap-4\">\r\n                <div className={cn(\"p-2 rounded-full\", mission.completed ? \"bg-emerald-100 text-emerald-600\" : \"bg-indigo-100 text-indigo-600\")}>\r\n                    <Icon className=\"w-5 h-5\" />\r\n                </div>\r\n                <div className=\"flex-1\">\r\n                    <div className=\"flex justify-between items-center mb-1\">\r\n                        <h4 className={cn(\"font-medium\", mission.completed && \"text-emerald-700 dark:text-emerald-400\")}>{mission.title}</h4>\r\n                        <span className=\"text-xs font-bold text-amber-500 flex items-center gap-1\">\r\n                            +{mission.reward} <span className=\"text-[10px]\">COINS</span>\r\n                        </span>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <Progress value={progressPercent} className=\"h-1.5 flex-1\" />\r\n                        <span className=\"text-xs text-muted-foreground\">{mission.progress}/{mission.goal}</span>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    {mission.completed ? (\r\n                        <CheckCircle2 className=\"w-6 h-6 text-emerald-500\" />\r\n                    ) : (\r\n                        <Circle className=\"w-6 h-6 text-slate-300\" />\r\n                    )}\r\n                </div>\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AALA;;;;;;AAiBA,MAAM,QAA6B;IAC/B,KAAA,+MAAG;IAAE,OAAA,qNAAK;IAAE,MAAA,kNAAI;IAAE,MAAA,kNAAI;AAC1B;AAEe,SAAS,YAAY,EAAE,OAAO,EAAwB;IACjE,MAAM,OAAO,KAAK,CAAC,QAAQ,IAAI,CAAC,IAAI,kNAAI;IACxC,MAAM,kBAAkB,AAAC,QAAQ,QAAQ,GAAG,QAAQ,IAAI,GAAI;IAE5D,qBACI,kMAAC,yIAAI;QAAC,WAAW,IAAA,0HAAE,EAAC,6BAA6B,QAAQ,SAAS,GAAG,iEAAiE;kBAClI,cAAA,kMAAC,gJAAW;YAAC,WAAU;;8BACnB,kMAAC;oBAAI,WAAW,IAAA,0HAAE,EAAC,oBAAoB,QAAQ,SAAS,GAAG,oCAAoC;8BAC3F,cAAA,kMAAC;wBAAK,WAAU;;;;;;;;;;;8BAEpB,kMAAC;oBAAI,WAAU;;sCACX,kMAAC;4BAAI,WAAU;;8CACX,kMAAC;oCAAG,WAAW,IAAA,0HAAE,EAAC,eAAe,QAAQ,SAAS,IAAI;8CAA4C,QAAQ,KAAK;;;;;;8CAC/G,kMAAC;oCAAK,WAAU;;wCAA2D;wCACrE,QAAQ,MAAM;wCAAC;sDAAC,kMAAC;4CAAK,WAAU;sDAAc;;;;;;;;;;;;;;;;;;sCAGxD,kMAAC;4BAAI,WAAU;;8CACX,kMAAC,iJAAQ;oCAAC,OAAO;oCAAiB,WAAU;;;;;;8CAC5C,kMAAC;oCAAK,WAAU;;wCAAiC,QAAQ,QAAQ;wCAAC;wCAAE,QAAQ,IAAI;;;;;;;;;;;;;;;;;;;8BAGxF,kMAAC;8BACI,QAAQ,SAAS,iBACd,kMAAC,6OAAY;wBAAC,WAAU;;;;;6CAExB,kMAAC,wNAAM;wBAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;AAM1C"}},
    {"offset": {"line": 274, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/student/rewards/BadgeGrid.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Award, Lock } from \"lucide-react\";\r\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\";\r\n\r\ninterface Badge {\r\n    id: string;\r\n    name: string;\r\n    description: string;\r\n    icon: string;\r\n}\r\n\r\nconst ALL_BADGES: Badge[] = [\r\n    { id: 'streak_7', name: 'Week Warrior', description: 'Maintained a 7-day streak', icon: 'ðŸ”¥' },\r\n    { id: 'streak_30', name: 'Monthly Master', description: 'Maintained a 30-day streak', icon: 'ðŸ‘‘' },\r\n    { id: 'night_owl', name: 'Night Owl', description: 'Completed a lesson after 10 PM', icon: 'ðŸ¦‰' },\r\n    { id: 'social_butterfly', name: 'Ambassador', description: 'Referred a friend who started learning', icon: 'ðŸ¦‹' },\r\n    { id: 'quiz_master', name: 'Quiz Whiz', description: 'Scored 100% on 5 quizzes', icon: 'ðŸ§ ' },\r\n];\r\n\r\nexport default function BadgeGrid({ earnedBadgeIds }: { earnedBadgeIds: string[] }) {\r\n    return (\r\n        <Card>\r\n            <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2 text-lg\">\r\n                    <Award className=\"w-5 h-5 text-amber-500\" />\r\n                    Badges & Achievements\r\n                </CardTitle>\r\n            </CardHeader>\r\n            <CardContent>\r\n                <div className=\"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4\">\r\n                    {ALL_BADGES.map((badge) => {\r\n                        const isUnlocked = earnedBadgeIds.includes(badge.id);\r\n                        return (\r\n                            <TooltipProvider key={badge.id}>\r\n                                <Tooltip>\r\n                                    <TooltipTrigger>\r\n                                        <div className={`flex flex-col items-center gap-2 p-3 rounded-xl border transition-all ${isUnlocked\r\n                                            ? \"bg-amber-50 border-amber-200 dark:bg-amber-900/20 dark:border-amber-800\"\r\n                                            : \"bg-slate-50 border-slate-100 dark:bg-slate-900/50 dark:border-slate-800 opacity-60 grayscale\"\r\n                                            }`}>\r\n                                            <div className={`text-3xl ${isUnlocked ? \"animate-bounce-subtle\" : \"\"}`}>\r\n                                                {isUnlocked ? badge.icon : <Lock className=\"w-8 h-8 p-1 text-slate-400\" />}\r\n                                            </div>\r\n                                            <span className=\"text-xs font-medium text-center truncate w-full\">\r\n                                                {badge.name}\r\n                                            </span>\r\n                                        </div>\r\n                                    </TooltipTrigger>\r\n                                    <TooltipContent>\r\n                                        <p className=\"font-bold\">{badge.name}</p>\r\n                                        <p className=\"text-xs\">{badge.description}</p>\r\n                                        {!isUnlocked && <p className=\"text-xs text-amber-500 mt-1\">Locked</p>}\r\n                                    </TooltipContent>\r\n                                </Tooltip>\r\n                            </TooltipProvider>\r\n                        );\r\n                    })}\r\n                </div>\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AAJA;;;;;AAaA,MAAM,aAAsB;IACxB;QAAE,IAAI;QAAY,MAAM;QAAgB,aAAa;QAA6B,MAAM;IAAK;IAC7F;QAAE,IAAI;QAAa,MAAM;QAAkB,aAAa;QAA8B,MAAM;IAAK;IACjG;QAAE,IAAI;QAAa,MAAM;QAAa,aAAa;QAAkC,MAAM;IAAK;IAChG;QAAE,IAAI;QAAoB,MAAM;QAAc,aAAa;QAA0C,MAAM;IAAK;IAChH;QAAE,IAAI;QAAe,MAAM;QAAa,aAAa;QAA4B,MAAM;IAAK;CAC/F;AAEc,SAAS,UAAU,EAAE,cAAc,EAAgC;IAC9E,qBACI,kMAAC,yIAAI;;0BACD,kMAAC,+IAAU;0BACP,cAAA,kMAAC,8IAAS;oBAAC,WAAU;;sCACjB,kMAAC,qNAAK;4BAAC,WAAU;;;;;;wBAA2B;;;;;;;;;;;;0BAIpD,kMAAC,gJAAW;0BACR,cAAA,kMAAC;oBAAI,WAAU;8BACV,WAAW,GAAG,CAAC,CAAC;wBACb,MAAM,aAAa,eAAe,QAAQ,CAAC,MAAM,EAAE;wBACnD,qBACI,kMAAC,uJAAe;sCACZ,cAAA,kMAAC,+IAAO;;kDACJ,kMAAC,sJAAc;kDACX,cAAA,kMAAC;4CAAI,WAAW,CAAC,sEAAsE,EAAE,aACnF,4EACA,gGACA;;8DACF,kMAAC;oDAAI,WAAW,CAAC,SAAS,EAAE,aAAa,0BAA0B,IAAI;8DAClE,aAAa,MAAM,IAAI,iBAAG,kMAAC,kNAAI;wDAAC,WAAU;;;;;;;;;;;8DAE/C,kMAAC;oDAAK,WAAU;8DACX,MAAM,IAAI;;;;;;;;;;;;;;;;;kDAIvB,kMAAC,sJAAc;;0DACX,kMAAC;gDAAE,WAAU;0DAAa,MAAM,IAAI;;;;;;0DACpC,kMAAC;gDAAE,WAAU;0DAAW,MAAM,WAAW;;;;;;4CACxC,CAAC,4BAAc,kMAAC;gDAAE,WAAU;0DAA8B;;;;;;;;;;;;;;;;;;2BAlBjD,MAAM,EAAE;;;;;oBAuBtC;;;;;;;;;;;;;;;;;AAKpB"}},
    {"offset": {"line": 456, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/ui/tabs.tsx"],"sourcesContent":["'use client'\r\n// Force recompile\r\n\r\nimport * as React from 'react'\r\nimport * as TabsPrimitive from '@radix-ui/react-tabs'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Tabs({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.Root>) {\r\n  return (\r\n    <TabsPrimitive.Root\r\n      data-slot=\"tabs\"\r\n      className={cn('flex flex-col gap-2', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction TabsList({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.List>) {\r\n  return (\r\n    <TabsPrimitive.List\r\n      data-slot=\"tabs-list\"\r\n      className={cn(\r\n        'bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction TabsTrigger({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.Trigger>) {\r\n  return (\r\n    <TabsPrimitive.Trigger\r\n      data-slot=\"tabs-trigger\"\r\n      className={cn(\r\n        \"data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction TabsContent({\r\n  className,\r\n  ...props\r\n}: React.ComponentProps<typeof TabsPrimitive.Content>) {\r\n  return (\r\n    <TabsPrimitive.Content\r\n      data-slot=\"tabs-content\"\r\n      className={cn('flex-1 outline-none', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\r\n"],"names":[],"mappings":";;;;;;;;;;;AAIA;AAEA;AANA;;;;AAQA,SAAS,KAAK,EACZ,SAAS,EACT,GAAG,OAC6C;IAChD,qBACE,kMAAC,gLAAkB;QACjB,aAAU;QACV,WAAW,IAAA,0HAAE,EAAC,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OAC6C;IAChD,qBACE,kMAAC,gLAAkB;QACjB,aAAU;QACV,WAAW,IAAA,0HAAE,EACX,uGACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,kMAAC,mLAAqB;QACpB,aAAU;QACV,WAAW,IAAA,0HAAE,EACX,mqBACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,kMAAC,mLAAqB;QACpB,aAAU;QACV,WAAW,IAAA,0HAAE,EAAC,uBAAuB;QACpC,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 522, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/student/rewards/Leaderboard.tsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Tabs, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { Trophy, Medal, Crown, Loader2 } from \"lucide-react\";\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\nimport { useLeaderboard } from \"@/hooks/useRewards\";\r\n\r\ninterface LeaderboardEntry {\r\n    user_id: string;\r\n    total_coins: number;\r\n    weekly_xp: number;\r\n    xp: number;\r\n    level: number;\r\n    profiles: {\r\n        full_name: string;\r\n        avatar_url: string;\r\n    };\r\n}\r\n\r\nexport default function Leaderboard({\r\n    currentUserId\r\n}: {\r\n    currentUserId: string\r\n}) {\r\n    const [view, setView] = useState<'weekly' | 'all_time'>('weekly');\r\n    const { data, isLoading } = useLeaderboard(view);\r\n\r\n    return (\r\n        <Card className=\"h-full\">\r\n            <CardHeader className=\"pb-2\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <CardTitle className=\"flex items-center gap-2\">\r\n                        <Trophy className=\"w-5 h-5 text-yellow-500\" />\r\n                        Leaderboard\r\n                    </CardTitle>\r\n                    <Tabs value={view} onValueChange={(v) => setView(v as any)} className=\"w-[160px]\">\r\n                        <TabsList className=\"grid w-full grid-cols-2 h-8\">\r\n                            <TabsTrigger value=\"weekly\" className=\"text-xs\">Weekly</TabsTrigger>\r\n                            <TabsTrigger value=\"all_time\" className=\"text-xs\">All Time</TabsTrigger>\r\n                        </TabsList>\r\n                    </Tabs>\r\n                </div>\r\n            </CardHeader>\r\n            <CardContent>\r\n                {isLoading ? (\r\n                    <div className=\"flex justify-center py-8\">\r\n                        <Loader2 className=\"w-6 h-6 animate-spin text-indigo-500\" />\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"space-y-3\">\r\n                        {data?.map((entry: LeaderboardEntry, index: number) => {\r\n                            const isMe = entry.user_id === currentUserId;\r\n                            const score = view === 'weekly' ? entry.weekly_xp : entry.total_coins;\r\n                            const label = view === 'weekly' ? 'XP' : 'Coins';\r\n\r\n                            return (\r\n                                <div\r\n                                    key={entry.user_id}\r\n                                    className={`flex items-center gap-3 p-2 rounded-lg transition-colors ${isMe ? \"bg-indigo-50 dark:bg-indigo-900/20 border border-indigo-100 dark:border-indigo-800\" : \"hover:bg-slate-50 dark:hover:bg-slate-900/50\"\r\n                                        }`}\r\n                                >\r\n                                    <div className=\"w-6 text-center font-bold text-slate-500\">\r\n                                        {index === 0 ? <Crown className=\"w-5 h-5 text-yellow-500 mx-auto\" /> :\r\n                                            index === 1 ? <Medal className=\"w-5 h-5 text-slate-400 mx-auto\" /> :\r\n                                                index === 2 ? <Medal className=\"w-5 h-5 text-amber-600 mx-auto\" /> :\r\n                                                    `#${index + 1}`}\r\n                                    </div>\r\n                                    <Avatar className=\"h-8 w-8\">\r\n                                        <AvatarImage src={entry.profiles?.avatar_url} />\r\n                                        <AvatarFallback>{entry.profiles?.full_name?.charAt(0) || 'U'}</AvatarFallback>\r\n                                    </Avatar>\r\n                                    <div className=\"flex-1 min-w-0\">\r\n                                        <p className={`text-sm font-medium truncate ${isMe ? \"text-indigo-700 dark:text-indigo-300\" : \"\"}`}>\r\n                                            {entry.profiles?.full_name || \"Unknown User\"}\r\n                                            {isMe && \" (You)\"}\r\n                                        </p>\r\n                                        <p className=\"text-xs text-muted-foreground\">Level {entry.level || 1}</p>\r\n                                    </div>\r\n                                    <div className=\"text-right\">\r\n                                        <p className=\"font-bold text-sm\">{score}</p>\r\n                                        <p className=\"text-[10px] text-muted-foreground uppercase\">{label}</p>\r\n                                    </div>\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                )}\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;;;;;;;;AAce,SAAS,YAAY,EAChC,aAAa,EAGhB;IACG,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,8KAAQ,EAAwB;IACxD,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG,IAAA,6IAAc,EAAC;IAE3C,qBACI,kMAAC,yIAAI;QAAC,WAAU;;0BACZ,kMAAC,+IAAU;gBAAC,WAAU;0BAClB,cAAA,kMAAC;oBAAI,WAAU;;sCACX,kMAAC,8IAAS;4BAAC,WAAU;;8CACjB,kMAAC,wNAAM;oCAAC,WAAU;;;;;;gCAA4B;;;;;;;sCAGlD,kMAAC,yIAAI;4BAAC,OAAO;4BAAM,eAAe,CAAC,IAAM,QAAQ;4BAAW,WAAU;sCAClE,cAAA,kMAAC,6IAAQ;gCAAC,WAAU;;kDAChB,kMAAC,gJAAW;wCAAC,OAAM;wCAAS,WAAU;kDAAU;;;;;;kDAChD,kMAAC,gJAAW;wCAAC,OAAM;wCAAW,WAAU;kDAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAKlE,kMAAC,gJAAW;0BACP,0BACG,kMAAC;oBAAI,WAAU;8BACX,cAAA,kMAAC,oOAAO;wBAAC,WAAU;;;;;;;;;;yCAGvB,kMAAC;oBAAI,WAAU;8BACV,MAAM,IAAI,CAAC,OAAyB;wBACjC,MAAM,OAAO,MAAM,OAAO,KAAK;wBAC/B,MAAM,QAAQ,SAAS,WAAW,MAAM,SAAS,GAAG,MAAM,WAAW;wBACrE,MAAM,QAAQ,SAAS,WAAW,OAAO;wBAEzC,qBACI,kMAAC;4BAEG,WAAW,CAAC,yDAAyD,EAAE,OAAO,uFAAuF,gDAC/J;;8CAEN,kMAAC;oCAAI,WAAU;8CACV,UAAU,kBAAI,kMAAC,qNAAK;wCAAC,WAAU;;;;;+CAC5B,UAAU,kBAAI,kMAAC,qNAAK;wCAAC,WAAU;;;;;+CAC3B,UAAU,kBAAI,kMAAC,qNAAK;wCAAC,WAAU;;;;;+CAC3B,CAAC,CAAC,EAAE,QAAQ,GAAG;;;;;;8CAE/B,kMAAC,6IAAM;oCAAC,WAAU;;sDACd,kMAAC,kJAAW;4CAAC,KAAK,MAAM,QAAQ,EAAE;;;;;;sDAClC,kMAAC,qJAAc;sDAAE,MAAM,QAAQ,EAAE,WAAW,OAAO,MAAM;;;;;;;;;;;;8CAE7D,kMAAC;oCAAI,WAAU;;sDACX,kMAAC;4CAAE,WAAW,CAAC,6BAA6B,EAAE,OAAO,yCAAyC,IAAI;;gDAC7F,MAAM,QAAQ,EAAE,aAAa;gDAC7B,QAAQ;;;;;;;sDAEb,kMAAC;4CAAE,WAAU;;gDAAgC;gDAAO,MAAM,KAAK,IAAI;;;;;;;;;;;;;8CAEvE,kMAAC;oCAAI,WAAU;;sDACX,kMAAC;4CAAE,WAAU;sDAAqB;;;;;;sDAClC,kMAAC;4CAAE,WAAU;sDAA+C;;;;;;;;;;;;;2BAvB3D,MAAM,OAAO;;;;;oBA2B9B;;;;;;;;;;;;;;;;;AAMxB"}},
    {"offset": {"line": 774, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/components/student/rewards/StreakCalendar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Flame, ChevronLeft, ChevronRight } from \"lucide-react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { format, startOfMonth, endOfMonth, eachDayOfInterval, isSameMonth, isSameDay, isToday, subMonths, addMonths } from \"date-fns\";\r\n\r\ninterface StreakCalendarProps {\r\n    streakHistory: string[]; // Array of ISO date strings (YYYY-MM-DD)\r\n    currentStreak: number;\r\n    longestStreak: number;\r\n}\r\n\r\nexport default function StreakCalendar({ streakHistory, currentStreak, longestStreak }: StreakCalendarProps) {\r\n    const [currentMonth, setCurrentMonth] = useState(new Date());\r\n\r\n    const daysInMonth = eachDayOfInterval({\r\n        start: startOfMonth(currentMonth),\r\n        end: endOfMonth(currentMonth)\r\n    });\r\n\r\n    const nextMonth = () => setCurrentMonth(addMonths(currentMonth, 1));\r\n    const prevMonth = () => setCurrentMonth(subMonths(currentMonth, 1));\r\n\r\n    // Normalize history dates to local date strings for comparison\r\n    const activeDates = new Set(streakHistory.map(date => new Date(date).toDateString()));\r\n\r\n    return (\r\n        <Card className=\"bg-white dark:bg-slate-900 text-slate-900 dark:text-white border-slate-200 dark:border-slate-800 overflow-hidden shadow-sm\">\r\n            <CardHeader className=\"pb-2\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <div>\r\n                        <CardTitle className=\"text-lg font-bold flex items-center gap-2\">\r\n                            Learning Streak\r\n                        </CardTitle>\r\n                        <p className=\"text-sm text-slate-500 dark:text-slate-400 mt-1\">Keep it up to achieve your goals!</p>\r\n                    </div>\r\n                </div>\r\n            </CardHeader>\r\n            <CardContent>\r\n                {/* Stats */}\r\n                <div className=\"bg-slate-50 dark:bg-slate-800/50 rounded-xl p-4 mb-6 flex items-center justify-between relative overflow-hidden border border-slate-100 dark:border-slate-700\">\r\n                    <div className=\"flex gap-8 relative z-10\">\r\n                        <div>\r\n                            <p className=\"text-xs text-slate-500 dark:text-slate-400 uppercase font-bold tracking-wider\">Current</p>\r\n                            <p className=\"text-2xl font-bold text-orange-500 dark:text-orange-400\">{currentStreak} days</p>\r\n                        </div>\r\n                        <div className=\"w-px bg-slate-200 dark:bg-slate-700\"></div>\r\n                        <div>\r\n                            <p className=\"text-xs text-slate-500 dark:text-slate-400 uppercase font-bold tracking-wider\">Longest</p>\r\n                            <p className=\"text-2xl font-bold text-slate-700 dark:text-white\">{longestStreak} days</p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Decorative Flame */}\r\n                    <div className=\"absolute right-0 bottom-0 opacity-10 dark:opacity-20 transform translate-x-4 translate-y-4\">\r\n                        <div className=\"bg-orange-500 rounded-full p-4 blur-xl\">\r\n                            <Flame className=\"w-16 h-16 text-orange-200\" />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"relative z-10 bg-white dark:bg-slate-800 rounded-full p-3 border-4 border-slate-100 dark:border-slate-700 shadow-sm\">\r\n                        <Flame className=\"w-8 h-8 text-orange-500 fill-orange-500 animate-pulse\" />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Calendar Header */}\r\n                <div className=\"flex items-center justify-between mb-4 px-2\">\r\n                    <button onClick={prevMonth} className=\"p-1 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors\">\r\n                        <ChevronLeft className=\"w-5 h-5 text-slate-500 dark:text-slate-400\" />\r\n                    </button>\r\n                    <span className=\"font-bold text-lg\">{format(currentMonth, \"MMMM yyyy\")}</span>\r\n                    <button onClick={nextMonth} className=\"p-1 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors\">\r\n                        <ChevronRight className=\"w-5 h-5 text-slate-500 dark:text-slate-400\" />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Calendar Grid */}\r\n                <div className=\"grid grid-cols-7 gap-2 text-center mb-2\">\r\n                    {['S', 'M', 'T', 'W', 'T', 'F', 'S'].map((day, i) => (\r\n                        <div key={i} className=\"text-xs font-bold text-slate-400 dark:text-slate-500 py-2\">\r\n                            {day}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n                <div className=\"grid grid-cols-7 gap-2\">\r\n                    {daysInMonth.map((day, idx) => {\r\n                        const isActive = activeDates.has(day.toDateString());\r\n                        const isCurrentDay = isToday(day);\r\n\r\n                        // Add offset for first day of month\r\n                        const style = idx === 0 ? { gridColumnStart: day.getDay() + 1 } : {};\r\n\r\n                        return (\r\n                            <div\r\n                                key={day.toString()}\r\n                                style={style}\r\n                                className=\"aspect-square flex items-center justify-center relative\"\r\n                            >\r\n                                {isActive ? (\r\n                                    <motion.div\r\n                                        initial={{ scale: 0 }}\r\n                                        animate={{ scale: 1 }}\r\n                                        className=\"w-8 h-8 rounded-full bg-indigo-600 dark:bg-blue-500 flex items-center justify-center shadow-lg shadow-indigo-500/30 dark:shadow-blue-500/30\"\r\n                                    >\r\n                                        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"3\" strokeLinecap=\"round\" strokeLinejoin=\"round\" className=\"w-4 h-4 text-white\">\r\n                                            <polyline points=\"20 6 9 17 4 12\" />\r\n                                        </svg>\r\n                                    </motion.div>\r\n                                ) : (\r\n                                    <div className={`w-8 h-8 rounded-full flex items-center justify-center text-sm transition-colors\r\n                                        ${isCurrentDay\r\n                                            ? \"border-2 border-indigo-600 dark:border-blue-500 text-indigo-600 dark:text-blue-400 font-bold\"\r\n                                            : \"text-slate-400 dark:text-slate-500 bg-slate-100 dark:bg-slate-800/50\"}\r\n                                    `}>\r\n                                        {/* Only show day number if not active (active shows checkmark) */}\r\n                                        {!isActive && format(day, \"d\")}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        );\r\n                    })}\r\n                </div>\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1119, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/app/student/rewards/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useCurrentUser } from \"@/hooks/student/useCurrentUser\";\r\nimport { useRewards, useStreakHistory } from \"@/hooks/useRewards\";\r\nimport { useProfileQuery } from \"@/hooks/useProfile\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Progress } from \"@/components/ui/progress\";\r\nimport { Coins, Flame, Share2, History, ArrowUpRight, Zap, Loader2 } from \"lucide-react\";\r\nimport MissionCard from \"@/components/student/rewards/MissionCard\";\r\nimport BadgeGrid from \"@/components/student/rewards/BadgeGrid\";\r\nimport Leaderboard from \"@/components/student/rewards/Leaderboard\";\r\nimport StreakCalendar from \"@/components/student/rewards/StreakCalendar\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\n\r\nexport default function StudentRewardsPage() {\r\n    const { data: user, isLoading: userLoading } = useCurrentUser();\r\n    const { data: profile } = useProfileQuery();\r\n\r\n    const {\r\n        rewardStatus: rewards,\r\n        missions,\r\n        badges,\r\n        transactions,\r\n        statusLoading\r\n    } = useRewards(user?.id);\r\n\r\n    const { data: streakHistory } = useStreakHistory(user?.id || \"\");\r\n\r\n    if (userLoading || statusLoading || !rewards) {\r\n        return <div className=\"flex items-center justify-center min-h-screen\"><Loader2 className=\"w-8 h-8 animate-spin text-indigo-600\" /></div>;\r\n    }\r\n\r\n    const earnedBadgeIds = badges?.map((b: any) => b.badge_id) || [];\r\n\r\n    return (\r\n        <div className=\"container max-w-6xl py-8 space-y-8\">\r\n            {/* Header Stats */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n                <Card className=\"bg-linear-to-br from-indigo-500 to-violet-600 text-white border-none shadow-lg\">\r\n                    <CardContent className=\"p-6 flex flex-col justify-between h-full\">\r\n                        <div>\r\n                            <p className=\"text-indigo-100 font-medium mb-1\">Total Coins</p>\r\n                            <div className=\"text-4xl font-bold flex items-center gap-2\">\r\n                                <Coins className=\"w-8 h-8 opacity-80\" />\r\n                                {rewards.total_coins}\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"mt-4 pt-4 border-t border-white/20\">\r\n                            <div className=\"flex justify-between text-sm mb-1\">\r\n                                <span>Daily Cap</span>\r\n                                <span>{rewards.daily_coins_earned || 0}/100</span>\r\n                            </div>\r\n                            <Progress value={((rewards.daily_coins_earned || 0) / 100) * 100} className=\"h-1.5 bg-black/20\" indicatorClassName=\"bg-white\" />\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                {/* Replaced Streak Card with Calendar in main view, but keeping a summary here if desired, or removing it. \r\n                    For now, I'll keep the simple card for consistency with the grid layout, but maybe make it clickable to scroll to calendar? \r\n                    Actually, let's keep it as is for quick stats.\r\n                */}\r\n                <Card className=\"bg-linear-to-br from-orange-400 to-amber-500 text-white border-none shadow-lg\">\r\n                    <CardContent className=\"p-6 flex flex-col justify-between h-full\">\r\n                        <div>\r\n                            <p className=\"text-orange-100 font-medium mb-1\">Current Streak</p>\r\n                            <div className=\"text-4xl font-bold flex items-center gap-2\">\r\n                                <Flame className=\"w-8 h-8 opacity-80\" />\r\n                                {rewards.current_streak} <span className=\"text-lg opacity-80\">days</span>\r\n                            </div>\r\n                        </div>\r\n                        <p className=\"text-sm mt-4 text-orange-100\">\r\n                            Longest: {rewards.longest_streak} days\r\n                        </p>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                <Card className=\"md:col-span-2 bg-white dark:bg-slate-900 shadow-sm\">\r\n                    <CardContent className=\"p-6 flex items-center justify-between h-full\">\r\n                        <div>\r\n                            <h3 className=\"text-lg font-bold mb-1\">Refer & Earn</h3>\r\n                            <p className=\"text-muted-foreground text-sm mb-3\">Invite friends and earn 100 coins each!</p>\r\n                            <div className=\"flex items-center gap-2 bg-slate-100 dark:bg-slate-800 p-2 rounded-lg border border-slate-200 dark:border-slate-700 w-fit\">\r\n                                <code className=\"font-mono font-bold text-indigo-600 dark:text-indigo-400 px-2\">\r\n                                    {profile?.referral_code || \"LOADING...\"}\r\n                                </code>\r\n                                <Share2 className=\"w-4 h-4 text-slate-400 cursor-pointer hover:text-indigo-500\" />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"hidden sm:block\">\r\n                            <div className=\"w-16 h-16 rounded-full bg-indigo-50 dark:bg-indigo-900/20 flex items-center justify-center\">\r\n                                <Share2 className=\"w-8 h-8 text-indigo-500\" />\r\n                            </div>\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n                {/* Left Column: Missions & Badges */}\r\n                <div className=\"lg:col-span-2 space-y-8\">\r\n\r\n\r\n\r\n                    {/* Daily Missions */}\r\n                    <div>\r\n                        <h2 className=\"text-xl font-bold mb-4 flex items-center gap-2\">\r\n                            <Zap className=\"w-5 h-5 text-yellow-500\" />\r\n                            Daily Missions\r\n                        </h2>\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                            {missions?.map((mission: any) => (\r\n                                <MissionCard key={mission.id} mission={mission} />\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Badges */}\r\n                    <BadgeGrid earnedBadgeIds={earnedBadgeIds} />\r\n\r\n                    {/* Streak Calendar */}\r\n                    <StreakCalendar\r\n                        streakHistory={streakHistory || []}\r\n                        currentStreak={rewards.current_streak}\r\n                        longestStreak={rewards.longest_streak}\r\n                    />\r\n\r\n                    {/* Recent History */}\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <CardTitle className=\"flex items-center gap-2 text-lg\">\r\n                                <History className=\"w-5 h-5\" />\r\n                                Recent Activity\r\n                            </CardTitle>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div className=\"space-y-4\">\r\n                                {transactions && transactions.length > 0 ? (\r\n                                    transactions.map((tx: any) => (\r\n                                        <div key={tx.id} className=\"flex items-center justify-between p-3 rounded-lg hover:bg-muted/50 transition-colors border border-transparent hover:border-border\">\r\n                                            <div className=\"flex items-center gap-3\">\r\n                                                <div className={`p-2 rounded-full ${tx.amount > 0 ? 'bg-emerald-100 text-emerald-600 dark:bg-emerald-900/20 dark:text-emerald-400' : 'bg-rose-100 text-rose-600'}`}>\r\n                                                    {tx.amount > 0 ? <ArrowUpRight className=\"w-4 h-4\" /> : <ArrowUpRight className=\"w-4 h-4 rotate-180\" />}\r\n                                                </div>\r\n                                                <div>\r\n                                                    <p className=\"font-medium text-sm\">{tx.description || tx.action_type}</p>\r\n                                                    <p className=\"text-xs text-muted-foreground\">\r\n                                                        {new Date(tx.created_at).toLocaleDateString()}\r\n                                                    </p>\r\n                                                </div>\r\n                                            </div>\r\n                                            <Badge variant={tx.amount > 0 ? \"default\" : \"destructive\"} className={tx.amount > 0 ? \"bg-emerald-600 hover:bg-emerald-700\" : \"\"}>\r\n                                                {tx.amount > 0 ? \"+\" : \"\"}{tx.amount}\r\n                                            </Badge>\r\n                                        </div>\r\n                                    ))\r\n                                ) : (\r\n                                    <div className=\"text-center py-8 text-muted-foreground\">\r\n                                        No transactions yet.\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n                </div>\r\n\r\n                {/* Right Column: Leaderboard */}\r\n                <div className=\"lg:col-span-1\">\r\n                    <Leaderboard currentUserId={user?.id || \"\"} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}